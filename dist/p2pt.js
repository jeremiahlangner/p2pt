var so=Object.create;var Mr=Object.defineProperty;var ao=Object.getOwnPropertyDescriptor;var uo=Object.getOwnPropertyNames;var fo=Object.getPrototypeOf,co=Object.prototype.hasOwnProperty;var lo=(t,e)=>()=>(t&&(e=t(t=0)),e);var S=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var ho=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of uo(e))!co.call(t,i)&&i!==r&&Mr(t,i,{get:()=>e[i],enumerable:!(n=ao(e,i))||n.enumerable});return t};var tt=(t,e,r)=>(r=t!=null?so(fo(t)):{},ho(e||!t||!t.__esModule?Mr(r,"default",{value:t,enumerable:!0}):r,t));var Pr=S(rt=>{"use strict";m();rt.byteLength=go;rt.toByteArray=_o;rt.fromByteArray=bo;var H=[],P=[],po=typeof Uint8Array<"u"?Uint8Array:Array,Lt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(ae=0,Dr=Lt.length;ae<Dr;++ae)H[ae]=Lt[ae],P[Lt.charCodeAt(ae)]=ae;var ae,Dr;P["-".charCodeAt(0)]=62;P["_".charCodeAt(0)]=63;function Ur(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function go(t){var e=Ur(t),r=e[0],n=e[1];return(r+n)*3/4-n}function yo(t,e,r){return(e+r)*3/4-r}function _o(t){var e,r=Ur(t),n=r[0],i=r[1],o=new po(yo(t,n,i)),s=0,f=i>0?n-4:n,l;for(l=0;l<f;l+=4)e=P[t.charCodeAt(l)]<<18|P[t.charCodeAt(l+1)]<<12|P[t.charCodeAt(l+2)]<<6|P[t.charCodeAt(l+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=P[t.charCodeAt(l)]<<2|P[t.charCodeAt(l+1)]>>4,o[s++]=e&255),i===1&&(e=P[t.charCodeAt(l)]<<10|P[t.charCodeAt(l+1)]<<4|P[t.charCodeAt(l+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function wo(t){return H[t>>18&63]+H[t>>12&63]+H[t>>6&63]+H[t&63]}function mo(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255),i.push(wo(n));return i.join("")}function bo(t){for(var e,r=t.length,n=r%3,i=[],o=16383,s=0,f=r-n;s<f;s+=o)i.push(mo(t,s,s+o>f?f:s+o));return n===1?(e=t[r-1],i.push(H[e>>2]+H[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(H[e>>10]+H[e>>4&63]+H[e<<2&63]+"=")),i.join("")}});var jr=S(Ft=>{m();Ft.read=function(t,e,r,n,i){var o,s,f=i*8-n-1,l=(1<<f)-1,d=l>>1,u=-7,a=r?i-1:0,c=r?-1:1,y=t[e+a];for(a+=c,o=y&(1<<-u)-1,y>>=-u,u+=f;u>0;o=o*256+t[e+a],a+=c,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=n;u>0;s=s*256+t[e+a],a+=c,u-=8);if(o===0)o=1-d;else{if(o===l)return s?NaN:(y?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-d}return(y?-1:1)*s*Math.pow(2,o-n)};Ft.write=function(t,e,r,n,i,o){var s,f,l,d=o*8-i-1,u=(1<<d)-1,a=u>>1,c=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=n?0:o-1,h=n?1:-1,_=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(f=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+a>=1?e+=c/l:e+=c*Math.pow(2,1-a),e*l>=2&&(s++,l/=2),s+a>=u?(f=0,s=u):s+a>=1?(f=(e*l-1)*Math.pow(2,i),s=s+a):(f=e*Math.pow(2,a-1)*Math.pow(2,i),s=0));i>=8;t[r+y]=f&255,y+=h,f/=256,i-=8);for(s=s<<i|f,d+=i;d>0;t[r+y]=s&255,y+=h,s/=256,d-=8);t[r+y-h]|=_*128}});var fe=S(Re=>{"use strict";m();var Nt=Pr(),Ee=jr(),qr=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Re.Buffer=g;Re.SlowBuffer=xo;Re.INSPECT_MAX_BYTES=50;var nt=2147483647;Re.kMaxLength=nt;g.TYPED_ARRAY_SUPPORT=Eo();!g.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Eo(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(g.prototype,"parent",{enumerable:!0,get:function(){if(!!g.isBuffer(this))return this.buffer}});Object.defineProperty(g.prototype,"offset",{enumerable:!0,get:function(){if(!!g.isBuffer(this))return this.byteOffset}});function z(t){if(t>nt)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,g.prototype),e}function g(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Pt(t)}return Gr(t,e,r)}g.poolSize=8192;function Gr(t,e,r){if(typeof t=="string")return Ro(t,e);if(ArrayBuffer.isView(t))return Co(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if($(t,ArrayBuffer)||t&&$(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&($(t,SharedArrayBuffer)||t&&$(t.buffer,SharedArrayBuffer)))return Dt(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return g.from(n,e,r);let i=So(t);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return g.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}g.from=function(t,e,r){return Gr(t,e,r)};Object.setPrototypeOf(g.prototype,Uint8Array.prototype);Object.setPrototypeOf(g,Uint8Array);function Yr(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function vo(t,e,r){return Yr(t),t<=0?z(t):e!==void 0?typeof r=="string"?z(t).fill(e,r):z(t).fill(e):z(t)}g.alloc=function(t,e,r){return vo(t,e,r)};function Pt(t){return Yr(t),z(t<0?0:jt(t)|0)}g.allocUnsafe=function(t){return Pt(t)};g.allocUnsafeSlow=function(t){return Pt(t)};function Ro(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!g.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=Vr(t,e)|0,n=z(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function Mt(t){let e=t.length<0?0:jt(t.length)|0,r=z(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function Co(t){if($(t,Uint8Array)){let e=new Uint8Array(t);return Dt(e.buffer,e.byteOffset,e.byteLength)}return Mt(t)}function Dt(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,g.prototype),n}function So(t){if(g.isBuffer(t)){let e=jt(t.length)|0,r=z(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||Wt(t.length)?z(0):Mt(t);if(t.type==="Buffer"&&Array.isArray(t.data))return Mt(t.data)}function jt(t){if(t>=nt)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+nt.toString(16)+" bytes");return t|0}function xo(t){return+t!=t&&(t=0),g.alloc(+t)}g.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==g.prototype};g.compare=function(e,r){if($(e,Uint8Array)&&(e=g.from(e,e.offset,e.byteLength)),$(r,Uint8Array)&&(r=g.from(r,r.offset,r.byteLength)),!g.isBuffer(e)||!g.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,i=r.length;for(let o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==r[o]){n=e[o],i=r[o];break}return n<i?-1:i<n?1:0};g.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};g.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return g.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let i=g.allocUnsafe(r),o=0;for(n=0;n<e.length;++n){let s=e[n];if($(s,Uint8Array))o+s.length>i.length?(g.isBuffer(s)||(s=g.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(g.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function Vr(t,e){if(g.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||$(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Ut(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return rn(t).length;default:if(i)return n?-1:Ut(t).length;e=(""+e).toLowerCase(),i=!0}}g.byteLength=Vr;function To(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return Do(this,e,r);case"utf8":case"utf-8":return zr(this,e,r);case"ascii":return No(this,e,r);case"latin1":case"binary":return Mo(this,e,r);case"base64":return Lo(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Uo(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}g.prototype._isBuffer=!0;function ue(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}g.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)ue(this,r,r+1);return this};g.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)ue(this,r,r+3),ue(this,r+1,r+2);return this};g.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)ue(this,r,r+7),ue(this,r+1,r+6),ue(this,r+2,r+5),ue(this,r+3,r+4);return this};g.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?zr(this,0,e):To.apply(this,arguments)};g.prototype.toLocaleString=g.prototype.toString;g.prototype.equals=function(e){if(!g.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:g.compare(this,e)===0};g.prototype.inspect=function(){let e="",r=Re.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};qr&&(g.prototype[qr]=g.prototype.inspect);g.prototype.compare=function(e,r,n,i,o){if($(e,Uint8Array)&&(e=g.from(e,e.offset,e.byteLength)),!g.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),r<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;let s=o-i,f=n-r,l=Math.min(s,f),d=this.slice(i,o),u=e.slice(r,n);for(let a=0;a<l;++a)if(d[a]!==u[a]){s=d[a],f=u[a];break}return s<f?-1:f<s?1:0};function Jr(t,e,r,n,i){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,Wt(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=g.from(e,n)),g.isBuffer(e))return e.length===0?-1:Wr(t,e,r,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):Wr(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function Wr(t,e,r,n,i){let o=1,s=t.length,f=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;o=2,s/=2,f/=2,r/=2}function l(u,a){return o===1?u[a]:u.readUInt16BE(a*o)}let d;if(i){let u=-1;for(d=r;d<s;d++)if(l(t,d)===l(e,u===-1?0:d-u)){if(u===-1&&(u=d),d-u+1===f)return u*o}else u!==-1&&(d-=d-u),u=-1}else for(r+f>s&&(r=s-f),d=r;d>=0;d--){let u=!0;for(let a=0;a<f;a++)if(l(t,d+a)!==l(e,a)){u=!1;break}if(u)return d}return-1}g.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};g.prototype.indexOf=function(e,r,n){return Jr(this,e,r,n,!0)};g.prototype.lastIndexOf=function(e,r,n){return Jr(this,e,r,n,!1)};function Ao(t,e,r,n){r=Number(r)||0;let i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;let o=e.length;n>o/2&&(n=o/2);let s;for(s=0;s<n;++s){let f=parseInt(e.substr(s*2,2),16);if(Wt(f))return s;t[r+s]=f}return s}function ko(t,e,r,n){return it(Ut(e,t.length-r),t,r,n)}function Io(t,e,r,n){return it(Wo(e),t,r,n)}function Bo(t,e,r,n){return it(rn(e),t,r,n)}function Oo(t,e,r,n){return it(Ho(e,t.length-r),t,r,n)}g.prototype.write=function(e,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-r;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return Ao(this,e,r,n);case"utf8":case"utf-8":return ko(this,e,r,n);case"ascii":case"latin1":case"binary":return Io(this,e,r,n);case"base64":return Bo(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Oo(this,e,r,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Lo(t,e,r){return e===0&&r===t.length?Nt.fromByteArray(t):Nt.fromByteArray(t.slice(e,r))}function zr(t,e,r){r=Math.min(t.length,r);let n=[],i=e;for(;i<r;){let o=t[i],s=null,f=o>239?4:o>223?3:o>191?2:1;if(i+f<=r){let l,d,u,a;switch(f){case 1:o<128&&(s=o);break;case 2:l=t[i+1],(l&192)===128&&(a=(o&31)<<6|l&63,a>127&&(s=a));break;case 3:l=t[i+1],d=t[i+2],(l&192)===128&&(d&192)===128&&(a=(o&15)<<12|(l&63)<<6|d&63,a>2047&&(a<55296||a>57343)&&(s=a));break;case 4:l=t[i+1],d=t[i+2],u=t[i+3],(l&192)===128&&(d&192)===128&&(u&192)===128&&(a=(o&15)<<18|(l&63)<<12|(d&63)<<6|u&63,a>65535&&a<1114112&&(s=a))}}s===null?(s=65533,f=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=f}return Fo(n)}var Hr=4096;function Fo(t){let e=t.length;if(e<=Hr)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=Hr));return r}function No(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]&127);return n}function Mo(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function Do(t,e,r){let n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let o=e;o<r;++o)i+=$o[t[o]];return i}function Uo(t,e,r){let n=t.slice(e,r),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}g.prototype.slice=function(e,r){let n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);let i=this.subarray(e,r);return Object.setPrototypeOf(i,g.prototype),i};function N(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}g.prototype.readUintLE=g.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||N(e,r,this.length);let i=this[e],o=1,s=0;for(;++s<r&&(o*=256);)i+=this[e+s]*o;return i};g.prototype.readUintBE=g.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||N(e,r,this.length);let i=this[e+--r],o=1;for(;r>0&&(o*=256);)i+=this[e+--r]*o;return i};g.prototype.readUint8=g.prototype.readUInt8=function(e,r){return e=e>>>0,r||N(e,1,this.length),this[e]};g.prototype.readUint16LE=g.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||N(e,2,this.length),this[e]|this[e+1]<<8};g.prototype.readUint16BE=g.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||N(e,2,this.length),this[e]<<8|this[e+1]};g.prototype.readUint32LE=g.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};g.prototype.readUint32BE=g.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||N(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};g.prototype.readBigUInt64LE=te(function(e){e=e>>>0,ve(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Ue(e,this.length-8);let i=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});g.prototype.readBigUInt64BE=te(function(e){e=e>>>0,ve(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Ue(e,this.length-8);let i=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});g.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||N(e,r,this.length);let i=this[e],o=1,s=0;for(;++s<r&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*r)),i};g.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||N(e,r,this.length);let i=r,o=1,s=this[e+--i];for(;i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*r)),s};g.prototype.readInt8=function(e,r){return e=e>>>0,r||N(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};g.prototype.readInt16LE=function(e,r){e=e>>>0,r||N(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};g.prototype.readInt16BE=function(e,r){e=e>>>0,r||N(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};g.prototype.readInt32LE=function(e,r){return e=e>>>0,r||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};g.prototype.readInt32BE=function(e,r){return e=e>>>0,r||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};g.prototype.readBigInt64LE=te(function(e){e=e>>>0,ve(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Ue(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});g.prototype.readBigInt64BE=te(function(e){e=e>>>0,ve(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Ue(e,this.length-8);let i=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});g.prototype.readFloatLE=function(e,r){return e=e>>>0,r||N(e,4,this.length),Ee.read(this,e,!0,23,4)};g.prototype.readFloatBE=function(e,r){return e=e>>>0,r||N(e,4,this.length),Ee.read(this,e,!1,23,4)};g.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||N(e,8,this.length),Ee.read(this,e,!0,52,8)};g.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||N(e,8,this.length),Ee.read(this,e,!1,52,8)};function D(t,e,r,n,i,o){if(!g.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}g.prototype.writeUintLE=g.prototype.writeUIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let f=Math.pow(2,8*n)-1;D(this,e,r,n,f,0)}let o=1,s=0;for(this[r]=e&255;++s<n&&(o*=256);)this[r+s]=e/o&255;return r+n};g.prototype.writeUintBE=g.prototype.writeUIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let f=Math.pow(2,8*n)-1;D(this,e,r,n,f,0)}let o=n-1,s=1;for(this[r+o]=e&255;--o>=0&&(s*=256);)this[r+o]=e/s&255;return r+n};g.prototype.writeUint8=g.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||D(this,e,r,1,255,0),this[r]=e&255,r+1};g.prototype.writeUint16LE=g.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||D(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};g.prototype.writeUint16BE=g.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||D(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};g.prototype.writeUint32LE=g.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||D(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};g.prototype.writeUint32BE=g.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||D(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function Kr(t,e,r,n,i){tn(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,r}function Xr(t,e,r,n,i){tn(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r+7]=o,o=o>>8,t[r+6]=o,o=o>>8,t[r+5]=o,o=o>>8,t[r+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s=s>>8,t[r+2]=s,s=s>>8,t[r+1]=s,s=s>>8,t[r]=s,r+8}g.prototype.writeBigUInt64LE=te(function(e,r=0){return Kr(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});g.prototype.writeBigUInt64BE=te(function(e,r=0){return Xr(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});g.prototype.writeIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let l=Math.pow(2,8*n-1);D(this,e,r,n,l-1,-l)}let o=0,s=1,f=0;for(this[r]=e&255;++o<n&&(s*=256);)e<0&&f===0&&this[r+o-1]!==0&&(f=1),this[r+o]=(e/s>>0)-f&255;return r+n};g.prototype.writeIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let l=Math.pow(2,8*n-1);D(this,e,r,n,l-1,-l)}let o=n-1,s=1,f=0;for(this[r+o]=e&255;--o>=0&&(s*=256);)e<0&&f===0&&this[r+o+1]!==0&&(f=1),this[r+o]=(e/s>>0)-f&255;return r+n};g.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||D(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};g.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||D(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};g.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||D(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};g.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||D(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};g.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||D(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};g.prototype.writeBigInt64LE=te(function(e,r=0){return Kr(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});g.prototype.writeBigInt64BE=te(function(e,r=0){return Xr(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Qr(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Zr(t,e,r,n,i){return e=+e,r=r>>>0,i||Qr(t,e,r,4,34028234663852886e22,-34028234663852886e22),Ee.write(t,e,r,n,23,4),r+4}g.prototype.writeFloatLE=function(e,r,n){return Zr(this,e,r,!0,n)};g.prototype.writeFloatBE=function(e,r,n){return Zr(this,e,r,!1,n)};function en(t,e,r,n,i){return e=+e,r=r>>>0,i||Qr(t,e,r,8,17976931348623157e292,-17976931348623157e292),Ee.write(t,e,r,n,52,8),r+8}g.prototype.writeDoubleLE=function(e,r,n){return en(this,e,r,!0,n)};g.prototype.writeDoubleBE=function(e,r,n){return en(this,e,r,!1,n)};g.prototype.copy=function(e,r,n,i){if(!g.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);let o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),r),o};g.prototype.fill=function(e,r,n,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!g.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=r;o<n;++o)this[o]=e;else{let s=g.isBuffer(e)?e:g.from(e,i),f=s.length;if(f===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-r;++o)this[o+r]=s[o%f]}return this};var be={};function qt(t,e,r){be[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}qt("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);qt("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);qt("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=$r(String(r)):typeof r=="bigint"&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=$r(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function $r(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function Po(t,e,r){ve(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&Ue(e,t.length-(r+1))}function tn(t,e,r,n,i,o){if(t>r||t<e){let s=typeof e=="bigint"?"n":"",f;throw o>3?e===0||e===BigInt(0)?f=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:f=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:f=`>= ${e}${s} and <= ${r}${s}`,new be.ERR_OUT_OF_RANGE("value",f,t)}Po(n,i,o)}function ve(t,e){if(typeof t!="number")throw new be.ERR_INVALID_ARG_TYPE(e,"number",t)}function Ue(t,e,r){throw Math.floor(t)!==t?(ve(t,r),new be.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new be.ERR_BUFFER_OUT_OF_BOUNDS:new be.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var jo=/[^+/0-9A-Za-z-_]/g;function qo(t){if(t=t.split("=")[0],t=t.trim().replace(jo,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function Ut(t,e){e=e||1/0;let r,n=t.length,i=null,o=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return o}function Wo(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function Ho(t,e){let r,n,i,o=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function rn(t){return Nt.toByteArray(qo(t))}function it(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function $(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function Wt(t){return t!==t}var $o=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function te(t){return typeof BigInt>"u"?Go:t}function Go(){throw new Error("BigInt not supported")}});var un=S((ef,an)=>{m();var L=an.exports={},G,Y;function Ht(){throw new Error("setTimeout has not been defined")}function $t(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?G=setTimeout:G=Ht}catch{G=Ht}try{typeof clearTimeout=="function"?Y=clearTimeout:Y=$t}catch{Y=$t}})();function nn(t){if(G===setTimeout)return setTimeout(t,0);if((G===Ht||!G)&&setTimeout)return G=setTimeout,setTimeout(t,0);try{return G(t,0)}catch{try{return G.call(null,t,0)}catch{return G.call(this,t,0)}}}function Yo(t){if(Y===clearTimeout)return clearTimeout(t);if((Y===$t||!Y)&&clearTimeout)return Y=clearTimeout,clearTimeout(t);try{return Y(t)}catch{try{return Y.call(null,t)}catch{return Y.call(this,t)}}}var K=[],Ce=!1,ce,ot=-1;function Vo(){!Ce||!ce||(Ce=!1,ce.length?K=ce.concat(K):ot=-1,K.length&&on())}function on(){if(!Ce){var t=nn(Vo);Ce=!0;for(var e=K.length;e;){for(ce=K,K=[];++ot<e;)ce&&ce[ot].run();ot=-1,e=K.length}ce=null,Ce=!1,Yo(t)}}L.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];K.push(new sn(t,e)),K.length===1&&!Ce&&nn(on)};function sn(t,e){this.fun=t,this.array=e}sn.prototype.run=function(){this.fun.apply(null,this.array)};L.title="browser";L.browser=!0;L.env={};L.argv=[];L.version="";L.versions={};function X(){}L.on=X;L.addListener=X;L.once=X;L.off=X;L.removeListener=X;L.removeAllListeners=X;L.emit=X;L.prependListener=X;L.prependOnceListener=X;L.listeners=function(t){return[]};L.binding=function(t){throw new Error("process.binding is not supported")};L.cwd=function(){return"/"};L.chdir=function(t){throw new Error("process.chdir is not supported")};L.umask=function(){return 0}});var C,v,m=lo(()=>{C=fe().Buffer,v=un()});var fn=S((nf,st)=>{m();var Jo=function(){"use strict";function t(u,a){return a!=null&&u instanceof a}var e;try{e=Map}catch{e=function(){}}var r;try{r=Set}catch{r=function(){}}var n;try{n=Promise}catch{n=function(){}}function i(u,a,c,y,h){typeof a=="object"&&(c=a.depth,y=a.prototype,h=a.includeNonEnumerable,a=a.circular);var _=[],p=[],E=typeof C<"u";typeof a>"u"&&(a=!0),typeof c>"u"&&(c=1/0);function w(b,R){if(b===null)return null;if(R===0)return b;var x,I;if(typeof b!="object")return b;if(t(b,e))x=new e;else if(t(b,r))x=new r;else if(t(b,n))x=new n(function(Ne,Me){b.then(function(De){Ne(w(De,R-1))},function(De){Me(w(De,R-1))})});else if(i.__isArray(b))x=[];else if(i.__isRegExp(b))x=new RegExp(b.source,d(b)),b.lastIndex&&(x.lastIndex=b.lastIndex);else if(i.__isDate(b))x=new Date(b.getTime());else{if(E&&C.isBuffer(b))return C.allocUnsafe?x=C.allocUnsafe(b.length):x=new C(b.length),b.copy(x),x;t(b,Error)?x=Object.create(b):typeof y>"u"?(I=Object.getPrototypeOf(b),x=Object.create(I)):(x=Object.create(y),I=y)}if(a){var F=_.indexOf(b);if(F!=-1)return p[F];_.push(b),p.push(x)}t(b,e)&&b.forEach(function(Ne,Me){var De=w(Me,R-1),oo=w(Ne,R-1);x.set(De,oo)}),t(b,r)&&b.forEach(function(Ne){var Me=w(Ne,R-1);x.add(Me)});for(var M in b){var Fe;I&&(Fe=Object.getOwnPropertyDescriptor(I,M)),!(Fe&&Fe.set==null)&&(x[M]=w(b[M],R-1))}if(Object.getOwnPropertySymbols)for(var Fr=Object.getOwnPropertySymbols(b),M=0;M<Fr.length;M++){var Ze=Fr[M],me=Object.getOwnPropertyDescriptor(b,Ze);me&&!me.enumerable&&!h||(x[Ze]=w(b[Ze],R-1),me.enumerable||Object.defineProperty(x,Ze,{enumerable:!1}))}if(h)for(var Nr=Object.getOwnPropertyNames(b),M=0;M<Nr.length;M++){var et=Nr[M],me=Object.getOwnPropertyDescriptor(b,et);me&&me.enumerable||(x[et]=w(b[et],R-1),Object.defineProperty(x,et,{enumerable:!1}))}return x}return w(u,c)}i.clonePrototype=function(a){if(a===null)return null;var c=function(){};return c.prototype=a,new c};function o(u){return Object.prototype.toString.call(u)}i.__objToStr=o;function s(u){return typeof u=="object"&&o(u)==="[object Date]"}i.__isDate=s;function f(u){return typeof u=="object"&&o(u)==="[object Array]"}i.__isArray=f;function l(u){return typeof u=="object"&&o(u)==="[object RegExp]"}i.__isRegExp=l;function d(u){var a="";return u.global&&(a+="g"),u.ignoreCase&&(a+="i"),u.multiline&&(a+="m"),a}return i.__getRegExpFlags=d,i}();typeof st=="object"&&st.exports&&(st.exports=Jo)});var ln=S((sf,cn)=>{m();var Se=1e3,xe=Se*60,Te=xe*60,le=Te*24,zo=le*7,Ko=le*365.25;cn.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return Xo(t);if(r==="number"&&isFinite(t))return e.long?Zo(t):Qo(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Xo(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Ko;case"weeks":case"week":case"w":return r*zo;case"days":case"day":case"d":return r*le;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Te;case"minutes":case"minute":case"mins":case"min":case"m":return r*xe;case"seconds":case"second":case"secs":case"sec":case"s":return r*Se;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Qo(t){var e=Math.abs(t);return e>=le?Math.round(t/le)+"d":e>=Te?Math.round(t/Te)+"h":e>=xe?Math.round(t/xe)+"m":e>=Se?Math.round(t/Se)+"s":t+"ms"}function Zo(t){var e=Math.abs(t);return e>=le?at(t,e,le,"day"):e>=Te?at(t,e,Te,"hour"):e>=xe?at(t,e,xe,"minute"):e>=Se?at(t,e,Se,"second"):t+" ms"}function at(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var dn=S((uf,hn)=>{m();function es(t){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=i,r.enabled=s,r.humanize=ln(),r.destroy=d,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let a=0;for(let c=0;c<u.length;c++)a=(a<<5)-a+u.charCodeAt(c),a|=0;return r.colors[Math.abs(a)%r.colors.length]}r.selectColor=e;function r(u){let a,c=null,y,h;function _(...p){if(!_.enabled)return;let E=_,w=Number(new Date),b=w-(a||w);E.diff=b,E.prev=a,E.curr=w,a=w,p[0]=r.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");let R=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,(I,F)=>{if(I==="%%")return"%";R++;let M=r.formatters[F];if(typeof M=="function"){let Fe=p[R];I=M.call(E,Fe),p.splice(R,1),R--}return I}),r.formatArgs.call(E,p),(E.log||r.log).apply(E,p)}return _.namespace=u,_.useColors=r.useColors(),_.color=r.selectColor(u),_.extend=n,_.destroy=r.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>c!==null?c:(y!==r.namespaces&&(y=r.namespaces,h=r.enabled(u)),h),set:p=>{c=p}}),typeof r.init=="function"&&r.init(_),_}function n(u,a){let c=r(this.namespace+(typeof a>"u"?":":a)+u);return c.log=this.log,c}function i(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let a,c=(typeof u=="string"?u:"").split(/[\s,]+/),y=c.length;for(a=0;a<y;a++)!c[a]||(u=c[a].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.slice(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function o(){let u=[...r.names.map(f),...r.skips.map(f).map(a=>"-"+a)].join(",");return r.enable(""),u}function s(u){if(u[u.length-1]==="*")return!0;let a,c;for(a=0,c=r.skips.length;a<c;a++)if(r.skips[a].test(u))return!1;for(a=0,c=r.names.length;a<c;a++)if(r.names[a].test(u))return!0;return!1}function f(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function l(u){return u instanceof Error?u.stack||u.message:u}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}hn.exports=es});var ft=S((U,ut)=>{m();U.formatArgs=rs;U.save=ns;U.load=is;U.useColors=ts;U.storage=os();U.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();U.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function ts(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function rs(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+ut.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}U.log=console.debug||console.log||(()=>{});function ns(t){try{t?U.storage.setItem("debug",t):U.storage.removeItem("debug")}catch{}}function is(){let t;try{t=U.storage.getItem("debug")}catch{}return!t&&typeof v<"u"&&"env"in v&&(t=v.env.DEBUG),t}function os(){try{return localStorage}catch{}}ut.exports=dn()(U);var{formatters:ss}=ut.exports;ss.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var gn=S((lf,pn)=>{m();pn.exports=function(){if(typeof globalThis>"u")return null;var e={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}});var Yt=S((Gt,_n)=>{m();var ct=fe(),V=ct.Buffer;function yn(t,e){for(var r in t)e[r]=t[r]}V.from&&V.alloc&&V.allocUnsafe&&V.allocUnsafeSlow?_n.exports=ct:(yn(ct,Gt),Gt.Buffer=he);function he(t,e,r){return V(t,e,r)}he.prototype=Object.create(V.prototype);yn(V,he);he.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return V(t,e,r)};he.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=V(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};he.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return V(t)};he.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return ct.SlowBuffer(t)}});var Pe=S((pf,Jt)=>{"use strict";m();var Vt=65536,as=4294967295;function us(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var fs=Yt().Buffer,lt=global.crypto||global.msCrypto;lt&&lt.getRandomValues?Jt.exports=cs:Jt.exports=us;function cs(t,e){if(t>as)throw new RangeError("requested too many random bytes");var r=fs.allocUnsafe(t);if(t>0)if(t>Vt)for(var n=0;n<t;n+=Vt)lt.getRandomValues(r.slice(n,n+Vt));else lt.getRandomValues(r);return typeof e=="function"?v.nextTick(function(){e(null,r)}):r}});var je=S((yf,zt)=>{"use strict";m();var Ae=typeof Reflect=="object"?Reflect:null,wn=Ae&&typeof Ae.apply=="function"?Ae.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},ht;Ae&&typeof Ae.ownKeys=="function"?ht=Ae.ownKeys:Object.getOwnPropertySymbols?ht=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ht=function(e){return Object.getOwnPropertyNames(e)};function ls(t){console&&console.warn&&console.warn(t)}var bn=Number.isNaN||function(e){return e!==e};function B(){B.init.call(this)}zt.exports=B;zt.exports.once=gs;B.EventEmitter=B;B.prototype._events=void 0;B.prototype._eventsCount=0;B.prototype._maxListeners=void 0;var mn=10;function dt(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(B,"defaultMaxListeners",{enumerable:!0,get:function(){return mn},set:function(t){if(typeof t!="number"||t<0||bn(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");mn=t}});B.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};B.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||bn(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function En(t){return t._maxListeners===void 0?B.defaultMaxListeners:t._maxListeners}B.prototype.getMaxListeners=function(){return En(this)};B.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(r.length>0&&(s=r[0]),s instanceof Error)throw s;var f=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw f.context=s,f}var l=o[e];if(l===void 0)return!1;if(typeof l=="function")wn(l,this,r);else for(var d=l.length,u=xn(l,d),n=0;n<d;++n)wn(u[n],this,r);return!0};function vn(t,e,r,n){var i,o,s;if(dt(r),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),s=o[e]),s===void 0)s=o[e]=r,++t._eventsCount;else if(typeof s=="function"?s=o[e]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),i=En(t),i>0&&s.length>i&&!s.warned){s.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=t,f.type=e,f.count=s.length,ls(f)}return t}B.prototype.addListener=function(e,r){return vn(this,e,r,!1)};B.prototype.on=B.prototype.addListener;B.prototype.prependListener=function(e,r){return vn(this,e,r,!0)};function hs(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Rn(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=hs.bind(n);return i.listener=r,n.wrapFn=i,i}B.prototype.once=function(e,r){return dt(r),this.on(e,Rn(this,e,r)),this};B.prototype.prependOnceListener=function(e,r){return dt(r),this.prependListener(e,Rn(this,e,r)),this};B.prototype.removeListener=function(e,r){var n,i,o,s,f;if(dt(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(o=-1,s=n.length-1;s>=0;s--)if(n[s]===r||n[s].listener===r){f=n[s].listener,o=s;break}if(o<0)return this;o===0?n.shift():ds(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,f||r)}return this};B.prototype.off=B.prototype.removeListener;B.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function Cn(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?ps(i):xn(i,i.length)}B.prototype.listeners=function(e){return Cn(this,e,!0)};B.prototype.rawListeners=function(e){return Cn(this,e,!1)};B.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Sn.call(t,e)};B.prototype.listenerCount=Sn;function Sn(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}B.prototype.eventNames=function(){return this._eventsCount>0?ht(this._events):[]};function xn(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function ds(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function ps(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function gs(t,e){return new Promise(function(r,n){function i(s){t.removeListener(e,o),n(s)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}Tn(t,e,o,{once:!0}),e!=="error"&&ys(t,i,{once:!0})})}function ys(t,e,r){typeof t.on=="function"&&Tn(t,"error",e,r)}function Tn(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(o){n.once&&t.removeEventListener(e,i),r(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var Kt=S((wf,An)=>{m();An.exports=je().EventEmitter});var Xt=S(()=>{m()});var On=S((Rf,Bn)=>{"use strict";m();function kn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function _s(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kn(Object(r),!0).forEach(function(n){ws(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ws(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ms(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function In(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function bs(t,e,r){return e&&In(t.prototype,e),r&&In(t,r),t}var Es=fe(),pt=Es.Buffer,vs=Xt(),Qt=vs.inspect,Rs=Qt&&Qt.custom||"inspect";function Cs(t,e,r){pt.prototype.copy.call(t,e,r)}Bn.exports=function(){function t(){ms(this,t),this.head=null,this.tail=null,this.length=0}return bs(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return pt.alloc(0);for(var n=pt.allocUnsafe(r>>>0),i=this.head,o=0;i;)Cs(i.data,n,o),o+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,o=n.data;for(r-=o.length;n=n.next;){var s=n.data,f=r>s.length?s.length:r;if(f===s.length?o+=s:o+=s.slice(0,r),r-=f,r===0){f===s.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=s.slice(f));break}++i}return this.length-=i,o}},{key:"_getBuffer",value:function(r){var n=pt.allocUnsafe(r),i=this.head,o=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var s=i.data,f=r>s.length?s.length:r;if(s.copy(n,n.length-r,0,f),r-=f,r===0){f===s.length?(++o,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=s.slice(f));break}++o}return this.length-=o,n}},{key:Rs,value:function(r,n){return Qt(this,_s({},n,{depth:0,customInspect:!1}))}}]),t}()});var er=S((Sf,Fn)=>{"use strict";m();function Ss(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,v.nextTick(Zt,this,t)):v.nextTick(Zt,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(o){!e&&o?r._writableState?r._writableState.errorEmitted?v.nextTick(gt,r):(r._writableState.errorEmitted=!0,v.nextTick(Ln,r,o)):v.nextTick(Ln,r,o):e?(v.nextTick(gt,r),e(o)):v.nextTick(gt,r)}),this)}function Ln(t,e){Zt(t,e),gt(t)}function gt(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function xs(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Zt(t,e){t.emit("error",e)}function Ts(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}Fn.exports={destroy:Ss,undestroy:xs,errorOrDestroy:Ts}});var de=S((Tf,Dn)=>{"use strict";m();function As(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var Mn={};function j(t,e,r){r||(r=Error);function n(o,s,f){return typeof e=="string"?e:e(o,s,f)}var i=function(o){As(s,o);function s(f,l,d){return o.call(this,n(f,l,d))||this}return s}(r);i.prototype.name=r.name,i.prototype.code=t,Mn[t]=i}function Nn(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function ks(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function Is(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function Bs(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}j("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);j("ERR_INVALID_ARG_TYPE",function(t,e,r){var n;typeof e=="string"&&ks(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(Is(t," argument"))i="The ".concat(t," ").concat(n," ").concat(Nn(e,"type"));else{var o=Bs(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(o," ").concat(n," ").concat(Nn(e,"type"))}return i+=". Received type ".concat(typeof r),i},TypeError);j("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");j("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});j("ERR_STREAM_PREMATURE_CLOSE","Premature close");j("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});j("ERR_MULTIPLE_CALLBACK","Callback called multiple times");j("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");j("ERR_STREAM_WRITE_AFTER_END","write after end");j("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);j("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);j("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Dn.exports.codes=Mn});var tr=S((kf,Un)=>{"use strict";m();var Os=de().codes.ERR_INVALID_OPT_VALUE;function Ls(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function Fs(t,e,r,n){var i=Ls(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var o=n?r:"highWaterMark";throw new Os(o,i)}return Math.floor(i)}return t.objectMode?16:16*1024}Un.exports={getHighWaterMark:Fs}});var ke=S((Bf,rr)=>{m();typeof Object.create=="function"?rr.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:rr.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var jn=S((Lf,Pn)=>{m();Pn.exports=Ns;function Ns(t,e){if(nr("noDeprecation"))return t;var r=!1;function n(){if(!r){if(nr("throwDeprecation"))throw new Error(e);nr("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return n}function nr(t){try{if(!global.localStorage)return!1}catch{return!1}var e=global.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}});var sr=S((Nf,Yn)=>{"use strict";m();Yn.exports=O;function Wn(t){var e=this;this.next=null,this.entry=null,this.finish=function(){ua(e,t)}}var Ie;O.WritableState=We;var Ms={deprecate:jn()},Hn=Kt(),_t=fe().Buffer,Ds=global.Uint8Array||function(){};function Us(t){return _t.from(t)}function Ps(t){return _t.isBuffer(t)||t instanceof Ds}var or=er(),js=tr(),qs=js.getHighWaterMark,re=de().codes,Ws=re.ERR_INVALID_ARG_TYPE,Hs=re.ERR_METHOD_NOT_IMPLEMENTED,$s=re.ERR_MULTIPLE_CALLBACK,Gs=re.ERR_STREAM_CANNOT_PIPE,Ys=re.ERR_STREAM_DESTROYED,Vs=re.ERR_STREAM_NULL_VALUES,Js=re.ERR_STREAM_WRITE_AFTER_END,zs=re.ERR_UNKNOWN_ENCODING,Be=or.errorOrDestroy;ke()(O,Hn);function Ks(){}function We(t,e,r){Ie=Ie||pe(),t=t||{},typeof r!="boolean"&&(r=e instanceof Ie),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=qs(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){na(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new Wn(this)}We.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(We.prototype,"buffer",{get:Ms.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var yt;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(yt=Function.prototype[Symbol.hasInstance],Object.defineProperty(O,Symbol.hasInstance,{value:function(e){return yt.call(this,e)?!0:this!==O?!1:e&&e._writableState instanceof We}})):yt=function(e){return e instanceof this};function O(t){Ie=Ie||pe();var e=this instanceof Ie;if(!e&&!yt.call(O,this))return new O(t);this._writableState=new We(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),Hn.call(this)}O.prototype.pipe=function(){Be(this,new Gs)};function Xs(t,e){var r=new Js;Be(t,r),v.nextTick(e,r)}function Qs(t,e,r,n){var i;return r===null?i=new Vs:typeof r!="string"&&!e.objectMode&&(i=new Ws("chunk",["string","Buffer"],r)),i?(Be(t,i),v.nextTick(n,i),!1):!0}O.prototype.write=function(t,e,r){var n=this._writableState,i=!1,o=!n.objectMode&&Ps(t);return o&&!_t.isBuffer(t)&&(t=Us(t)),typeof e=="function"&&(r=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=Ks),n.ending?Xs(this,r):(o||Qs(this,n,t,r))&&(n.pendingcb++,i=ea(this,n,o,t,e,r)),i};O.prototype.cork=function(){this._writableState.corked++};O.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&$n(this,t))};O.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new zs(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(O.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Zs(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=_t.from(e,r)),e}Object.defineProperty(O.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ea(t,e,r,n,i,o){if(!r){var s=Zs(e,n,i);n!==s&&(r=!0,i="buffer",n=s)}var f=e.objectMode?1:n.length;e.length+=f;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var d=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},d?d.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else ir(t,e,!1,f,n,i,o);return l}function ir(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Ys("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function ta(t,e,r,n,i){--e.pendingcb,r?(v.nextTick(i,n),v.nextTick(qe,t,e),t._writableState.errorEmitted=!0,Be(t,n)):(i(n),t._writableState.errorEmitted=!0,Be(t,n),qe(t,e))}function ra(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function na(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new $s;if(ra(r),e)ta(t,r,n,e,i);else{var o=Gn(r)||t.destroyed;!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&$n(t,r),n?v.nextTick(qn,t,r,o,i):qn(t,r,o,i)}}function qn(t,e,r,n){r||ia(t,e),e.pendingcb--,n(),qe(t,e)}function ia(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function $n(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var s=0,f=!0;r;)i[s]=r,r.isBuf||(f=!1),r=r.next,s+=1;i.allBuffers=f,ir(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new Wn(e),e.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,d=r.encoding,u=r.callback,a=e.objectMode?1:l.length;if(ir(t,e,!1,a,l,d,u),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}O.prototype._write=function(t,e,r){r(new Hs("_write()"))};O.prototype._writev=null;O.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||aa(this,n,r),this};Object.defineProperty(O.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Gn(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function oa(t,e){t._final(function(r){e.pendingcb--,r&&Be(t,r),e.prefinished=!0,t.emit("prefinish"),qe(t,e)})}function sa(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,v.nextTick(oa,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function qe(t,e){var r=Gn(e);if(r&&(sa(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function aa(t,e,r){e.ending=!0,qe(t,e),r&&(e.finished?v.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function ua(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(O.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});O.prototype.destroy=or.destroy;O.prototype._undestroy=or.undestroy;O.prototype._destroy=function(t,e){e(t)}});var pe=S((Df,Jn)=>{"use strict";m();var fa=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};Jn.exports=J;var Vn=fr(),ur=sr();ke()(J,Vn);for(ar=fa(ur.prototype),wt=0;wt<ar.length;wt++)mt=ar[wt],J.prototype[mt]||(J.prototype[mt]=ur.prototype[mt]);var ar,mt,wt;function J(t){if(!(this instanceof J))return new J(t);Vn.call(this,t),ur.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",ca)))}Object.defineProperty(J.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(J.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(J.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ca(){this._writableState.ended||v.nextTick(la,this)}function la(t){t.end()}Object.defineProperty(J.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var hr=S(Kn=>{"use strict";m();var lr=Yt().Buffer,zn=lr.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function ha(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function da(t){var e=ha(t);if(typeof e!="string"&&(lr.isEncoding===zn||!zn(t)))throw new Error("Unknown encoding: "+t);return e||t}Kn.StringDecoder=He;function He(t){this.encoding=da(t);var e;switch(this.encoding){case"utf16le":this.text=ma,this.end=ba,e=4;break;case"utf8":this.fillLast=ya,e=4;break;case"base64":this.text=Ea,this.end=va,e=3;break;default:this.write=Ra,this.end=Ca;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=lr.allocUnsafe(e)}He.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};He.prototype.end=wa;He.prototype.text=_a;He.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function cr(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function pa(t,e,r){var n=e.length-1;if(n<r)return 0;var i=cr(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=cr(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=cr(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function ga(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function ya(t){var e=this.lastTotal-this.lastNeed,r=ga(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function _a(t,e){var r=pa(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function wa(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function ma(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function ba(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function Ea(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function va(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function Ra(t){return t.toString(this.encoding)}function Ca(t){return t&&t.length?this.write(t):""}});var bt=S((qf,Zn)=>{"use strict";m();var Xn=de().codes.ERR_STREAM_PREMATURE_CLOSE;function Sa(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function xa(){}function Ta(t){return t.setHeader&&typeof t.abort=="function"}function Qn(t,e,r){if(typeof e=="function")return Qn(t,null,e);e||(e={}),r=Sa(r||xa);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,o=function(){t.writable||f()},s=t._writableState&&t._writableState.finished,f=function(){i=!1,s=!0,n||r.call(t)},l=t._readableState&&t._readableState.endEmitted,d=function(){n=!1,l=!0,i||r.call(t)},u=function(h){r.call(t,h)},a=function(){var h;if(n&&!l)return(!t._readableState||!t._readableState.ended)&&(h=new Xn),r.call(t,h);if(i&&!s)return(!t._writableState||!t._writableState.ended)&&(h=new Xn),r.call(t,h)},c=function(){t.req.on("finish",f)};return Ta(t)?(t.on("complete",f),t.on("abort",a),t.req?c():t.on("request",c)):i&&!t._writableState&&(t.on("end",o),t.on("close",o)),t.on("end",d),t.on("finish",f),e.error!==!1&&t.on("error",u),t.on("close",a),function(){t.removeListener("complete",f),t.removeListener("abort",a),t.removeListener("request",c),t.req&&t.req.removeListener("finish",f),t.removeListener("end",o),t.removeListener("close",o),t.removeListener("finish",f),t.removeListener("end",d),t.removeListener("error",u),t.removeListener("close",a)}}Zn.exports=Qn});var ti=S((Hf,ei)=>{"use strict";m();var Et;function ne(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Aa=bt(),ie=Symbol("lastResolve"),ge=Symbol("lastReject"),$e=Symbol("error"),vt=Symbol("ended"),ye=Symbol("lastPromise"),dr=Symbol("handlePromise"),_e=Symbol("stream");function oe(t,e){return{value:t,done:e}}function ka(t){var e=t[ie];if(e!==null){var r=t[_e].read();r!==null&&(t[ye]=null,t[ie]=null,t[ge]=null,e(oe(r,!1)))}}function Ia(t){v.nextTick(ka,t)}function Ba(t,e){return function(r,n){t.then(function(){if(e[vt]){r(oe(void 0,!0));return}e[dr](r,n)},n)}}var Oa=Object.getPrototypeOf(function(){}),La=Object.setPrototypeOf((Et={get stream(){return this[_e]},next:function(){var e=this,r=this[$e];if(r!==null)return Promise.reject(r);if(this[vt])return Promise.resolve(oe(void 0,!0));if(this[_e].destroyed)return new Promise(function(s,f){v.nextTick(function(){e[$e]?f(e[$e]):s(oe(void 0,!0))})});var n=this[ye],i;if(n)i=new Promise(Ba(n,this));else{var o=this[_e].read();if(o!==null)return Promise.resolve(oe(o,!1));i=new Promise(this[dr])}return this[ye]=i,i}},ne(Et,Symbol.asyncIterator,function(){return this}),ne(Et,"return",function(){var e=this;return new Promise(function(r,n){e[_e].destroy(null,function(i){if(i){n(i);return}r(oe(void 0,!0))})})}),Et),Oa),Fa=function(e){var r,n=Object.create(La,(r={},ne(r,_e,{value:e,writable:!0}),ne(r,ie,{value:null,writable:!0}),ne(r,ge,{value:null,writable:!0}),ne(r,$e,{value:null,writable:!0}),ne(r,vt,{value:e._readableState.endEmitted,writable:!0}),ne(r,dr,{value:function(o,s){var f=n[_e].read();f?(n[ye]=null,n[ie]=null,n[ge]=null,o(oe(f,!1))):(n[ie]=o,n[ge]=s)},writable:!0}),r));return n[ye]=null,Aa(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var o=n[ge];o!==null&&(n[ye]=null,n[ie]=null,n[ge]=null,o(i)),n[$e]=i;return}var s=n[ie];s!==null&&(n[ye]=null,n[ie]=null,n[ge]=null,s(oe(void 0,!0))),n[vt]=!0}),e.on("readable",Ia.bind(null,n)),n};ei.exports=Fa});var ni=S((Gf,ri)=>{m();ri.exports=function(){throw new Error("Readable.from is not available in the browser")}});var fr=S((Jf,di)=>{"use strict";m();di.exports=k;var Oe;k.ReadableState=ai;var Vf=je().EventEmitter,si=function(e,r){return e.listeners(r).length},Ye=Kt(),Rt=fe().Buffer,Na=global.Uint8Array||function(){};function Ma(t){return Rt.from(t)}function Da(t){return Rt.isBuffer(t)||t instanceof Na}var pr=Xt(),T;pr&&pr.debuglog?T=pr.debuglog("stream"):T=function(){};var Ua=On(),Er=er(),Pa=tr(),ja=Pa.getHighWaterMark,Ct=de().codes,qa=Ct.ERR_INVALID_ARG_TYPE,Wa=Ct.ERR_STREAM_PUSH_AFTER_EOF,Ha=Ct.ERR_METHOD_NOT_IMPLEMENTED,$a=Ct.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Le,gr,yr;ke()(k,Ye);var Ge=Er.errorOrDestroy,_r=["error","close","destroy","pause","resume"];function Ga(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function ai(t,e,r){Oe=Oe||pe(),t=t||{},typeof r!="boolean"&&(r=e instanceof Oe),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=ja(this,t,"readableHighWaterMark",r),this.buffer=new Ua,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Le||(Le=hr().StringDecoder),this.decoder=new Le(t.encoding),this.encoding=t.encoding)}function k(t){if(Oe=Oe||pe(),!(this instanceof k))return new k(t);var e=this instanceof Oe;this._readableState=new ai(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),Ye.call(this)}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});k.prototype.destroy=Er.destroy;k.prototype._undestroy=Er.undestroy;k.prototype._destroy=function(t,e){e(t)};k.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=Rt.from(t,e),e=""),n=!0),ui(this,t,e,!1,n)};k.prototype.unshift=function(t){return ui(this,t,null,!0,!1)};function ui(t,e,r,n,i){T("readableAddChunk",e);var o=t._readableState;if(e===null)o.reading=!1,Ja(t,o);else{var s;if(i||(s=Ya(o,e)),s)Ge(t,s);else if(o.objectMode||e&&e.length>0)if(typeof e!="string"&&!o.objectMode&&Object.getPrototypeOf(e)!==Rt.prototype&&(e=Ma(e)),n)o.endEmitted?Ge(t,new $a):wr(t,o,e,!0);else if(o.ended)Ge(t,new Wa);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!r?(e=o.decoder.write(e),o.objectMode||e.length!==0?wr(t,o,e,!1):br(t,o)):wr(t,o,e,!1)}else n||(o.reading=!1,br(t,o))}return!o.ended&&(o.length<o.highWaterMark||o.length===0)}function wr(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&St(t)),br(t,e)}function Ya(t,e){var r;return!Da(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new qa("chunk",["string","Buffer","Uint8Array"],e)),r}k.prototype.isPaused=function(){return this._readableState.flowing===!1};k.prototype.setEncoding=function(t){Le||(Le=hr().StringDecoder);var e=new Le(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var ii=1073741824;function Va(t){return t>=ii?t=ii:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function oi(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=Va(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}k.prototype.read=function(t){T("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return T("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?mr(this):St(this),null;if(t=oi(t,e),t===0&&e.ended)return e.length===0&&mr(this),null;var n=e.needReadable;T("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,T("length less than watermark",n)),e.ended||e.reading?(n=!1,T("reading or ended",n)):n&&(T("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=oi(r,e)));var i;return t>0?i=li(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&mr(this)),i!==null&&this.emit("data",i),i};function Ja(t,e){if(T("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?St(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,fi(t)))}}function St(t){var e=t._readableState;T("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(T("emitReadable",e.flowing),e.emittedReadable=!0,v.nextTick(fi,t))}function fi(t){var e=t._readableState;T("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,vr(t)}function br(t,e){e.readingMore||(e.readingMore=!0,v.nextTick(za,t,e))}function za(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(T("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}k.prototype._read=function(t){Ge(this,new Ha("_read()"))};k.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,T("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==v.stdout&&t!==v.stderr,o=i?f:_;n.endEmitted?v.nextTick(o):r.once("end",o),t.on("unpipe",s);function s(p,E){T("onunpipe"),p===r&&E&&E.hasUnpiped===!1&&(E.hasUnpiped=!0,u())}function f(){T("onend"),t.end()}var l=Ka(r);t.on("drain",l);var d=!1;function u(){T("cleanup"),t.removeListener("close",y),t.removeListener("finish",h),t.removeListener("drain",l),t.removeListener("error",c),t.removeListener("unpipe",s),r.removeListener("end",f),r.removeListener("end",_),r.removeListener("data",a),d=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&l()}r.on("data",a);function a(p){T("ondata");var E=t.write(p);T("dest.write",E),E===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&hi(n.pipes,t)!==-1)&&!d&&(T("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function c(p){T("onerror",p),_(),t.removeListener("error",c),si(t,"error")===0&&Ge(t,p)}Ga(t,"error",c);function y(){t.removeListener("finish",h),_()}t.once("close",y);function h(){T("onfinish"),t.removeListener("close",y),_()}t.once("finish",h);function _(){T("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(T("pipe resume"),r.resume()),t};function Ka(t){return function(){var r=t._readableState;T("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&si(t,"data")&&(r.flowing=!0,vr(t))}}k.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=hi(e.pipes,t);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};k.prototype.on=function(t,e){var r=Ye.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,T("on readable",n.length,n.reading),n.length?St(this):n.reading||v.nextTick(Xa,this)),r};k.prototype.addListener=k.prototype.on;k.prototype.removeListener=function(t,e){var r=Ye.prototype.removeListener.call(this,t,e);return t==="readable"&&v.nextTick(ci,this),r};k.prototype.removeAllListeners=function(t){var e=Ye.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&v.nextTick(ci,this),e};function ci(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function Xa(t){T("readable nexttick read 0"),t.read(0)}k.prototype.resume=function(){var t=this._readableState;return t.flowing||(T("resume"),t.flowing=!t.readableListening,Qa(this,t)),t.paused=!1,this};function Qa(t,e){e.resumeScheduled||(e.resumeScheduled=!0,v.nextTick(Za,t,e))}function Za(t,e){T("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),vr(t),e.flowing&&!e.reading&&t.read(0)}k.prototype.pause=function(){return T("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(T("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function vr(t){var e=t._readableState;for(T("flow",e.flowing);e.flowing&&t.read()!==null;);}k.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(T("wrapped end"),r.decoder&&!r.ended){var s=r.decoder.end();s&&s.length&&e.push(s)}e.push(null)}),t.on("data",function(s){if(T("wrapped data"),r.decoder&&(s=r.decoder.write(s)),!(r.objectMode&&s==null)&&!(!r.objectMode&&(!s||!s.length))){var f=e.push(s);f||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(f){return function(){return t[f].apply(t,arguments)}}(i));for(var o=0;o<_r.length;o++)t.on(_r[o],this.emit.bind(this,_r[o]));return this._read=function(s){T("wrapped _read",s),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(k.prototype[Symbol.asyncIterator]=function(){return gr===void 0&&(gr=ti()),gr(this)});Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});k._fromList=li;Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function li(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function mr(t){var e=t._readableState;T("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,v.nextTick(eu,e,t))}function eu(t,e){if(T("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(k.from=function(t,e){return yr===void 0&&(yr=ni()),yr(k,t,e)});function hi(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var Rr=S((Kf,gi)=>{"use strict";m();gi.exports=Q;var xt=de().codes,tu=xt.ERR_METHOD_NOT_IMPLEMENTED,ru=xt.ERR_MULTIPLE_CALLBACK,nu=xt.ERR_TRANSFORM_ALREADY_TRANSFORMING,iu=xt.ERR_TRANSFORM_WITH_LENGTH_0,Tt=pe();ke()(Q,Tt);function ou(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new ru);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Q(t){if(!(this instanceof Q))return new Q(t);Tt.call(this,t),this._transformState={afterTransform:ou.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",su)}function su(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){pi(t,e,r)}):pi(this,null,null)}Q.prototype.push=function(t,e){return this._transformState.needTransform=!1,Tt.prototype.push.call(this,t,e)};Q.prototype._transform=function(t,e,r){r(new tu("_transform()"))};Q.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Q.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Q.prototype._destroy=function(t,e){Tt.prototype._destroy.call(this,t,function(r){e(r)})};function pi(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new iu;if(t._transformState.transforming)throw new nu;return t.push(null)}});var wi=S((Qf,_i)=>{"use strict";m();_i.exports=Ve;var yi=Rr();ke()(Ve,yi);function Ve(t){if(!(this instanceof Ve))return new Ve(t);yi.call(this,t)}Ve.prototype._transform=function(t,e,r){r(null,t)}});var Ri=S((ec,vi)=>{"use strict";m();var Cr;function au(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var Ei=de().codes,uu=Ei.ERR_MISSING_ARGS,fu=Ei.ERR_STREAM_DESTROYED;function mi(t){if(t)throw t}function cu(t){return t.setHeader&&typeof t.abort=="function"}function lu(t,e,r,n){n=au(n);var i=!1;t.on("close",function(){i=!0}),Cr===void 0&&(Cr=bt()),Cr(t,{readable:e,writable:r},function(s){if(s)return n(s);i=!0,n()});var o=!1;return function(s){if(!i&&!o){if(o=!0,cu(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(s||new fu("pipe"))}}}function bi(t){t()}function hu(t,e){return t.pipe(e)}function du(t){return!t.length||typeof t[t.length-1]!="function"?mi:t.pop()}function pu(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=du(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new uu("streams");var i,o=e.map(function(s,f){var l=f<e.length-1,d=f>0;return lu(s,l,d,function(u){i||(i=u),u&&o.forEach(bi),!l&&(o.forEach(bi),n(i))})});return e.reduce(hu)}vi.exports=pu});var Sr=S((q,Ci)=>{m();q=Ci.exports=fr();q.Stream=q;q.Readable=q;q.Writable=sr();q.Duplex=pe();q.Transform=Rr();q.PassThrough=wi();q.finished=bt();q.pipeline=Ri()});var xr=S((nc,xi)=>{m();var Si;xi.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:global):t=>(Si||(Si=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0))});var ki=S((oc,Ai)=>{"use strict";m();function Ti(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function gu(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return Ti(t,r)}catch{r.message=t.message,r.stack=t.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(t)),Ti(new i,r)}}Ai.exports=gu});var Fi=S((ac,Li)=>{m();var yu=ft()("simple-peer"),Oi=gn(),Ii=Pe(),_u=Sr(),Tr=xr(),A=ki(),{Buffer:wu}=fe(),Ar=64*1024,mu=5*1e3,bu=5*1e3;function Bi(t){return t.replace(/a=ice-options:trickle\s\n/g,"")}function Eu(t){console.warn(t)}var Z=class extends _u.Duplex{constructor(e){if(e=Object.assign({allowHalfOpen:!1},e),super(e),this._id=Ii(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||Ii(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||Z.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},Z.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(r=>r),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=e.trickle!==void 0?e.trickle:!0,this.allowHalfTrickle=e.allowHalfTrickle!==void 0?e.allowHalfTrickle:!1,this.iceCompleteTimeout=e.iceCompleteTimeout||mu,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&typeof e.wrtc=="object"?e.wrtc:Oi(),!this._wrtc)throw A(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(r){this.destroy(A(r,"ERR_PC_CONSTRUCTOR"));return}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=r=>{this._onIceCandidate(r)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(r=>{this.destroy(A(r,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=r=>{this._setupData(r)},this.streams&&this.streams.forEach(r=>{this.addStream(r)}),this._pc.ontrack=r=>{this._onTrack(r)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(!this.destroying){if(this.destroyed)throw A(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof e=="string")try{e=JSON.parse(e)}catch{e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(r=>{this._addIceCandidate(r)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(r=>{this.destroy(A(r,"ERR_SET_REMOTE_DESCRIPTION"))}),!e.sdp&&!e.candidate&&!e.renegotiate&&!e.transceiverRequest&&this.destroy(A(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(e){let r=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(r).catch(n=>{!r.address||r.address.endsWith(".local")?Eu("Ignoring unsupported ICE candidate."):this.destroy(A(n,"ERR_ADD_ICE_CANDIDATE"))})}send(e){if(!this.destroying){if(this.destroyed)throw A(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(e)}}addTransceiver(e,r){if(!this.destroying){if(this.destroyed)throw A(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,r),this._needsNegotiation()}catch(n){this.destroy(A(n,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:e,init:r}})}}addStream(e){if(!this.destroying){if(this.destroyed)throw A(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),e.getTracks().forEach(r=>{this.addTrack(r,e)})}}addTrack(e,r){if(this.destroying)return;if(this.destroyed)throw A(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");let n=this._senderMap.get(e)||new Map,i=n.get(r);if(!i)i=this._pc.addTrack(e,r),n.set(r,i),this._senderMap.set(e,n),this._needsNegotiation();else throw i.removed?A(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):A(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(e,r,n){if(this.destroying)return;if(this.destroyed)throw A(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");let i=this._senderMap.get(e),o=i?i.get(n):null;if(!o)throw A(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");r&&this._senderMap.set(r,i),o.replaceTrack!=null?o.replaceTrack(r):this.destroy(A(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(e,r){if(this.destroying)return;if(this.destroyed)throw A(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");let n=this._senderMap.get(e),i=n?n.get(r):null;if(!i)throw A(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{i.removed=!0,this._pc.removeTrack(i)}catch(o){o.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(i):this.destroy(A(o,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){if(!this.destroying){if(this.destroyed)throw A(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),e.getTracks().forEach(r=>{this.removeTrack(r,e)})}}_needsNegotiation(){this._debug("_needsNegotiation"),!this._batchedNegotiation&&(this._batchedNegotiation=!0,Tr(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw A(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(e){this._destroy(e,()=>{})}_destroy(e,r){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",e&&(e.message||e)),Tr(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close"),r()}))}_setupData(e){if(!e.channel)return this.destroy(A(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=Ar),this.channelName=this._channel.label,this._channel.onmessage=n=>{this._onChannelMessage(n)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=n=>{let i=n.error instanceof Error?n.error:new Error(`Datachannel error: ${n.message} ${n.filename}:${n.lineno}:${n.colno}`);this.destroy(A(i,"ERR_DATA_CHANNEL"))};let r=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(r&&this._onChannelClose(),r=!0):r=!1},bu)}_read(){}_write(e,r,n){if(this.destroyed)return n(A(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(i){return this.destroy(A(i,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>Ar?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=e,this._cb=n}_onFinish(){if(this.destroyed)return;let e=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?e():this.once("connect",e)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(e=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(e.sdp=Bi(e.sdp)),e.sdp=this.sdpTransform(e.sdp);let r=()=>{if(this.destroyed)return;let o=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:o.type,sdp:o.sdp})},n=()=>{this._debug("createOffer success"),!this.destroyed&&(this.trickle||this._iceComplete?r():this.once("_iceComplete",r))},i=o=>{this.destroy(A(o,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(e).then(n).catch(i)}).catch(e=>{this.destroy(A(e,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(e=>{!e.mid&&e.sender.track&&!e.requested&&(e.requested=!0,this.addTransceiver(e.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(e=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(e.sdp=Bi(e.sdp)),e.sdp=this.sdpTransform(e.sdp);let r=()=>{if(this.destroyed)return;let o=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:o.type,sdp:o.sdp}),this.initiator||this._requestMissingTransceivers()},n=()=>{this.destroyed||(this.trickle||this._iceComplete?r():this.once("_iceComplete",r))},i=o=>{this.destroy(A(o,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(e).then(n).catch(i)}).catch(e=>{this.destroy(A(e,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(A(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;let e=this._pc.iceConnectionState,r=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,r),this.emit("iceStateChange",e,r),(e==="connected"||e==="completed")&&(this._pcReady=!0,this._maybeReady()),e==="failed"&&this.destroy(A(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),e==="closed"&&this.destroy(A(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(e){let r=n=>(Object.prototype.toString.call(n.values)==="[object Array]"&&n.values.forEach(i=>{Object.assign(n,i)}),n);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(n=>{let i=[];n.forEach(o=>{i.push(r(o))}),e(null,i)},n=>e(n)):this._pc.getStats.length>0?this._pc.getStats(n=>{if(this.destroyed)return;let i=[];n.result().forEach(o=>{let s={};o.names().forEach(f=>{s[f]=o.stat(f)}),s.id=o.id,s.type=o.type,s.timestamp=o.timestamp,i.push(r(s))}),e(null,i)},n=>e(n)):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;let e=()=>{this.destroyed||this.getStats((r,n)=>{if(this.destroyed)return;r&&(n=[]);let i={},o={},s={},f=!1;n.forEach(d=>{(d.type==="remotecandidate"||d.type==="remote-candidate")&&(i[d.id]=d),(d.type==="localcandidate"||d.type==="local-candidate")&&(o[d.id]=d),(d.type==="candidatepair"||d.type==="candidate-pair")&&(s[d.id]=d)});let l=d=>{f=!0;let u=o[d.localCandidateId];u&&(u.ip||u.address)?(this.localAddress=u.ip||u.address,this.localPort=Number(u.port)):u&&u.ipAddress?(this.localAddress=u.ipAddress,this.localPort=Number(u.portNumber)):typeof d.googLocalAddress=="string"&&(u=d.googLocalAddress.split(":"),this.localAddress=u[0],this.localPort=Number(u[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let a=i[d.remoteCandidateId];a&&(a.ip||a.address)?(this.remoteAddress=a.ip||a.address,this.remotePort=Number(a.port)):a&&a.ipAddress?(this.remoteAddress=a.ipAddress,this.remotePort=Number(a.portNumber)):typeof d.googRemoteAddress=="string"&&(a=d.googRemoteAddress.split(":"),this.remoteAddress=a[0],this.remotePort=Number(a[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(n.forEach(d=>{d.type==="transport"&&d.selectedCandidatePairId&&l(s[d.selectedCandidatePairId]),(d.type==="googCandidatePair"&&d.googActiveConnection==="true"||(d.type==="candidatepair"||d.type==="candidate-pair")&&d.selected)&&l(d)}),!f&&(!Object.keys(s).length||Object.keys(o).length)){setTimeout(e,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(u){return this.destroy(A(u,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');let d=this._cb;this._cb=null,d(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};e()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>Ar||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):!e.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(this.destroyed)return;let r=e.data;r instanceof ArrayBuffer&&(r=wu.from(r)),this.push(r)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);let e=this._cb;this._cb=null,e(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach(r=>{this._debug("on track"),this.emit("track",e.track,r),this._remoteTracks.push({track:e.track,stream:r}),!this._remoteStreams.some(n=>n.id===r.id)&&(this._remoteStreams.push(r),Tr(()=>{this._debug("on stream"),this.emit("stream",r)}))})}_debug(){let e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],yu.apply(null,e)}};Z.WEBRTC_SUPPORT=!!Oi();Z.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"};Z.channelConfig={};Li.exports=Z});var Ni=S(()=>{m()});var Pi=S((hc,Ui)=>{m();var vu=ft()("simple-websocket"),Ru=Pe(),Cu=Sr(),Mi=xr(),ze=Ni(),Je=typeof ze!="function"?WebSocket:ze,Di=64*1024,At=class extends Cu.Duplex{constructor(e={}){if(typeof e=="string"&&(e={url:e}),e=Object.assign({allowHalfOpen:!1},e),super(e),e.url==null&&e.socket==null)throw new Error("Missing required `url` or `socket` option");if(e.url!=null&&e.socket!=null)throw new Error("Must specify either `url` or `socket` option, not both");if(this._id=Ru(4).toString("hex").slice(0,7),this._debug("new websocket: %o",e),this.connected=!1,this.destroyed=!1,this._chunk=null,this._cb=null,this._interval=null,e.socket)this.url=e.socket.url,this._ws=e.socket,this.connected=e.socket.readyState===Je.OPEN;else{this.url=e.url;try{typeof ze=="function"?this._ws=new Je(e.url,null,{...e,encoding:void 0}):this._ws=new Je(e.url)}catch(r){Mi(()=>this.destroy(r));return}}this._ws.binaryType="arraybuffer",e.socket&&this.connected?Mi(()=>this._handleOpen()):this._ws.onopen=()=>this._handleOpen(),this._ws.onmessage=r=>this._handleMessage(r),this._ws.onclose=()=>this._handleClose(),this._ws.onerror=r=>this._handleError(r),this._handleFinishBound=()=>this._handleFinish(),this.once("finish",this._handleFinishBound)}send(e){this._ws.send(e)}destroy(e){this._destroy(e,()=>{})}_destroy(e,r){if(!this.destroyed){if(this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this.connected=!1,this.destroyed=!0,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._handleFinishBound&&this.removeListener("finish",this._handleFinishBound),this._handleFinishBound=null,this._ws){let n=this._ws,i=()=>{n.onclose=null};if(n.readyState===Je.CLOSED)i();else try{n.onclose=i,n.close()}catch{i()}n.onopen=null,n.onmessage=null,n.onerror=()=>{}}this._ws=null,e&&this.emit("error",e),this.emit("close"),r()}}_read(){}_write(e,r,n){if(this.destroyed)return n(new Error("cannot write after socket is destroyed"));if(this.connected){try{this.send(e)}catch(i){return this.destroy(i)}typeof ze!="function"&&this._ws.bufferedAmount>Di?(this._debug("start backpressure: bufferedAmount %d",this._ws.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=e,this._cb=n}_handleOpen(){if(!(this.connected||this.destroyed)){if(this.connected=!0,this._chunk){try{this.send(this._chunk)}catch(r){return this.destroy(r)}this._chunk=null,this._debug('sent chunk from "write before connect"');let e=this._cb;this._cb=null,e(null)}typeof ze!="function"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}}_handleMessage(e){if(this.destroyed)return;let r=e.data;r instanceof ArrayBuffer&&(r=C.from(r)),this.push(r)}_handleClose(){this.destroyed||(this._debug("on close"),this.destroy())}_handleError(e){this.destroy(new Error(`Error connecting to ${this.url}`))}_handleFinish(){if(this.destroyed)return;let e=()=>{setTimeout(()=>this.destroy(),1e3)};this.connected?e():this.once("connect",e)}_onInterval(){if(!this._cb||!this._ws||this._ws.bufferedAmount>Di)return;this._debug("ending backpressure: bufferedAmount %d",this._ws.bufferedAmount);let e=this._cb;this._cb=null,e(null)}_debug(){let e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],vu.apply(null,e)}};At.WEBSOCKET_SUPPORT=!!Je;Ui.exports=At});var ji=S(()=>{m()});var qi=S(()=>{m()});var Wi=S(we=>{m();we.DEFAULT_ANNOUNCE_PEERS=50;we.MAX_ANNOUNCE_PEERS=82;we.binaryToHex=t=>(typeof t!="string"&&(t=String(t)),C.from(t,"binary").toString("hex"));we.hexToBinary=t=>(typeof t!="string"&&(t=String(t)),C.from(t,"hex").toString("binary"));we.parseUrl=t=>{let e=new URL(t.replace(/^udp:/,"http:"));return t.match(/^udp:/)&&Object.defineProperties(e,{href:{value:e.href.replace(/^http/,"udp")},protocol:{value:e.protocol.replace(/^http/,"udp")},origin:{value:e.origin.replace(/^http/,"udp")}}),e};var Su=qi();Object.assign(we,Su)});var $i=S((vc,Hi)=>{m();var xu=je(),kr=class extends xu{constructor(e,r){super(),this.client=e,this.announceUrl=r,this.interval=null,this.destroyed=!1}setInterval(e){e==null&&(e=this.DEFAULT_ANNOUNCE_INTERVAL),clearInterval(this.interval),e&&(this.interval=setInterval(()=>{this.announce(this.client._defaultAnnounceOpts())},e),this.interval.unref&&this.interval.unref())}};Hi.exports=kr});var Vi=S((Cc,Yi)=>{m();var Tu=fn(),W=ft()("bittorrent-tracker:websocket-tracker"),Au=Fi(),ku=Pe(),Iu=Pi(),Bu=ji(),se=Wi(),Ou=$i(),ee={},Lu=10*1e3,Fu=60*60*1e3,Nu=5*60*1e3,Mu=50*1e3,Ke=class extends Ou{constructor(e,r){super(e,r),W("new websocket tracker %s",r),this.peers={},this.socket=null,this.reconnecting=!1,this.retries=0,this.reconnectTimer=null,this.expectingResponse=!1,this._openSocket()}announce(e){if(this.destroyed||this.reconnecting)return;if(!this.socket.connected){this.socket.once("connect",()=>{this.announce(e)});return}let r=Object.assign({},e,{action:"announce",info_hash:this.client._infoHashBinary,peer_id:this.client._peerIdBinary});if(this._trackerId&&(r.trackerid=this._trackerId),e.event==="stopped"||e.event==="completed")this._send(r);else{let n=Math.min(e.numwant,5);this._generateOffers(n,i=>{r.numwant=n,r.offers=i,this._send(r)})}}scrape(e){if(this.destroyed||this.reconnecting)return;if(!this.socket.connected){this.socket.once("connect",()=>{this.scrape(e)});return}let n={action:"scrape",info_hash:Array.isArray(e.infoHash)&&e.infoHash.length>0?e.infoHash.map(i=>i.toString("binary")):e.infoHash&&e.infoHash.toString("binary")||this.client._infoHashBinary};this._send(n)}destroy(e=Gi){if(this.destroyed)return e(null);this.destroyed=!0,clearInterval(this.interval),clearTimeout(this.reconnectTimer);for(let o in this.peers){let s=this.peers[o];clearTimeout(s.trackerTimeout),s.destroy()}if(this.peers=null,this.socket&&(this.socket.removeListener("connect",this._onSocketConnectBound),this.socket.removeListener("data",this._onSocketDataBound),this.socket.removeListener("close",this._onSocketCloseBound),this.socket.removeListener("error",this._onSocketErrorBound),this.socket=null),this._onSocketConnectBound=null,this._onSocketErrorBound=null,this._onSocketDataBound=null,this._onSocketCloseBound=null,ee[this.announceUrl]&&(ee[this.announceUrl].consumers-=1),ee[this.announceUrl].consumers>0)return e();let r=ee[this.announceUrl];delete ee[this.announceUrl],r.on("error",Gi),r.once("close",e);let n;if(!this.expectingResponse)return i();n=setTimeout(i,se.DESTROY_TIMEOUT),r.once("data",i);function i(){n&&(clearTimeout(n),n=null),r.removeListener("data",i),r.destroy(),r=null}}_openSocket(){if(this.destroyed=!1,this.peers||(this.peers={}),this._onSocketConnectBound=()=>{this._onSocketConnect()},this._onSocketErrorBound=e=>{this._onSocketError(e)},this._onSocketDataBound=e=>{this._onSocketData(e)},this._onSocketCloseBound=()=>{this._onSocketClose()},this.socket=ee[this.announceUrl],this.socket)ee[this.announceUrl].consumers+=1,this.socket.connected&&this._onSocketConnectBound();else{let e=new URL(this.announceUrl),r;this.client._proxyOpts&&(r=e.protocol==="wss:"?this.client._proxyOpts.httpsAgent:this.client._proxyOpts.httpAgent,!r&&this.client._proxyOpts.socksProxy&&(r=new Bu.Agent(Tu(this.client._proxyOpts.socksProxy),e.protocol==="wss:"))),this.socket=ee[this.announceUrl]=new Iu({url:this.announceUrl,agent:r}),this.socket.consumers=1,this.socket.once("connect",this._onSocketConnectBound)}this.socket.on("data",this._onSocketDataBound),this.socket.once("close",this._onSocketCloseBound),this.socket.once("error",this._onSocketErrorBound)}_onSocketConnect(){this.destroyed||this.reconnecting&&(this.reconnecting=!1,this.retries=0,this.announce(this.client._defaultAnnounceOpts()))}_onSocketData(e){if(!this.destroyed){this.expectingResponse=!1;try{e=JSON.parse(e)}catch{this.client.emit("warning",new Error("Invalid tracker response"));return}e.action==="announce"?this._onAnnounceResponse(e):e.action==="scrape"?this._onScrapeResponse(e):this._onSocketError(new Error(`invalid action in WS response: ${e.action}`))}}_onAnnounceResponse(e){if(e.info_hash!==this.client._infoHashBinary){W("ignoring websocket data from %s for %s (looking for %s: reused socket)",this.announceUrl,se.binaryToHex(e.info_hash),this.client.infoHash);return}if(e.peer_id&&e.peer_id===this.client._peerIdBinary)return;W("received %s from %s for %s",JSON.stringify(e),this.announceUrl,this.client.infoHash);let r=e["failure reason"];if(r)return this.client.emit("warning",new Error(r));let n=e["warning message"];n&&this.client.emit("warning",new Error(n));let i=e.interval||e["min interval"];i&&this.setInterval(i*1e3);let o=e["tracker id"];if(o&&(this._trackerId=o),e.complete!=null){let f=Object.assign({},e,{announce:this.announceUrl,infoHash:se.binaryToHex(e.info_hash)});this.client.emit("update",f)}let s;if(e.offer&&e.peer_id&&(W("creating peer (from remote offer)"),s=this._createPeer(),s.id=se.binaryToHex(e.peer_id),s.once("signal",f=>{let l={action:"announce",info_hash:this.client._infoHashBinary,peer_id:this.client._peerIdBinary,to_peer_id:e.peer_id,answer:f,offer_id:e.offer_id};this._trackerId&&(l.trackerid=this._trackerId),this._send(l)}),this.client.emit("peer",s),s.signal(e.offer)),e.answer&&e.peer_id){let f=se.binaryToHex(e.offer_id);s=this.peers[f],s?(s.id=se.binaryToHex(e.peer_id),this.client.emit("peer",s),s.signal(e.answer),clearTimeout(s.trackerTimeout),s.trackerTimeout=null,delete this.peers[f]):W(`got unexpected answer: ${JSON.stringify(e.answer)}`)}}_onScrapeResponse(e){e=e.files||{};let r=Object.keys(e);if(r.length===0){this.client.emit("warning",new Error("invalid scrape response"));return}r.forEach(n=>{let i=Object.assign(e[n],{announce:this.announceUrl,infoHash:se.binaryToHex(n)});this.client.emit("scrape",i)})}_onSocketClose(){this.destroyed||(this.destroy(),this._startReconnectTimer())}_onSocketError(e){this.destroyed||(this.destroy(),this.client.emit("warning",e),this._startReconnectTimer())}_startReconnectTimer(){let e=Math.floor(Math.random()*Nu)+Math.min(Math.pow(2,this.retries)*Lu,Fu);this.reconnecting=!0,clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout(()=>{this.retries++,this._openSocket()},e),this.reconnectTimer.unref&&this.reconnectTimer.unref(),W("reconnecting socket in %s ms",e)}_send(e){if(this.destroyed)return;this.expectingResponse=!0;let r=JSON.stringify(e);W("send %s",r),this.socket.send(r)}_generateOffers(e,r){let n=this,i=[];W("generating %s offers",e);for(let f=0;f<e;++f)o();s();function o(){let f=ku(20).toString("hex");W("creating peer (from _generateOffers)");let l=n.peers[f]=n._createPeer({initiator:!0});l.once("signal",d=>{i.push({offer:d,offer_id:se.hexToBinary(f)}),s()}),l.trackerTimeout=setTimeout(()=>{W("tracker timeout: destroying peer"),l.trackerTimeout=null,delete n.peers[f],l.destroy()},Mu),l.trackerTimeout.unref&&l.trackerTimeout.unref()}function s(){i.length===e&&(W("generated %s offers",e),r(i))}}_createPeer(e){let r=this;e=Object.assign({trickle:!1,config:r.client._rtcConfig,wrtc:r.client._wrtc},e);let n=new Au(e);return n.once("error",i),n.once("connect",o),n;function i(s){r.client.emit("warning",new Error(`Connection error: ${s.message}`)),n.destroy()}function o(){n.removeListener("error",i),n.removeListener("connect",o)}}};Ke.prototype.DEFAULT_ANNOUNCE_INTERVAL=30*1e3;Ke._socketPool=ee;function Gi(){}Yi.exports=Ke});var Br=S((Xe,Ir)=>{m();(function(e,r){typeof Xe=="object"&&typeof Ir=="object"?Ir.exports=r():typeof define=="function"&&define.amd?define([],r):typeof Xe=="object"?Xe.Rusha=r():e.Rusha=r()})(typeof self<"u"?self:Xe,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(n,i,o){r.o(n,i)||Object.defineProperty(n,i,{configurable:!1,enumerable:!0,get:o})},r.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(i,"a",i),i},r.o=function(n,i){return Object.prototype.hasOwnProperty.call(n,i)},r.p="",r(r.s=3)}([function(t,e,r){function n(h,_){if(!(h instanceof _))throw new TypeError("Cannot call a class as a function")}var i=r(5),o=r(1),s=o.toHex,f=o.ceilHeapSize,l=r(6),d=function(h){for(h+=9;h%64>0;h+=1);return h},u=function(h,_){var p=new Uint8Array(h.buffer),E=_%4,w=_-E;switch(E){case 0:p[w+3]=0;case 1:p[w+2]=0;case 2:p[w+1]=0;case 3:p[w+0]=0}for(var b=(_>>2)+1;b<h.length;b++)h[b]=0},a=function(h,_,p){h[_>>2]|=128<<24-(_%4<<3),h[((_>>2)+2&-16)+14]=p/(1<<29)|0,h[((_>>2)+2&-16)+15]=p<<3},c=function(h,_){var p=new Int32Array(h,_+320,5),E=new Int32Array(5),w=new DataView(E.buffer);return w.setInt32(0,p[0],!1),w.setInt32(4,p[1],!1),w.setInt32(8,p[2],!1),w.setInt32(12,p[3],!1),w.setInt32(16,p[4],!1),E},y=function(){function h(_){if(n(this,h),_=_||64*1024,_%64>0)throw new Error("Chunk size must be a multiple of 128 bit");this._offset=0,this._maxChunkLen=_,this._padMaxChunkLen=d(_),this._heap=new ArrayBuffer(f(this._padMaxChunkLen+320+20)),this._h32=new Int32Array(this._heap),this._h8=new Int8Array(this._heap),this._core=new i({Int32Array},{},this._heap)}return h.prototype._initState=function(p,E){this._offset=0;var w=new Int32Array(p,E+320,5);w[0]=1732584193,w[1]=-271733879,w[2]=-1732584194,w[3]=271733878,w[4]=-1009589776},h.prototype._padChunk=function(p,E){var w=d(p),b=new Int32Array(this._heap,0,w>>2);return u(b,p),a(b,p,E),w},h.prototype._write=function(p,E,w,b){l(p,this._h8,this._h32,E,w,b||0)},h.prototype._coreCall=function(p,E,w,b,R){var x=w;this._write(p,E,w),R&&(x=this._padChunk(w,b)),this._core.hash(x,this._padMaxChunkLen)},h.prototype.rawDigest=function(p){var E=p.byteLength||p.length||p.size||0;this._initState(this._heap,this._padMaxChunkLen);var w=0,b=this._maxChunkLen;for(w=0;E>w+b;w+=b)this._coreCall(p,w,b,E,!1);return this._coreCall(p,w,E-w,E,!0),c(this._heap,this._padMaxChunkLen)},h.prototype.digest=function(p){return s(this.rawDigest(p).buffer)},h.prototype.digestFromString=function(p){return this.digest(p)},h.prototype.digestFromBuffer=function(p){return this.digest(p)},h.prototype.digestFromArrayBuffer=function(p){return this.digest(p)},h.prototype.resetState=function(){return this._initState(this._heap,this._padMaxChunkLen),this},h.prototype.append=function(p){var E=0,w=p.byteLength||p.length||p.size||0,b=this._offset%this._maxChunkLen,R=void 0;for(this._offset+=w;E<w;)R=Math.min(w-E,this._maxChunkLen-b),this._write(p,E,R,b),b+=R,E+=R,b===this._maxChunkLen&&(this._core.hash(this._maxChunkLen,this._padMaxChunkLen),b=0);return this},h.prototype.getState=function(){var p=this._offset%this._maxChunkLen,E=void 0;if(p)E=this._heap.slice(0);else{var w=new Int32Array(this._heap,this._padMaxChunkLen+320,5);E=w.buffer.slice(w.byteOffset,w.byteOffset+w.byteLength)}return{offset:this._offset,heap:E}},h.prototype.setState=function(p){if(this._offset=p.offset,p.heap.byteLength===20){var E=new Int32Array(this._heap,this._padMaxChunkLen+320,5);E.set(new Int32Array(p.heap))}else this._h32.set(new Int32Array(p.heap));return this},h.prototype.rawEnd=function(){var p=this._offset,E=p%this._maxChunkLen,w=this._padChunk(E,p);this._core.hash(w,this._padMaxChunkLen);var b=c(this._heap,this._padMaxChunkLen);return this._initState(this._heap,this._padMaxChunkLen),b},h.prototype.end=function(){return s(this.rawEnd().buffer)},h}();t.exports=y,t.exports._core=i},function(t,e){for(var r=new Array(256),n=0;n<256;n++)r[n]=(n<16?"0":"")+n.toString(16);t.exports.toHex=function(i){for(var o=new Uint8Array(i),s=new Array(i.byteLength),f=0;f<s.length;f++)s[f]=r[o[f]];return s.join("")},t.exports.ceilHeapSize=function(i){var o=0;if(i<=65536)return 65536;if(i<16777216)for(o=1;o<i;o=o<<1);else for(o=16777216;o<i;o+=16777216);return o},t.exports.isDedicatedWorkerScope=function(i){var o="WorkerGlobalScope"in i&&i instanceof i.WorkerGlobalScope,s="SharedWorkerGlobalScope"in i&&i instanceof i.SharedWorkerGlobalScope,f="ServiceWorkerGlobalScope"in i&&i instanceof i.ServiceWorkerGlobalScope;return o&&!s&&!f}},function(t,e,r){t.exports=function(){var n=r(0),i=function(f,l,d){try{return d(null,f.digest(l))}catch(u){return d(u)}},o=function(f,l,d,u,a){var c=new self.FileReader;c.onloadend=function(){if(c.error)return a(c.error);var h=c.result;l+=c.result.byteLength;try{f.append(h)}catch(_){a(_);return}l<u.size?o(f,l,d,u,a):a(null,f.end())},c.readAsArrayBuffer(u.slice(l,l+d))},s=!0;return self.onmessage=function(f){if(!!s){var l=f.data.data,d=f.data.file,u=f.data.id;if(!(typeof u>"u")&&!(!d&&!l)){var a=f.data.blockSize||4*1024*1024,c=new n(a);c.resetState();var y=function(h,_){h?self.postMessage({id:u,error:h.name}):self.postMessage({id:u,hash:_})};l&&i(c,l,y),d&&o(c,0,a,d,y)}}},function(){s=!1}}},function(t,e,r){var n=r(4),i=r(0),o=r(7),s=r(2),f=r(1),l=f.isDedicatedWorkerScope,d=typeof self<"u"&&l(self);i.disableWorkerBehaviour=d?s():function(){},i.createWorker=function(){var u=n(2),a=u.terminate;return u.terminate=function(){URL.revokeObjectURL(u.objectURL),a.call(u)},u},i.createHash=o,t.exports=i},function(t,e,r){function n(u){var a={};function c(h){if(a[h])return a[h].exports;var _=a[h]={i:h,l:!1,exports:{}};return u[h].call(_.exports,_,_.exports,c),_.l=!0,_.exports}c.m=u,c.c=a,c.i=function(h){return h},c.d=function(h,_,p){c.o(h,_)||Object.defineProperty(h,_,{configurable:!1,enumerable:!0,get:p})},c.r=function(h){Object.defineProperty(h,"__esModule",{value:!0})},c.n=function(h){var _=h&&h.__esModule?function(){return h.default}:function(){return h};return c.d(_,"a",_),_},c.o=function(h,_){return Object.prototype.hasOwnProperty.call(h,_)},c.p="/",c.oe=function(h){throw console.error(h),h};var y=c(c.s=ENTRY_MODULE);return y.default||y}var i="[\\.|\\-|\\+|\\w|/|@]+",o="\\((/\\*.*?\\*/)?s?.*?("+i+").*?\\)";function s(u){return(u+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function f(u,a,c){var y={};y[c]=[];var h=a.toString(),_=h.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!_)return y;for(var p=_[1],E=new RegExp("(\\\\n|\\W)"+s(p)+o,"g"),w;w=E.exec(h);)w[3]!=="dll-reference"&&y[c].push(w[3]);for(E=new RegExp("\\("+s(p)+'\\("(dll-reference\\s('+i+'))"\\)\\)'+o,"g");w=E.exec(h);)u[w[2]]||(y[c].push(w[1]),u[w[2]]=r(w[1]).m),y[w[2]]=y[w[2]]||[],y[w[2]].push(w[4]);return y}function l(u){var a=Object.keys(u);return a.reduce(function(c,y){return c||u[y].length>0},!1)}function d(u,a){for(var c={main:[a]},y={main:[]},h={main:{}};l(c);)for(var _=Object.keys(c),p=0;p<_.length;p++){var E=_[p],w=c[E],b=w.pop();if(h[E]=h[E]||{},!(h[E][b]||!u[E][b])){h[E][b]=!0,y[E]=y[E]||[],y[E].push(b);for(var R=f(u,u[E][b],E),x=Object.keys(R),I=0;I<x.length;I++)c[x[I]]=c[x[I]]||[],c[x[I]]=c[x[I]].concat(R[x[I]])}}return y}t.exports=function(u,a){a=a||{};var c={main:r.m},y=a.all?{main:Object.keys(c)}:d(c,u),h="";Object.keys(y).filter(function(b){return b!=="main"}).forEach(function(b){for(var R=0;y[b][R];)R++;y[b].push(R),c[b][R]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",h=h+"var "+b+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(R))+")({"+y[b].map(function(x){return""+JSON.stringify(x)+": "+c[b][x].toString()}).join(",")+`});
`}),h=h+"("+n.toString().replace("ENTRY_MODULE",JSON.stringify(u))+")({"+y.main.map(function(b){return""+JSON.stringify(b)+": "+c.main[b].toString()}).join(",")+"})(self);";var _=new window.Blob([h],{type:"text/javascript"});if(a.bare)return _;var p=window.URL||window.webkitURL||window.mozURL||window.msURL,E=p.createObjectURL(_),w=new window.Worker(E);return w.objectURL=E,w}},function(t,e){t.exports=function(n,i,o){var s=new n.Int32Array(o);function f(l,d){l=l|0,d=d|0;var u=0,a=0,c=0,y=0,h=0,_=0,p=0,E=0,w=0,b=0,R=0,x=0,I=0,F=0;for(c=s[d+320>>2]|0,h=s[d+324>>2]|0,p=s[d+328>>2]|0,w=s[d+332>>2]|0,R=s[d+336>>2]|0,u=0;(u|0)<(l|0);u=u+64|0){for(y=c,_=h,E=p,b=w,x=R,a=0;(a|0)<64;a=a+4|0)F=s[u+a>>2]|0,I=((c<<5|c>>>27)+(h&p|~h&w)|0)+((F+R|0)+1518500249|0)|0,R=w,w=p,p=h<<30|h>>>2,h=c,c=I,s[l+a>>2]=F;for(a=l+64|0;(a|0)<(l+80|0);a=a+4|0)F=(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])<<1|(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])>>>31,I=((c<<5|c>>>27)+(h&p|~h&w)|0)+((F+R|0)+1518500249|0)|0,R=w,w=p,p=h<<30|h>>>2,h=c,c=I,s[a>>2]=F;for(a=l+80|0;(a|0)<(l+160|0);a=a+4|0)F=(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])<<1|(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])>>>31,I=((c<<5|c>>>27)+(h^p^w)|0)+((F+R|0)+1859775393|0)|0,R=w,w=p,p=h<<30|h>>>2,h=c,c=I,s[a>>2]=F;for(a=l+160|0;(a|0)<(l+240|0);a=a+4|0)F=(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])<<1|(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])>>>31,I=((c<<5|c>>>27)+(h&p|h&w|p&w)|0)+((F+R|0)-1894007588|0)|0,R=w,w=p,p=h<<30|h>>>2,h=c,c=I,s[a>>2]=F;for(a=l+240|0;(a|0)<(l+320|0);a=a+4|0)F=(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])<<1|(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])>>>31,I=((c<<5|c>>>27)+(h^p^w)|0)+((F+R|0)-899497514|0)|0,R=w,w=p,p=h<<30|h>>>2,h=c,c=I,s[a>>2]=F;c=c+y|0,h=h+_|0,p=p+E|0,w=w+b|0,R=R+x|0}s[d+320>>2]=c,s[d+324>>2]=h,s[d+328>>2]=p,s[d+332>>2]=w,s[d+336>>2]=R}return{hash:f}}},function(t,e){var r=this,n=void 0;typeof self<"u"&&typeof self.FileReaderSync<"u"&&(n=new self.FileReaderSync);var i=function(f,l,d,u,a,c){var y=void 0,h=c%4,_=(a+h)%4,p=a-_;switch(h){case 0:l[c]=f.charCodeAt(u+3);case 1:l[c+1-(h<<1)|0]=f.charCodeAt(u+2);case 2:l[c+2-(h<<1)|0]=f.charCodeAt(u+1);case 3:l[c+3-(h<<1)|0]=f.charCodeAt(u)}if(!(a<_+(4-h))){for(y=4-h;y<p;y=y+4|0)d[c+y>>2]=f.charCodeAt(u+y)<<24|f.charCodeAt(u+y+1)<<16|f.charCodeAt(u+y+2)<<8|f.charCodeAt(u+y+3);switch(_){case 3:l[c+p+1|0]=f.charCodeAt(u+p+2);case 2:l[c+p+2|0]=f.charCodeAt(u+p+1);case 1:l[c+p+3|0]=f.charCodeAt(u+p)}}},o=function(f,l,d,u,a,c){var y=void 0,h=c%4,_=(a+h)%4,p=a-_;switch(h){case 0:l[c]=f[u+3];case 1:l[c+1-(h<<1)|0]=f[u+2];case 2:l[c+2-(h<<1)|0]=f[u+1];case 3:l[c+3-(h<<1)|0]=f[u]}if(!(a<_+(4-h))){for(y=4-h;y<p;y=y+4|0)d[c+y>>2|0]=f[u+y]<<24|f[u+y+1]<<16|f[u+y+2]<<8|f[u+y+3];switch(_){case 3:l[c+p+1|0]=f[u+p+2];case 2:l[c+p+2|0]=f[u+p+1];case 1:l[c+p+3|0]=f[u+p]}}},s=function(f,l,d,u,a,c){var y=void 0,h=c%4,_=(a+h)%4,p=a-_,E=new Uint8Array(n.readAsArrayBuffer(f.slice(u,u+a)));switch(h){case 0:l[c]=E[3];case 1:l[c+1-(h<<1)|0]=E[2];case 2:l[c+2-(h<<1)|0]=E[1];case 3:l[c+3-(h<<1)|0]=E[0]}if(!(a<_+(4-h))){for(y=4-h;y<p;y=y+4|0)d[c+y>>2|0]=E[y]<<24|E[y+1]<<16|E[y+2]<<8|E[y+3];switch(_){case 3:l[c+p+1|0]=E[p+2];case 2:l[c+p+2|0]=E[p+1];case 1:l[c+p+3|0]=E[p]}}};t.exports=function(f,l,d,u,a,c){if(typeof f=="string")return i(f,l,d,u,a,c);if(f instanceof Array||r&&r.Buffer&&r.Buffer.isBuffer(f))return o(f,l,d,u,a,c);if(f instanceof ArrayBuffer)return o(new Uint8Array(f),l,d,u,a,c);if(f.buffer instanceof ArrayBuffer)return o(new Uint8Array(f.buffer,f.byteOffset,f.byteLength),l,d,u,a,c);if(f instanceof Blob)return s(f,l,d,u,a,c);throw new Error("Unsupported data type.")}},function(t,e,r){var n=function(){function d(u,a){for(var c=0;c<a.length;c++){var y=a[c];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(u,y.key,y)}}return function(u,a,c){return a&&d(u.prototype,a),c&&d(u,c),u}}();function i(d,u){if(!(d instanceof u))throw new TypeError("Cannot call a class as a function")}var o=r(0),s=r(1),f=s.toHex,l=function(){function d(){i(this,d),this._rusha=new o,this._rusha.resetState()}return d.prototype.update=function(a){return this._rusha.append(a),this},d.prototype.digest=function(a){var c=this._rusha.rawEnd().buffer;if(!a)return c;if(a==="hex")return f(c);throw new Error("unsupported digest encoding")},n(d,[{key:"state",get:function(){return this._rusha.getState()},set:function(u){this._rusha.setState(u)}}]),d}();t.exports=function(){return new l}}])})});var zi=S((Tc,Ji)=>{m();var Du=Br(),Bt,kt,It;function Uu(){Bt=Du.createWorker(),kt=1,It={},Bt.onmessage=function(e){let r=e.data.id,n=It[r];delete It[r],e.data.error!=null?n(new Error("Rusha worker error: "+e.data.error)):n(null,e.data.hash)}}function Pu(t,e){Bt||Uu(),It[kt]=e,Bt.postMessage({id:kt,data:t}),kt+=1}Ji.exports=Pu});var Qi=S((kc,Or)=>{m();var ju=Br(),qu=zi(),Wu=new ju,Ki=typeof window<"u"?window:self,Xi=Ki.crypto||Ki.msCrypto||{},Qe=Xi.subtle||Xi.webkitSubtle;function Ot(t){return Wu.digest(t)}try{Qe.digest({name:"sha-1"},new Uint8Array).catch(function(){Qe=!1})}catch{Qe=!1}function Hu(t,e){if(!Qe){typeof window<"u"?qu(t,function(n,i){if(n){e(Ot(t));return}e(i)}):queueMicrotask(()=>e(Ot(t)));return}typeof t=="string"&&(t=$u(t)),Qe.digest({name:"sha-1"},t).then(function(n){e(Gu(new Uint8Array(n)))},function(){e(Ot(t))})}function $u(t){let e=t.length,r=new Uint8Array(e);for(let n=0;n<e;n++)r[n]=t.charCodeAt(n);return r}function Gu(t){let e=t.length,r=[];for(let n=0;n<e;n++){let i=t[n];r.push((i>>>4).toString(16)),r.push((i&15).toString(16))}return r.join("")}Or.exports=Hu;Or.exports.sync=Ot});m();var Lr=tt(Vi()),ro=tt(Pe()),no=tt(je()),io=tt(Qi()),Zi="^",eo=16e3,to=class extends no.default{announce=[];trackers={};peers={};responseWaiting={};msgChunks={};_identifier="";infoHash;_infoHashBuffer;_infoHashBinary;_peerIdBuffer=(0,ro.default)(20);_peerId=this._peerIdBuffer.toString("hex");_peerIdBinary=this._peerIdBuffer.toString("binary");set identifier(e){this._identifier=e,this.infoHash=io.default.sync(e).toLowerCase(),this._infoHashBuffer=C.from(this.infoHash,"hex"),this._infoHashBinary=this._infoHashBuffer.toString("binary")}constructor(e,r){super(),this.announce=e||this.announce,this.identifier=r||this.identifier}start(){this.on("peer",e=>{let r=!1;this.peers[e.id]||(r=!0,this.peers[e.id]={},this.responseWaiting[e.id]={}),e.on("connect",()=>{this.peers[e.id][e.channelName]=e,r&&this.emit("peerconnect",e)}),e.on("data",n=>{if(this.emit("data",e,n),n=n.toString(),n[0]===Zi)try{n=JSON.parse(n.slice(1)),e.respond=this._peerRespond(e,n.id);let i=this._chunkHandler(n);i!==!1&&(n.o&&(i=JSON.parse(i)),this.responseWaiting[e.id][n.id]?(this.responseWaiting[e.id][n.id]([e,i]),delete this.responseWaiting[e.id][n.id]):this.emit("msg",e,i),this._destroyChunks(n.id))}catch(i){console.error(i)}}),e.on("error",n=>{this._removePeer(e),console.warn("Error in connection to peer:",n)}),e.on("close",()=>{this._removePeer(e),console.log(`Connection to ${e.id} closed.`)})}),this.on("update",e=>{let r=this.trackers[this.announce.indexOf(e.announce)];this.emit("trackerconnect",r,this.getTrackerStats())}),this.on("warning",e=>{this.emit("trackerwarning",e,this.getTrackerStats())}),this._fetchPeers()}addTracker(e){if(this.announce.indexOf(e)!==-1)throw new Error("Tracker already added.");let r=this.announce.push(e);this.trackers[r]=new Lr.default(this,e),this.trackers[r].announce(this._defaultAnnounceOpts())}removeTracker(e){let r=this.announce.indexOf(e);if(r===-1)throw new Error("Tracker does not exist");this.trackers[r].peers=[],this.trackers[r].destroy(),delete this.trackers[r],delete this.announce[r]}_removePeer(e){if(!this.peers[e.id])return!1;delete this.peers[e.id][e.channelName],Object.keys(this.peers[e.id]).length===0&&(this.emit("peerclose",e),delete this.responseWaiting[e.id],delete this.peers[e.id])}send(e,r,n=""){return new Promise((i,o)=>{let s={id:n||String(Math.floor(Math.random()*1e5+1e5)),msg:typeof r=="object"?JSON.stringify(r):r,o:typeof r=="object"?1:null};try{if(!e.connected){for(let d in this.peers[e.id])if(e=this.peers[e.id][d],e.connected)break}this.responseWaiting[e.id]||(this.responseWaiting[e.id]={}),this.responseWaiting[e.id][s.id]=i}catch(d){return o(Error("Connection to peer closed"+d))}let f=0,l="";for(;s.msg.length>0;)s.c=f,l=s.msg.slice(eo),s.msg=s.msg.slice(0,eo),l||(s.last=!0),e.send(Zi+JSON.stringify(s)),s.msg=l,f++})}requestMorePeers(){return new Promise(e=>{for(let r in this.trackers)this.trackers[r].announce(this._defaultAnnounceOpts());e(this.peers)})}getTrackerStats(){let e=0;for(let r in this.trackers)this.trackers[r].socket&&this.trackers[r].socket.connect&&e++;return{connected:e,total:this.announce.length}}destroy(){for(let e in this.peers)for(let r in this.peers[e])this.peers[e][r].destroy();Object.keys(this.trackers).forEach(e=>this.trackers[e].destroy())}_peerRespond(e,r){return n=>this.send(e,n,r)}_chunkHandler(e){return this.msgChunks[e.id]||(this.msgChunks[e.id]=[]),this.msgChunks[e.id][e.c]=e.msg,e.last?this.msgChunks[e.id].join(""):!1}_destroyChunks(e){delete this.msgChunks[e]}_defaultAnnounceOpts(e={}){return e.numwant==null&&(e.numwant=50),e.uploaded==null&&(e.uploaded=0),e.downloaded==null&&(e.downloaded=0),e}_fetchPeers(){for(let e in this.announce)this.trackers[e]=new Lr.default(this,this.announce[e]),this.trackers[e].announce(this._defaultAnnounceOpts())}};export{to as P2PT};
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! simple-websocket. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
