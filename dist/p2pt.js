(()=>{var Ji=Object.create;var Fr=Object.defineProperty;var Ki=Object.getOwnPropertyDescriptor;var Xi=Object.getOwnPropertyNames;var Zi=Object.getPrototypeOf,Qi=Object.prototype.hasOwnProperty;var eo=(r,e)=>()=>(r&&(e=r(r=0)),e);var v=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var to=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Xi(e))!Qi.call(r,i)&&i!==t&&Fr(r,i,{get:()=>e[i],enumerable:!(n=Ki(e,i))||n.enumerable});return r};var Je=(r,e,t)=>(t=r!=null?Ji(Zi(r)):{},to(e||!r||!r.__esModule?Fr(t,"default",{value:r,enumerable:!0}):t,r));var Or=v(Ke=>{"use strict";w();Ke.byteLength=no;Ke.toByteArray=oo;Ke.fromByteArray=uo;var H=[],U=[],ro=typeof Uint8Array<"u"?Uint8Array:Array,Rt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(ae=0,Ir=Rt.length;ae<Ir;++ae)H[ae]=Rt[ae],U[Rt.charCodeAt(ae)]=ae;var ae,Ir;U["-".charCodeAt(0)]=62;U["_".charCodeAt(0)]=63;function Br(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function no(r){var e=Br(r),t=e[0],n=e[1];return(t+n)*3/4-n}function io(r,e,t){return(e+t)*3/4-t}function oo(r){var e,t=Br(r),n=t[0],i=t[1],o=new ro(io(r,n,i)),s=0,f=i>0?n-4:n,l;for(l=0;l<f;l+=4)e=U[r.charCodeAt(l)]<<18|U[r.charCodeAt(l+1)]<<12|U[r.charCodeAt(l+2)]<<6|U[r.charCodeAt(l+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=U[r.charCodeAt(l)]<<2|U[r.charCodeAt(l+1)]>>4,o[s++]=e&255),i===1&&(e=U[r.charCodeAt(l)]<<10|U[r.charCodeAt(l+1)]<<4|U[r.charCodeAt(l+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function so(r){return H[r>>18&63]+H[r>>12&63]+H[r>>6&63]+H[r&63]}function ao(r,e,t){for(var n,i=[],o=e;o<t;o+=3)n=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),i.push(so(n));return i.join("")}function uo(r){for(var e,t=r.length,n=t%3,i=[],o=16383,s=0,f=t-n;s<f;s+=o)i.push(ao(r,s,s+o>f?f:s+o));return n===1?(e=r[t-1],i.push(H[e>>2]+H[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(H[e>>10]+H[e>>4&63]+H[e<<2&63]+"=")),i.join("")}});var Lr=v(St=>{w();St.read=function(r,e,t,n,i){var o,s,f=i*8-n-1,l=(1<<f)-1,d=l>>1,u=-7,a=t?i-1:0,c=t?-1:1,y=r[e+a];for(a+=c,o=y&(1<<-u)-1,y>>=-u,u+=f;u>0;o=o*256+r[e+a],a+=c,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=n;u>0;s=s*256+r[e+a],a+=c,u-=8);if(o===0)o=1-d;else{if(o===l)return s?NaN:(y?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-d}return(y?-1:1)*s*Math.pow(2,o-n)};St.write=function(r,e,t,n,i,o){var s,f,l,d=o*8-i-1,u=(1<<d)-1,a=u>>1,c=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=n?0:o-1,h=n?1:-1,_=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(f=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+a>=1?e+=c/l:e+=c*Math.pow(2,1-a),e*l>=2&&(s++,l/=2),s+a>=u?(f=0,s=u):s+a>=1?(f=(e*l-1)*Math.pow(2,i),s=s+a):(f=e*Math.pow(2,a-1)*Math.pow(2,i),s=0));i>=8;r[t+y]=f&255,y+=h,f/=256,i-=8);for(s=s<<i|f,d+=i;d>0;r[t+y]=s&255,y+=h,s/=256,d-=8);r[t+y-h]|=_*128}});var fe=v(Ee=>{"use strict";w();var xt=Or(),me=Lr(),Mr=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Ee.Buffer=g;Ee.SlowBuffer=go;Ee.INSPECT_MAX_BYTES=50;var Xe=2147483647;Ee.kMaxLength=Xe;g.TYPED_ARRAY_SUPPORT=fo();!g.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function fo(){try{let r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(g.prototype,"parent",{enumerable:!0,get:function(){if(!!g.isBuffer(this))return this.buffer}});Object.defineProperty(g.prototype,"offset",{enumerable:!0,get:function(){if(!!g.isBuffer(this))return this.byteOffset}});function J(r){if(r>Xe)throw new RangeError('The value "'+r+'" is invalid for option "size"');let e=new Uint8Array(r);return Object.setPrototypeOf(e,g.prototype),e}function g(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Ft(r)}return Pr(r,e,t)}g.poolSize=8192;function Pr(r,e,t){if(typeof r=="string")return lo(r,e);if(ArrayBuffer.isView(r))return ho(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if($(r,ArrayBuffer)||r&&$(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&($(r,SharedArrayBuffer)||r&&$(r.buffer,SharedArrayBuffer)))return At(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return g.from(n,e,t);let i=po(r);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return g.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}g.from=function(r,e,t){return Pr(r,e,t)};Object.setPrototypeOf(g.prototype,Uint8Array.prototype);Object.setPrototypeOf(g,Uint8Array);function qr(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function co(r,e,t){return qr(r),r<=0?J(r):e!==void 0?typeof t=="string"?J(r).fill(e,t):J(r).fill(e):J(r)}g.alloc=function(r,e,t){return co(r,e,t)};function Ft(r){return qr(r),J(r<0?0:It(r)|0)}g.allocUnsafe=function(r){return Ft(r)};g.allocUnsafeSlow=function(r){return Ft(r)};function lo(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!g.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=jr(r,e)|0,n=J(t),i=n.write(r,e);return i!==t&&(n=n.slice(0,i)),n}function Tt(r){let e=r.length<0?0:It(r.length)|0,t=J(e);for(let n=0;n<e;n+=1)t[n]=r[n]&255;return t}function ho(r){if($(r,Uint8Array)){let e=new Uint8Array(r);return At(e.buffer,e.byteOffset,e.byteLength)}return Tt(r)}function At(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,g.prototype),n}function po(r){if(g.isBuffer(r)){let e=It(r.length)|0,t=J(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||Ot(r.length)?J(0):Tt(r);if(r.type==="Buffer"&&Array.isArray(r.data))return Tt(r.data)}function It(r){if(r>=Xe)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Xe.toString(16)+" bytes");return r|0}function go(r){return+r!=r&&(r=0),g.alloc(+r)}g.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==g.prototype};g.compare=function(e,t){if($(e,Uint8Array)&&(e=g.from(e,e.offset,e.byteLength)),$(t,Uint8Array)&&(t=g.from(t,t.offset,t.byteLength)),!g.isBuffer(e)||!g.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0};g.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};g.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return g.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let i=g.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){let s=e[n];if($(s,Uint8Array))o+s.length>i.length?(g.isBuffer(s)||(s=g.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(g.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function jr(r,e){if(g.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||$(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return kt(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return Kr(r).length;default:if(i)return n?-1:kt(r).length;e=(""+e).toLowerCase(),i=!0}}g.byteLength=jr;function yo(r,e,t){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return xo(this,e,t);case"utf8":case"utf-8":return Hr(this,e,t);case"ascii":return Ro(this,e,t);case"latin1":case"binary":return So(this,e,t);case"base64":return Co(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return To(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}g.prototype._isBuffer=!0;function ue(r,e,t){let n=r[e];r[e]=r[t],r[t]=n}g.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)ue(this,t,t+1);return this};g.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)ue(this,t,t+3),ue(this,t+1,t+2);return this};g.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)ue(this,t,t+7),ue(this,t+1,t+6),ue(this,t+2,t+5),ue(this,t+3,t+4);return this};g.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?Hr(this,0,e):yo.apply(this,arguments)};g.prototype.toLocaleString=g.prototype.toString;g.prototype.equals=function(e){if(!g.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:g.compare(this,e)===0};g.prototype.inspect=function(){let e="",t=Ee.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};Mr&&(g.prototype[Mr]=g.prototype.inspect);g.prototype.compare=function(e,t,n,i,o){if($(e,Uint8Array)&&(e=g.from(e,e.offset,e.byteLength)),!g.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;let s=o-i,f=n-t,l=Math.min(s,f),d=this.slice(i,o),u=e.slice(t,n);for(let a=0;a<l;++a)if(d[a]!==u[a]){s=d[a],f=u[a];break}return s<f?-1:f<s?1:0};function Wr(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,Ot(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=g.from(e,n)),g.isBuffer(e))return e.length===0?-1:Nr(r,e,t,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):Nr(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function Nr(r,e,t,n,i){let o=1,s=r.length,f=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,s/=2,f/=2,t/=2}function l(u,a){return o===1?u[a]:u.readUInt16BE(a*o)}let d;if(i){let u=-1;for(d=t;d<s;d++)if(l(r,d)===l(e,u===-1?0:d-u)){if(u===-1&&(u=d),d-u+1===f)return u*o}else u!==-1&&(d-=d-u),u=-1}else for(t+f>s&&(t=s-f),d=t;d>=0;d--){let u=!0;for(let a=0;a<f;a++)if(l(r,d+a)!==l(e,a)){u=!1;break}if(u)return d}return-1}g.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};g.prototype.indexOf=function(e,t,n){return Wr(this,e,t,n,!0)};g.prototype.lastIndexOf=function(e,t,n){return Wr(this,e,t,n,!1)};function _o(r,e,t,n){t=Number(t)||0;let i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;let o=e.length;n>o/2&&(n=o/2);let s;for(s=0;s<n;++s){let f=parseInt(e.substr(s*2,2),16);if(Ot(f))return s;r[t+s]=f}return s}function wo(r,e,t,n){return Ze(kt(e,r.length-t),r,t,n)}function mo(r,e,t,n){return Ze(Io(e),r,t,n)}function bo(r,e,t,n){return Ze(Kr(e),r,t,n)}function Eo(r,e,t,n){return Ze(Bo(e,r.length-t),r,t,n)}g.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-t;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return _o(this,e,t,n);case"utf8":case"utf-8":return wo(this,e,t,n);case"ascii":case"latin1":case"binary":return mo(this,e,t,n);case"base64":return bo(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Eo(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Co(r,e,t){return e===0&&t===r.length?xt.fromByteArray(r):xt.fromByteArray(r.slice(e,t))}function Hr(r,e,t){t=Math.min(r.length,t);let n=[],i=e;for(;i<t;){let o=r[i],s=null,f=o>239?4:o>223?3:o>191?2:1;if(i+f<=t){let l,d,u,a;switch(f){case 1:o<128&&(s=o);break;case 2:l=r[i+1],(l&192)===128&&(a=(o&31)<<6|l&63,a>127&&(s=a));break;case 3:l=r[i+1],d=r[i+2],(l&192)===128&&(d&192)===128&&(a=(o&15)<<12|(l&63)<<6|d&63,a>2047&&(a<55296||a>57343)&&(s=a));break;case 4:l=r[i+1],d=r[i+2],u=r[i+3],(l&192)===128&&(d&192)===128&&(u&192)===128&&(a=(o&15)<<18|(l&63)<<12|(d&63)<<6|u&63,a>65535&&a<1114112&&(s=a))}}s===null?(s=65533,f=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=f}return vo(n)}var Dr=4096;function vo(r){let e=r.length;if(e<=Dr)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=Dr));return t}function Ro(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function So(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function xo(r,e,t){let n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);let i="";for(let o=e;o<t;++o)i+=Oo[r[o]];return i}function To(r,e,t){let n=r.slice(e,t),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}g.prototype.slice=function(e,t){let n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,g.prototype),i};function L(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}g.prototype.readUintLE=g.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||L(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return i};g.prototype.readUintBE=g.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||L(e,t,this.length);let i=this[e+--t],o=1;for(;t>0&&(o*=256);)i+=this[e+--t]*o;return i};g.prototype.readUint8=g.prototype.readUInt8=function(e,t){return e=e>>>0,t||L(e,1,this.length),this[e]};g.prototype.readUint16LE=g.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||L(e,2,this.length),this[e]|this[e+1]<<8};g.prototype.readUint16BE=g.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||L(e,2,this.length),this[e]<<8|this[e+1]};g.prototype.readUint32LE=g.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};g.prototype.readUint32BE=g.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||L(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};g.prototype.readBigUInt64LE=te(function(e){e=e>>>0,be(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Le(e,this.length-8);let i=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});g.prototype.readBigUInt64BE=te(function(e){e=e>>>0,be(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Le(e,this.length-8);let i=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});g.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||L(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i};g.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||L(e,t,this.length);let i=t,o=1,s=this[e+--i];for(;i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*t)),s};g.prototype.readInt8=function(e,t){return e=e>>>0,t||L(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};g.prototype.readInt16LE=function(e,t){e=e>>>0,t||L(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};g.prototype.readInt16BE=function(e,t){e=e>>>0,t||L(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};g.prototype.readInt32LE=function(e,t){return e=e>>>0,t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};g.prototype.readInt32BE=function(e,t){return e=e>>>0,t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};g.prototype.readBigInt64LE=te(function(e){e=e>>>0,be(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Le(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});g.prototype.readBigInt64BE=te(function(e){e=e>>>0,be(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Le(e,this.length-8);let i=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});g.prototype.readFloatLE=function(e,t){return e=e>>>0,t||L(e,4,this.length),me.read(this,e,!0,23,4)};g.prototype.readFloatBE=function(e,t){return e=e>>>0,t||L(e,4,this.length),me.read(this,e,!1,23,4)};g.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||L(e,8,this.length),me.read(this,e,!0,52,8)};g.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||L(e,8,this.length),me.read(this,e,!1,52,8)};function N(r,e,t,n,i,o){if(!g.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}g.prototype.writeUintLE=g.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let f=Math.pow(2,8*n)-1;N(this,e,t,n,f,0)}let o=1,s=0;for(this[t]=e&255;++s<n&&(o*=256);)this[t+s]=e/o&255;return t+n};g.prototype.writeUintBE=g.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let f=Math.pow(2,8*n)-1;N(this,e,t,n,f,0)}let o=n-1,s=1;for(this[t+o]=e&255;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+n};g.prototype.writeUint8=g.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||N(this,e,t,1,255,0),this[t]=e&255,t+1};g.prototype.writeUint16LE=g.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||N(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};g.prototype.writeUint16BE=g.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||N(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};g.prototype.writeUint32LE=g.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||N(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};g.prototype.writeUint32BE=g.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||N(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function $r(r,e,t,n,i){Jr(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,t}function Gr(r,e,t,n,i){Jr(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t+7]=o,o=o>>8,r[t+6]=o,o=o>>8,r[t+5]=o,o=o>>8,r[t+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=s,s=s>>8,r[t+2]=s,s=s>>8,r[t+1]=s,s=s>>8,r[t]=s,t+8}g.prototype.writeBigUInt64LE=te(function(e,t=0){return $r(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});g.prototype.writeBigUInt64BE=te(function(e,t=0){return Gr(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});g.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let l=Math.pow(2,8*n-1);N(this,e,t,n,l-1,-l)}let o=0,s=1,f=0;for(this[t]=e&255;++o<n&&(s*=256);)e<0&&f===0&&this[t+o-1]!==0&&(f=1),this[t+o]=(e/s>>0)-f&255;return t+n};g.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let l=Math.pow(2,8*n-1);N(this,e,t,n,l-1,-l)}let o=n-1,s=1,f=0;for(this[t+o]=e&255;--o>=0&&(s*=256);)e<0&&f===0&&this[t+o+1]!==0&&(f=1),this[t+o]=(e/s>>0)-f&255;return t+n};g.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||N(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};g.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||N(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};g.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||N(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};g.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||N(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};g.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||N(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};g.prototype.writeBigInt64LE=te(function(e,t=0){return $r(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});g.prototype.writeBigInt64BE=te(function(e,t=0){return Gr(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Yr(r,e,t,n,i,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function Vr(r,e,t,n,i){return e=+e,t=t>>>0,i||Yr(r,e,t,4,34028234663852886e22,-34028234663852886e22),me.write(r,e,t,n,23,4),t+4}g.prototype.writeFloatLE=function(e,t,n){return Vr(this,e,t,!0,n)};g.prototype.writeFloatBE=function(e,t,n){return Vr(this,e,t,!1,n)};function zr(r,e,t,n,i){return e=+e,t=t>>>0,i||Yr(r,e,t,8,17976931348623157e292,-17976931348623157e292),me.write(r,e,t,n,52,8),t+8}g.prototype.writeDoubleLE=function(e,t,n){return zr(this,e,t,!0,n)};g.prototype.writeDoubleBE=function(e,t,n){return zr(this,e,t,!1,n)};g.prototype.copy=function(e,t,n,i){if(!g.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);let o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),o};g.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!g.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=t;o<n;++o)this[o]=e;else{let s=g.isBuffer(e)?e:g.from(e,i),f=s.length;if(f===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%f]}return this};var we={};function Bt(r,e,t){we[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}Bt("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Bt("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError);Bt("ERR_OUT_OF_RANGE",function(r,e,t){let n=`The value of "${r}" is out of range.`,i=t;return Number.isInteger(t)&&Math.abs(t)>2**32?i=Ur(String(t)):typeof t=="bigint"&&(i=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(i=Ur(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function Ur(r){let e="",t=r.length,n=r[0]==="-"?1:0;for(;t>=n+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function Ao(r,e,t){be(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&Le(e,r.length-(t+1))}function Jr(r,e,t,n,i,o){if(r>t||r<e){let s=typeof e=="bigint"?"n":"",f;throw o>3?e===0||e===BigInt(0)?f=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:f=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:f=`>= ${e}${s} and <= ${t}${s}`,new we.ERR_OUT_OF_RANGE("value",f,r)}Ao(n,i,o)}function be(r,e){if(typeof r!="number")throw new we.ERR_INVALID_ARG_TYPE(e,"number",r)}function Le(r,e,t){throw Math.floor(r)!==r?(be(r,t),new we.ERR_OUT_OF_RANGE(t||"offset","an integer",r)):e<0?new we.ERR_BUFFER_OUT_OF_BOUNDS:new we.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,r)}var ko=/[^+/0-9A-Za-z-_]/g;function Fo(r){if(r=r.split("=")[0],r=r.trim().replace(ko,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function kt(r,e){e=e||1/0;let t,n=r.length,i=null,o=[];for(let s=0;s<n;++s){if(t=r.charCodeAt(s),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function Io(r){let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function Bo(r,e){let t,n,i,o=[];for(let s=0;s<r.length&&!((e-=2)<0);++s)t=r.charCodeAt(s),n=t>>8,i=t%256,o.push(i),o.push(n);return o}function Kr(r){return xt.toByteArray(Fo(r))}function Ze(r,e,t,n){let i;for(i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function $(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function Ot(r){return r!==r}var Oo=function(){let r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let n=t*16;for(let i=0;i<16;++i)e[n+i]=r[t]+r[i]}return e}();function te(r){return typeof BigInt>"u"?Lo:r}function Lo(){throw new Error("BigInt not supported")}});var tn=v((rf,en)=>{w();var B=en.exports={},G,Y;function Lt(){throw new Error("setTimeout has not been defined")}function Mt(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?G=setTimeout:G=Lt}catch{G=Lt}try{typeof clearTimeout=="function"?Y=clearTimeout:Y=Mt}catch{Y=Mt}})();function Xr(r){if(G===setTimeout)return setTimeout(r,0);if((G===Lt||!G)&&setTimeout)return G=setTimeout,setTimeout(r,0);try{return G(r,0)}catch{try{return G.call(null,r,0)}catch{return G.call(this,r,0)}}}function Mo(r){if(Y===clearTimeout)return clearTimeout(r);if((Y===Mt||!Y)&&clearTimeout)return Y=clearTimeout,clearTimeout(r);try{return Y(r)}catch{try{return Y.call(null,r)}catch{return Y.call(this,r)}}}var K=[],Ce=!1,ce,Qe=-1;function No(){!Ce||!ce||(Ce=!1,ce.length?K=ce.concat(K):Qe=-1,K.length&&Zr())}function Zr(){if(!Ce){var r=Xr(No);Ce=!0;for(var e=K.length;e;){for(ce=K,K=[];++Qe<e;)ce&&ce[Qe].run();Qe=-1,e=K.length}ce=null,Ce=!1,Mo(r)}}B.nextTick=function(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];K.push(new Qr(r,e)),K.length===1&&!Ce&&Xr(Zr)};function Qr(r,e){this.fun=r,this.array=e}Qr.prototype.run=function(){this.fun.apply(null,this.array)};B.title="browser";B.browser=!0;B.env={};B.argv=[];B.version="";B.versions={};function X(){}B.on=X;B.addListener=X;B.once=X;B.off=X;B.removeListener=X;B.removeAllListeners=X;B.emit=X;B.prependListener=X;B.prependOnceListener=X;B.listeners=function(r){return[]};B.binding=function(r){throw new Error("process.binding is not supported")};B.cwd=function(){return"/"};B.chdir=function(r){throw new Error("process.chdir is not supported")};B.umask=function(){return 0}});var R,E,w=eo(()=>{R=fe().Buffer,E=tn()});var Nt=v((sf,rn)=>{w();var ve=1e3,Re=ve*60,Se=Re*60,le=Se*24,Do=le*7,Uo=le*365.25;rn.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return Po(r);if(t==="number"&&isFinite(r))return e.long?jo(r):qo(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function Po(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(!!e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*Uo;case"weeks":case"week":case"w":return t*Do;case"days":case"day":case"d":return t*le;case"hours":case"hour":case"hrs":case"hr":case"h":return t*Se;case"minutes":case"minute":case"mins":case"min":case"m":return t*Re;case"seconds":case"second":case"secs":case"sec":case"s":return t*ve;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function qo(r){var e=Math.abs(r);return e>=le?Math.round(r/le)+"d":e>=Se?Math.round(r/Se)+"h":e>=Re?Math.round(r/Re)+"m":e>=ve?Math.round(r/ve)+"s":r+"ms"}function jo(r){var e=Math.abs(r);return e>=le?et(r,e,le,"day"):e>=Se?et(r,e,Se,"hour"):e>=Re?et(r,e,Re,"minute"):e>=ve?et(r,e,ve,"second"):r+" ms"}function et(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var on=v((uf,nn)=>{w();function Wo(r){t.debug=t,t.default=t,t.coerce=d,t.disable=s,t.enable=o,t.enabled=f,t.humanize=Nt(),Object.keys(r).forEach(u=>{t[u]=r[u]}),t.instances=[],t.names=[],t.skips=[],t.formatters={};function e(u){let a=0;for(let c=0;c<u.length;c++)a=(a<<5)-a+u.charCodeAt(c),a|=0;return t.colors[Math.abs(a)%t.colors.length]}t.selectColor=e;function t(u){let a;function c(...y){if(!c.enabled)return;let h=c,_=Number(new Date),p=_-(a||_);h.diff=p,h.prev=a,h.curr=_,a=_,y[0]=t.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let b=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(C,S)=>{if(C==="%%")return C;b++;let O=t.formatters[S];if(typeof O=="function"){let k=y[b];C=O.call(h,k),y.splice(b,1),b--}return C}),t.formatArgs.call(h,y),(h.log||t.log).apply(h,y)}return c.namespace=u,c.enabled=t.enabled(u),c.useColors=t.useColors(),c.color=e(u),c.destroy=n,c.extend=i,typeof t.init=="function"&&t.init(c),t.instances.push(c),c}function n(){let u=t.instances.indexOf(this);return u!==-1?(t.instances.splice(u,1),!0):!1}function i(u,a){let c=t(this.namespace+(typeof a>"u"?":":a)+u);return c.log=this.log,c}function o(u){t.save(u),t.names=[],t.skips=[];let a,c=(typeof u=="string"?u:"").split(/[\s,]+/),y=c.length;for(a=0;a<y;a++)!c[a]||(u=c[a].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.substr(1)+"$")):t.names.push(new RegExp("^"+u+"$")));for(a=0;a<t.instances.length;a++){let h=t.instances[a];h.enabled=t.enabled(h.namespace)}}function s(){let u=[...t.names.map(l),...t.skips.map(l).map(a=>"-"+a)].join(",");return t.enable(""),u}function f(u){if(u[u.length-1]==="*")return!0;let a,c;for(a=0,c=t.skips.length;a<c;a++)if(t.skips[a].test(u))return!1;for(a=0,c=t.names.length;a<c;a++)if(t.names[a].test(u))return!0;return!1}function l(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function d(u){return u instanceof Error?u.stack||u.message:u}return t.enable(t.load()),t}nn.exports=Wo});var Dt=v((P,tt)=>{w();P.log=Go;P.formatArgs=$o;P.save=Yo;P.load=Vo;P.useColors=Ho;P.storage=zo();P.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Ho(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function $o(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+tt.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}function Go(...r){return typeof console=="object"&&console.log&&console.log(...r)}function Yo(r){try{r?P.storage.setItem("debug",r):P.storage.removeItem("debug")}catch{}}function Vo(){let r;try{r=P.storage.getItem("debug")}catch{}return!r&&typeof E<"u"&&"env"in E&&(r=E.env.DEBUG),r}function zo(){try{return localStorage}catch{}}tt.exports=on()(P);var{formatters:Jo}=tt.exports;Jo.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var an=v((lf,sn)=>{w();function Ko(r){t.debug=t,t.default=t,t.coerce=l,t.disable=o,t.enable=i,t.enabled=s,t.humanize=Nt(),t.destroy=d,Object.keys(r).forEach(u=>{t[u]=r[u]}),t.names=[],t.skips=[],t.formatters={};function e(u){let a=0;for(let c=0;c<u.length;c++)a=(a<<5)-a+u.charCodeAt(c),a|=0;return t.colors[Math.abs(a)%t.colors.length]}t.selectColor=e;function t(u){let a,c=null,y,h;function _(...p){if(!_.enabled)return;let b=_,m=Number(new Date),C=m-(a||m);b.diff=C,b.prev=a,b.curr=m,a=m,p[0]=t.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");let S=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,(k,M)=>{if(k==="%%")return"%";S++;let kr=t.formatters[M];if(typeof kr=="function"){let zi=p[S];k=kr.call(b,zi),p.splice(S,1),S--}return k}),t.formatArgs.call(b,p),(b.log||t.log).apply(b,p)}return _.namespace=u,_.useColors=t.useColors(),_.color=t.selectColor(u),_.extend=n,_.destroy=t.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>c!==null?c:(y!==t.namespaces&&(y=t.namespaces,h=t.enabled(u)),h),set:p=>{c=p}}),typeof t.init=="function"&&t.init(_),_}function n(u,a){let c=t(this.namespace+(typeof a>"u"?":":a)+u);return c.log=this.log,c}function i(u){t.save(u),t.namespaces=u,t.names=[],t.skips=[];let a,c=(typeof u=="string"?u:"").split(/[\s,]+/),y=c.length;for(a=0;a<y;a++)!c[a]||(u=c[a].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.slice(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function o(){let u=[...t.names.map(f),...t.skips.map(f).map(a=>"-"+a)].join(",");return t.enable(""),u}function s(u){if(u[u.length-1]==="*")return!0;let a,c;for(a=0,c=t.skips.length;a<c;a++)if(t.skips[a].test(u))return!1;for(a=0,c=t.names.length;a<c;a++)if(t.names[a].test(u))return!0;return!1}function f(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function l(u){return u instanceof Error?u.stack||u.message:u}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}sn.exports=Ko});var un=v((D,rt)=>{w();D.formatArgs=Zo;D.save=Qo;D.load=es;D.useColors=Xo;D.storage=ts();D.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();D.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Xo(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Zo(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+rt.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}D.log=console.debug||console.log||(()=>{});function Qo(r){try{r?D.storage.setItem("debug",r):D.storage.removeItem("debug")}catch{}}function es(){let r;try{r=D.storage.getItem("debug")}catch{}return!r&&typeof E<"u"&&"env"in E&&(r=E.env.DEBUG),r}function ts(){try{return localStorage}catch{}}rt.exports=an()(D);var{formatters:rs}=rt.exports;rs.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var cn=v((pf,fn)=>{w();fn.exports=function(){if(typeof globalThis>"u")return null;var e={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}});var Pt=v((Ut,hn)=>{w();var nt=fe(),V=nt.Buffer;function ln(r,e){for(var t in r)e[t]=r[t]}V.from&&V.alloc&&V.allocUnsafe&&V.allocUnsafeSlow?hn.exports=nt:(ln(nt,Ut),Ut.Buffer=he);function he(r,e,t){return V(r,e,t)}he.prototype=Object.create(V.prototype);ln(V,he);he.from=function(r,e,t){if(typeof r=="number")throw new TypeError("Argument must not be a number");return V(r,e,t)};he.alloc=function(r,e,t){if(typeof r!="number")throw new TypeError("Argument must be a number");var n=V(r);return e!==void 0?typeof t=="string"?n.fill(e,t):n.fill(e):n.fill(0),n};he.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return V(r)};he.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return nt.SlowBuffer(r)}});var Me=v((_f,jt)=>{"use strict";w();var qt=65536,ns=4294967295;function is(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var os=Pt().Buffer,it=window.crypto||window.msCrypto;it&&it.getRandomValues?jt.exports=ss:jt.exports=is;function ss(r,e){if(r>ns)throw new RangeError("requested too many random bytes");var t=os.allocUnsafe(r);if(r>0)if(r>qt)for(var n=0;n<r;n+=qt)it.getRandomValues(t.slice(n,n+qt));else it.getRandomValues(t);return typeof e=="function"?E.nextTick(function(){e(null,t)}):t}});var Ne=v((mf,wn)=>{w();var xe=Object.create||_s,as=Object.keys||ws,us=Function.prototype.bind||ms;function F(){(!this._events||!Object.prototype.hasOwnProperty.call(this,"_events"))&&(this._events=xe(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}wn.exports=F;F.EventEmitter=F;F.prototype._events=void 0;F.prototype._maxListeners=void 0;var Wt=10,$t;try{Ht={},Object.defineProperty&&Object.defineProperty(Ht,"x",{value:0}),$t=Ht.x===0}catch{$t=!1}var Ht;$t?Object.defineProperty(F,"defaultMaxListeners",{enumerable:!0,get:function(){return Wt},set:function(r){if(typeof r!="number"||r<0||r!==r)throw new TypeError('"defaultMaxListeners" must be a positive number');Wt=r}}):F.defaultMaxListeners=Wt;F.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this};function dn(r){return r._maxListeners===void 0?F.defaultMaxListeners:r._maxListeners}F.prototype.getMaxListeners=function(){return dn(this)};function fs(r,e,t){if(e)r.call(t);else for(var n=r.length,i=Te(r,n),o=0;o<n;++o)i[o].call(t)}function cs(r,e,t,n){if(e)r.call(t,n);else for(var i=r.length,o=Te(r,i),s=0;s<i;++s)o[s].call(t,n)}function ls(r,e,t,n,i){if(e)r.call(t,n,i);else for(var o=r.length,s=Te(r,o),f=0;f<o;++f)s[f].call(t,n,i)}function hs(r,e,t,n,i,o){if(e)r.call(t,n,i,o);else for(var s=r.length,f=Te(r,s),l=0;l<s;++l)f[l].call(t,n,i,o)}function ds(r,e,t,n){if(e)r.apply(t,n);else for(var i=r.length,o=Te(r,i),s=0;s<i;++s)o[s].apply(t,n)}F.prototype.emit=function(e){var t,n,i,o,s,f,l=e==="error";if(f=this._events,f)l=l&&f.error==null;else if(!l)return!1;if(l){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var d=new Error('Unhandled "error" event. ('+t+")");throw d.context=t,d;return!1}if(n=f[e],!n)return!1;var u=typeof n=="function";switch(i=arguments.length,i){case 1:fs(n,u,this);break;case 2:cs(n,u,this,arguments[1]);break;case 3:ls(n,u,this,arguments[1],arguments[2]);break;case 4:hs(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(i-1),s=1;s<i;s++)o[s-1]=arguments[s];ds(n,u,this,o)}return!0};function pn(r,e,t,n){var i,o,s;if(typeof t!="function")throw new TypeError('"listener" argument must be a function');if(o=r._events,o?(o.newListener&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),s=o[e]):(o=r._events=xe(null),r._eventsCount=0),!s)s=o[e]=t,++r._eventsCount;else if(typeof s=="function"?s=o[e]=n?[t,s]:[s,t]:n?s.unshift(t):s.push(t),!s.warned&&(i=dn(r),i&&i>0&&s.length>i)){s.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+s.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');f.name="MaxListenersExceededWarning",f.emitter=r,f.type=e,f.count=s.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",f.name,f.message)}return r}F.prototype.addListener=function(e,t){return pn(this,e,t,!1)};F.prototype.on=F.prototype.addListener;F.prototype.prependListener=function(e,t){return pn(this,e,t,!0)};function ps(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var r=new Array(arguments.length),e=0;e<r.length;++e)r[e]=arguments[e];this.listener.apply(this.target,r)}}function gn(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=us.call(ps,n);return i.listener=t,n.wrapFn=i,i}F.prototype.once=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.on(e,gn(this,e,t)),this};F.prototype.prependOnceListener=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(e,gn(this,e,t)),this};F.prototype.removeListener=function(e,t){var n,i,o,s,f;if(typeof t!="function")throw new TypeError('"listener" argument must be a function');if(i=this._events,!i)return this;if(n=i[e],!n)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=xe(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(o=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){f=n[s].listener,o=s;break}if(o<0)return this;o===0?n.shift():gs(n,o),n.length===1&&(i[e]=n[0]),i.removeListener&&this.emit("removeListener",e,f||t)}return this};F.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,!n)return this;if(!n.removeListener)return arguments.length===0?(this._events=xe(null),this._eventsCount=0):n[e]&&(--this._eventsCount===0?this._events=xe(null):delete n[e]),this;if(arguments.length===0){var o=as(n),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=xe(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function yn(r,e,t){var n=r._events;if(!n)return[];var i=n[e];return i?typeof i=="function"?t?[i.listener||i]:[i]:t?ys(i):Te(i,i.length):[]}F.prototype.listeners=function(e){return yn(this,e,!0)};F.prototype.rawListeners=function(e){return yn(this,e,!1)};F.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):_n.call(r,e)};F.prototype.listenerCount=_n;function _n(r){var e=this._events;if(e){var t=e[r];if(typeof t=="function")return 1;if(t)return t.length}return 0}F.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function gs(r,e){for(var t=e,n=t+1,i=r.length;n<i;t+=1,n+=1)r[t]=r[n];r.pop()}function Te(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function ys(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function _s(r){var e=function(){};return e.prototype=r,new e}function ws(r){var e=[];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.push(t);return t}function ms(r){var e=this;return function(){return e.apply(r,arguments)}}});var Gt=v((Ef,mn)=>{w();mn.exports=Ne().EventEmitter});var Yt=v(()=>{w()});var vn=v((xf,Cn)=>{"use strict";w();function bn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function bs(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?bn(Object(t),!0).forEach(function(n){Es(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):bn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Es(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Cs(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function En(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function vs(r,e,t){return e&&En(r.prototype,e),t&&En(r,t),r}var Rs=fe(),ot=Rs.Buffer,Ss=Yt(),Vt=Ss.inspect,xs=Vt&&Vt.custom||"inspect";function Ts(r,e,t){ot.prototype.copy.call(r,e,t)}Cn.exports=function(){function r(){Cs(this,r),this.head=null,this.tail=null,this.length=0}return vs(r,[{key:"push",value:function(t){var n={data:t,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(t){var n={data:t,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=t+n.data;return i}},{key:"concat",value:function(t){if(this.length===0)return ot.alloc(0);for(var n=ot.allocUnsafe(t>>>0),i=this.head,o=0;i;)Ts(i.data,n,o),o+=i.data.length,i=i.next;return n}},{key:"consume",value:function(t,n){var i;return t<this.head.data.length?(i=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):t===this.head.data.length?i=this.shift():i=n?this._getString(t):this._getBuffer(t),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var n=this.head,i=1,o=n.data;for(t-=o.length;n=n.next;){var s=n.data,f=t>s.length?s.length:t;if(f===s.length?o+=s:o+=s.slice(0,t),t-=f,t===0){f===s.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=s.slice(f));break}++i}return this.length-=i,o}},{key:"_getBuffer",value:function(t){var n=ot.allocUnsafe(t),i=this.head,o=1;for(i.data.copy(n),t-=i.data.length;i=i.next;){var s=i.data,f=t>s.length?s.length:t;if(s.copy(n,n.length-t,0,f),t-=f,t===0){f===s.length?(++o,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=s.slice(f));break}++o}return this.length-=o,n}},{key:xs,value:function(t,n){return Vt(this,bs({},n,{depth:0,customInspect:!1}))}}]),r}()});var Jt=v((Af,Sn)=>{"use strict";w();function As(r,e){var t=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,E.nextTick(zt,this,r)):E.nextTick(zt,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(o){!e&&o?t._writableState?t._writableState.errorEmitted?E.nextTick(st,t):(t._writableState.errorEmitted=!0,E.nextTick(Rn,t,o)):E.nextTick(Rn,t,o):e?(E.nextTick(st,t),e(o)):E.nextTick(st,t)}),this)}function Rn(r,e){zt(r,e),st(r)}function st(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function ks(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function zt(r,e){r.emit("error",e)}function Fs(r,e){var t=r._readableState,n=r._writableState;t&&t.autoDestroy||n&&n.autoDestroy?r.destroy(e):r.emit("error",e)}Sn.exports={destroy:As,undestroy:ks,errorOrDestroy:Fs}});var de=v((Ff,An)=>{"use strict";w();function Is(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}var Tn={};function q(r,e,t){t||(t=Error);function n(o,s,f){return typeof e=="string"?e:e(o,s,f)}var i=function(o){Is(s,o);function s(f,l,d){return o.call(this,n(f,l,d))||this}return s}(t);i.prototype.name=t.name,i.prototype.code=r,Tn[r]=i}function xn(r,e){if(Array.isArray(r)){var t=r.length;return r=r.map(function(n){return String(n)}),t>2?"one of ".concat(e," ").concat(r.slice(0,t-1).join(", "),", or ")+r[t-1]:t===2?"one of ".concat(e," ").concat(r[0]," or ").concat(r[1]):"of ".concat(e," ").concat(r[0])}else return"of ".concat(e," ").concat(String(r))}function Bs(r,e,t){return r.substr(!t||t<0?0:+t,e.length)===e}function Os(r,e,t){return(t===void 0||t>r.length)&&(t=r.length),r.substring(t-e.length,t)===e}function Ls(r,e,t){return typeof t!="number"&&(t=0),t+e.length>r.length?!1:r.indexOf(e,t)!==-1}q("ERR_INVALID_OPT_VALUE",function(r,e){return'The value "'+e+'" is invalid for option "'+r+'"'},TypeError);q("ERR_INVALID_ARG_TYPE",function(r,e,t){var n;typeof e=="string"&&Bs(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(Os(r," argument"))i="The ".concat(r," ").concat(n," ").concat(xn(e,"type"));else{var o=Ls(r,".")?"property":"argument";i='The "'.concat(r,'" ').concat(o," ").concat(n," ").concat(xn(e,"type"))}return i+=". Received type ".concat(typeof t),i},TypeError);q("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");q("ERR_METHOD_NOT_IMPLEMENTED",function(r){return"The "+r+" method is not implemented"});q("ERR_STREAM_PREMATURE_CLOSE","Premature close");q("ERR_STREAM_DESTROYED",function(r){return"Cannot call "+r+" after a stream was destroyed"});q("ERR_MULTIPLE_CALLBACK","Callback called multiple times");q("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");q("ERR_STREAM_WRITE_AFTER_END","write after end");q("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);q("ERR_UNKNOWN_ENCODING",function(r){return"Unknown encoding: "+r},TypeError);q("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");An.exports.codes=Tn});var Kt=v((Bf,kn)=>{"use strict";w();var Ms=de().codes.ERR_INVALID_OPT_VALUE;function Ns(r,e,t){return r.highWaterMark!=null?r.highWaterMark:e?r[t]:null}function Ds(r,e,t,n){var i=Ns(e,n,t);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var o=n?t:"highWaterMark";throw new Ms(o,i)}return Math.floor(i)}return r.objectMode?16:16*1024}kn.exports={getHighWaterMark:Ds}});var Ae=v((Lf,Xt)=>{w();typeof Object.create=="function"?Xt.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Xt.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}});var In=v((Nf,Fn)=>{w();Fn.exports=Us;function Us(r,e){if(Zt("noDeprecation"))return r;var t=!1;function n(){if(!t){if(Zt("throwDeprecation"))throw new Error(e);Zt("traceDeprecation")?console.trace(e):console.warn(e),t=!0}return r.apply(this,arguments)}return n}function Zt(r){try{if(!window.localStorage)return!1}catch{return!1}var e=window.localStorage[r];return e==null?!1:String(e).toLowerCase()==="true"}});var tr=v((Uf,Dn)=>{"use strict";w();Dn.exports=I;function On(r){var e=this;this.next=null,this.entry=null,this.finish=function(){la(e,r)}}var ke;I.WritableState=Ue;var Ps={deprecate:In()},Ln=Gt(),ut=fe().Buffer,qs=window.Uint8Array||function(){};function js(r){return ut.from(r)}function Ws(r){return ut.isBuffer(r)||r instanceof qs}var er=Jt(),Hs=Kt(),$s=Hs.getHighWaterMark,re=de().codes,Gs=re.ERR_INVALID_ARG_TYPE,Ys=re.ERR_METHOD_NOT_IMPLEMENTED,Vs=re.ERR_MULTIPLE_CALLBACK,zs=re.ERR_STREAM_CANNOT_PIPE,Js=re.ERR_STREAM_DESTROYED,Ks=re.ERR_STREAM_NULL_VALUES,Xs=re.ERR_STREAM_WRITE_AFTER_END,Zs=re.ERR_UNKNOWN_ENCODING,Fe=er.errorOrDestroy;Ae()(I,Ln);function Qs(){}function Ue(r,e,t){ke=ke||pe(),r=r||{},typeof t!="boolean"&&(t=e instanceof ke),this.objectMode=!!r.objectMode,t&&(this.objectMode=this.objectMode||!!r.writableObjectMode),this.highWaterMark=$s(this,r,"writableHighWaterMark",t),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=r.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){sa(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=r.emitClose!==!1,this.autoDestroy=!!r.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new On(this)}Ue.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};(function(){try{Object.defineProperty(Ue.prototype,"buffer",{get:Ps.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var at;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(at=Function.prototype[Symbol.hasInstance],Object.defineProperty(I,Symbol.hasInstance,{value:function(e){return at.call(this,e)?!0:this!==I?!1:e&&e._writableState instanceof Ue}})):at=function(e){return e instanceof this};function I(r){ke=ke||pe();var e=this instanceof ke;if(!e&&!at.call(I,this))return new I(r);this._writableState=new Ue(r,this,e),this.writable=!0,r&&(typeof r.write=="function"&&(this._write=r.write),typeof r.writev=="function"&&(this._writev=r.writev),typeof r.destroy=="function"&&(this._destroy=r.destroy),typeof r.final=="function"&&(this._final=r.final)),Ln.call(this)}I.prototype.pipe=function(){Fe(this,new zs)};function ea(r,e){var t=new Xs;Fe(r,t),E.nextTick(e,t)}function ta(r,e,t,n){var i;return t===null?i=new Ks:typeof t!="string"&&!e.objectMode&&(i=new Gs("chunk",["string","Buffer"],t)),i?(Fe(r,i),E.nextTick(n,i),!1):!0}I.prototype.write=function(r,e,t){var n=this._writableState,i=!1,o=!n.objectMode&&Ws(r);return o&&!ut.isBuffer(r)&&(r=js(r)),typeof e=="function"&&(t=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),typeof t!="function"&&(t=Qs),n.ending?ea(this,t):(o||ta(this,n,r,t))&&(n.pendingcb++,i=na(this,n,o,r,e,t)),i};I.prototype.cork=function(){this._writableState.corked++};I.prototype.uncork=function(){var r=this._writableState;r.corked&&(r.corked--,!r.writing&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&Mn(this,r))};I.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new Zs(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(I.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ra(r,e,t){return!r.objectMode&&r.decodeStrings!==!1&&typeof e=="string"&&(e=ut.from(e,t)),e}Object.defineProperty(I.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function na(r,e,t,n,i,o){if(!t){var s=ra(e,n,i);n!==s&&(t=!0,i="buffer",n=s)}var f=e.objectMode?1:n.length;e.length+=f;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var d=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:t,callback:o,next:null},d?d.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else Qt(r,e,!1,f,n,i,o);return l}function Qt(r,e,t,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Js("write")):t?r._writev(i,e.onwrite):r._write(i,o,e.onwrite),e.sync=!1}function ia(r,e,t,n,i){--e.pendingcb,t?(E.nextTick(i,n),E.nextTick(De,r,e),r._writableState.errorEmitted=!0,Fe(r,n)):(i(n),r._writableState.errorEmitted=!0,Fe(r,n),De(r,e))}function oa(r){r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0}function sa(r,e){var t=r._writableState,n=t.sync,i=t.writecb;if(typeof i!="function")throw new Vs;if(oa(t),e)ia(r,t,n,e,i);else{var o=Nn(t)||r.destroyed;!o&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&Mn(r,t),n?E.nextTick(Bn,r,t,o,i):Bn(r,t,o,i)}}function Bn(r,e,t,n){t||aa(r,e),e.pendingcb--,n(),De(r,e)}function aa(r,e){e.length===0&&e.needDrain&&(e.needDrain=!1,r.emit("drain"))}function Mn(r,e){e.bufferProcessing=!0;var t=e.bufferedRequest;if(r._writev&&t&&t.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=t;for(var s=0,f=!0;t;)i[s]=t,t.isBuf||(f=!1),t=t.next,s+=1;i.allBuffers=f,Qt(r,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new On(e),e.bufferedRequestCount=0}else{for(;t;){var l=t.chunk,d=t.encoding,u=t.callback,a=e.objectMode?1:l.length;if(Qt(r,e,!1,a,l,d,u),t=t.next,e.bufferedRequestCount--,e.writing)break}t===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=t,e.bufferProcessing=!1}I.prototype._write=function(r,e,t){t(new Ys("_write()"))};I.prototype._writev=null;I.prototype.end=function(r,e,t){var n=this._writableState;return typeof r=="function"?(t=r,r=null,e=null):typeof e=="function"&&(t=e,e=null),r!=null&&this.write(r,e),n.corked&&(n.corked=1,this.uncork()),n.ending||ca(this,n,t),this};Object.defineProperty(I.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Nn(r){return r.ending&&r.length===0&&r.bufferedRequest===null&&!r.finished&&!r.writing}function ua(r,e){r._final(function(t){e.pendingcb--,t&&Fe(r,t),e.prefinished=!0,r.emit("prefinish"),De(r,e)})}function fa(r,e){!e.prefinished&&!e.finalCalled&&(typeof r._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,E.nextTick(ua,r,e)):(e.prefinished=!0,r.emit("prefinish")))}function De(r,e){var t=Nn(e);if(t&&(fa(r,e),e.pendingcb===0&&(e.finished=!0,r.emit("finish"),e.autoDestroy))){var n=r._readableState;(!n||n.autoDestroy&&n.endEmitted)&&r.destroy()}return t}function ca(r,e,t){e.ending=!0,De(r,e),t&&(e.finished?E.nextTick(t):r.once("finish",t)),e.ended=!0,r.writable=!1}function la(r,e,t){var n=r.entry;for(r.entry=null;n;){var i=n.callback;e.pendingcb--,i(t),n=n.next}e.corkedRequestsFree.next=r}Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});I.prototype.destroy=er.destroy;I.prototype._undestroy=er.undestroy;I.prototype._destroy=function(r,e){e(r)}});var pe=v((qf,Pn)=>{"use strict";w();var ha=Object.keys||function(r){var e=[];for(var t in r)e.push(t);return e};Pn.exports=z;var Un=ir(),nr=tr();Ae()(z,Un);for(rr=ha(nr.prototype),ft=0;ft<rr.length;ft++)ct=rr[ft],z.prototype[ct]||(z.prototype[ct]=nr.prototype[ct]);var rr,ct,ft;function z(r){if(!(this instanceof z))return new z(r);Un.call(this,r),nr.call(this,r),this.allowHalfOpen=!0,r&&(r.readable===!1&&(this.readable=!1),r.writable===!1&&(this.writable=!1),r.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",da)))}Object.defineProperty(z.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(z.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(z.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function da(){this._writableState.ended||E.nextTick(pa,this)}function pa(r){r.end()}Object.defineProperty(z.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var ar=v(jn=>{"use strict";w();var sr=Pt().Buffer,qn=sr.isEncoding||function(r){switch(r=""+r,r&&r.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function ga(r){if(!r)return"utf8";for(var e;;)switch(r){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return r;default:if(e)return;r=(""+r).toLowerCase(),e=!0}}function ya(r){var e=ga(r);if(typeof e!="string"&&(sr.isEncoding===qn||!qn(r)))throw new Error("Unknown encoding: "+r);return e||r}jn.StringDecoder=Pe;function Pe(r){this.encoding=ya(r);var e;switch(this.encoding){case"utf16le":this.text=Ca,this.end=va,e=4;break;case"utf8":this.fillLast=ma,e=4;break;case"base64":this.text=Ra,this.end=Sa,e=3;break;default:this.write=xa,this.end=Ta;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=sr.allocUnsafe(e)}Pe.prototype.write=function(r){if(r.length===0)return"";var e,t;if(this.lastNeed){if(e=this.fillLast(r),e===void 0)return"";t=this.lastNeed,this.lastNeed=0}else t=0;return t<r.length?e?e+this.text(r,t):this.text(r,t):e||""};Pe.prototype.end=Ea;Pe.prototype.text=ba;Pe.prototype.fillLast=function(r){if(this.lastNeed<=r.length)return r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,r.length),this.lastNeed-=r.length};function or(r){return r<=127?0:r>>5===6?2:r>>4===14?3:r>>3===30?4:r>>6===2?-1:-2}function _a(r,e,t){var n=e.length-1;if(n<t)return 0;var i=or(e[n]);return i>=0?(i>0&&(r.lastNeed=i-1),i):--n<t||i===-2?0:(i=or(e[n]),i>=0?(i>0&&(r.lastNeed=i-2),i):--n<t||i===-2?0:(i=or(e[n]),i>=0?(i>0&&(i===2?i=0:r.lastNeed=i-3),i):0))}function wa(r,e,t){if((e[0]&192)!==128)return r.lastNeed=0,"\uFFFD";if(r.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return r.lastNeed=1,"\uFFFD";if(r.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return r.lastNeed=2,"\uFFFD"}}function ma(r){var e=this.lastTotal-this.lastNeed,t=wa(this,r,e);if(t!==void 0)return t;if(this.lastNeed<=r.length)return r.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,e,0,r.length),this.lastNeed-=r.length}function ba(r,e){var t=_a(this,r,e);if(!this.lastNeed)return r.toString("utf8",e);this.lastTotal=t;var n=r.length-(t-this.lastNeed);return r.copy(this.lastChar,0,n),r.toString("utf8",e,n)}function Ea(r){var e=r&&r.length?this.write(r):"";return this.lastNeed?e+"\uFFFD":e}function Ca(r,e){if((r.length-e)%2===0){var t=r.toString("utf16le",e);if(t){var n=t.charCodeAt(t.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1],t.slice(0,-1)}return t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=r[r.length-1],r.toString("utf16le",e,r.length-1)}function va(r){var e=r&&r.length?this.write(r):"";if(this.lastNeed){var t=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,t)}return e}function Ra(r,e){var t=(r.length-e)%3;return t===0?r.toString("base64",e):(this.lastNeed=3-t,this.lastTotal=3,t===1?this.lastChar[0]=r[r.length-1]:(this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1]),r.toString("base64",e,r.length-t))}function Sa(r){var e=r&&r.length?this.write(r):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function xa(r){return r.toString(this.encoding)}function Ta(r){return r&&r.length?this.write(r):""}});var lt=v(($f,$n)=>{"use strict";w();var Wn=de().codes.ERR_STREAM_PREMATURE_CLOSE;function Aa(r){var e=!1;return function(){if(!e){e=!0;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];r.apply(this,n)}}}function ka(){}function Fa(r){return r.setHeader&&typeof r.abort=="function"}function Hn(r,e,t){if(typeof e=="function")return Hn(r,null,e);e||(e={}),t=Aa(t||ka);var n=e.readable||e.readable!==!1&&r.readable,i=e.writable||e.writable!==!1&&r.writable,o=function(){r.writable||f()},s=r._writableState&&r._writableState.finished,f=function(){i=!1,s=!0,n||t.call(r)},l=r._readableState&&r._readableState.endEmitted,d=function(){n=!1,l=!0,i||t.call(r)},u=function(h){t.call(r,h)},a=function(){var h;if(n&&!l)return(!r._readableState||!r._readableState.ended)&&(h=new Wn),t.call(r,h);if(i&&!s)return(!r._writableState||!r._writableState.ended)&&(h=new Wn),t.call(r,h)},c=function(){r.req.on("finish",f)};return Fa(r)?(r.on("complete",f),r.on("abort",a),r.req?c():r.on("request",c)):i&&!r._writableState&&(r.on("end",o),r.on("close",o)),r.on("end",d),r.on("finish",f),e.error!==!1&&r.on("error",u),r.on("close",a),function(){r.removeListener("complete",f),r.removeListener("abort",a),r.removeListener("request",c),r.req&&r.req.removeListener("finish",f),r.removeListener("end",o),r.removeListener("close",o),r.removeListener("finish",f),r.removeListener("end",d),r.removeListener("error",u),r.removeListener("close",a)}}$n.exports=Hn});var Yn=v((Yf,Gn)=>{"use strict";w();var ht;function ne(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var Ia=lt(),ie=Symbol("lastResolve"),ge=Symbol("lastReject"),qe=Symbol("error"),dt=Symbol("ended"),ye=Symbol("lastPromise"),ur=Symbol("handlePromise"),_e=Symbol("stream");function oe(r,e){return{value:r,done:e}}function Ba(r){var e=r[ie];if(e!==null){var t=r[_e].read();t!==null&&(r[ye]=null,r[ie]=null,r[ge]=null,e(oe(t,!1)))}}function Oa(r){E.nextTick(Ba,r)}function La(r,e){return function(t,n){r.then(function(){if(e[dt]){t(oe(void 0,!0));return}e[ur](t,n)},n)}}var Ma=Object.getPrototypeOf(function(){}),Na=Object.setPrototypeOf((ht={get stream(){return this[_e]},next:function(){var e=this,t=this[qe];if(t!==null)return Promise.reject(t);if(this[dt])return Promise.resolve(oe(void 0,!0));if(this[_e].destroyed)return new Promise(function(s,f){E.nextTick(function(){e[qe]?f(e[qe]):s(oe(void 0,!0))})});var n=this[ye],i;if(n)i=new Promise(La(n,this));else{var o=this[_e].read();if(o!==null)return Promise.resolve(oe(o,!1));i=new Promise(this[ur])}return this[ye]=i,i}},ne(ht,Symbol.asyncIterator,function(){return this}),ne(ht,"return",function(){var e=this;return new Promise(function(t,n){e[_e].destroy(null,function(i){if(i){n(i);return}t(oe(void 0,!0))})})}),ht),Ma),Da=function(e){var t,n=Object.create(Na,(t={},ne(t,_e,{value:e,writable:!0}),ne(t,ie,{value:null,writable:!0}),ne(t,ge,{value:null,writable:!0}),ne(t,qe,{value:null,writable:!0}),ne(t,dt,{value:e._readableState.endEmitted,writable:!0}),ne(t,ur,{value:function(o,s){var f=n[_e].read();f?(n[ye]=null,n[ie]=null,n[ge]=null,o(oe(f,!1))):(n[ie]=o,n[ge]=s)},writable:!0}),t));return n[ye]=null,Ia(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var o=n[ge];o!==null&&(n[ye]=null,n[ie]=null,n[ge]=null,o(i)),n[qe]=i;return}var s=n[ie];s!==null&&(n[ye]=null,n[ie]=null,n[ge]=null,s(oe(void 0,!0))),n[dt]=!0}),e.on("readable",Oa.bind(null,n)),n};Gn.exports=Da});var zn=v((zf,Vn)=>{w();Vn.exports=function(){throw new Error("Readable.from is not available in the browser")}});var ir=v((Xf,ii)=>{"use strict";w();ii.exports=A;var Ie;A.ReadableState=Zn;var Kf=Ne().EventEmitter,Xn=function(e,t){return e.listeners(t).length},We=Gt(),pt=fe().Buffer,Ua=window.Uint8Array||function(){};function Pa(r){return pt.from(r)}function qa(r){return pt.isBuffer(r)||r instanceof Ua}var fr=Yt(),x;fr&&fr.debuglog?x=fr.debuglog("stream"):x=function(){};var ja=vn(),yr=Jt(),Wa=Kt(),Ha=Wa.getHighWaterMark,gt=de().codes,$a=gt.ERR_INVALID_ARG_TYPE,Ga=gt.ERR_STREAM_PUSH_AFTER_EOF,Ya=gt.ERR_METHOD_NOT_IMPLEMENTED,Va=gt.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Be,cr,lr;Ae()(A,We);var je=yr.errorOrDestroy,hr=["error","close","destroy","pause","resume"];function za(r,e,t){if(typeof r.prependListener=="function")return r.prependListener(e,t);!r._events||!r._events[e]?r.on(e,t):Array.isArray(r._events[e])?r._events[e].unshift(t):r._events[e]=[t,r._events[e]]}function Zn(r,e,t){Ie=Ie||pe(),r=r||{},typeof t!="boolean"&&(t=e instanceof Ie),this.objectMode=!!r.objectMode,t&&(this.objectMode=this.objectMode||!!r.readableObjectMode),this.highWaterMark=Ha(this,r,"readableHighWaterMark",t),this.buffer=new ja,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=r.emitClose!==!1,this.autoDestroy=!!r.autoDestroy,this.destroyed=!1,this.defaultEncoding=r.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,r.encoding&&(Be||(Be=ar().StringDecoder),this.decoder=new Be(r.encoding),this.encoding=r.encoding)}function A(r){if(Ie=Ie||pe(),!(this instanceof A))return new A(r);var e=this instanceof Ie;this._readableState=new Zn(r,this,e),this.readable=!0,r&&(typeof r.read=="function"&&(this._read=r.read),typeof r.destroy=="function"&&(this._destroy=r.destroy)),We.call(this)}Object.defineProperty(A.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});A.prototype.destroy=yr.destroy;A.prototype._undestroy=yr.undestroy;A.prototype._destroy=function(r,e){e(r)};A.prototype.push=function(r,e){var t=this._readableState,n;return t.objectMode?n=!0:typeof r=="string"&&(e=e||t.defaultEncoding,e!==t.encoding&&(r=pt.from(r,e),e=""),n=!0),Qn(this,r,e,!1,n)};A.prototype.unshift=function(r){return Qn(this,r,null,!0,!1)};function Qn(r,e,t,n,i){x("readableAddChunk",e);var o=r._readableState;if(e===null)o.reading=!1,Xa(r,o);else{var s;if(i||(s=Ja(o,e)),s)je(r,s);else if(o.objectMode||e&&e.length>0)if(typeof e!="string"&&!o.objectMode&&Object.getPrototypeOf(e)!==pt.prototype&&(e=Pa(e)),n)o.endEmitted?je(r,new Va):dr(r,o,e,!0);else if(o.ended)je(r,new Ga);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!t?(e=o.decoder.write(e),o.objectMode||e.length!==0?dr(r,o,e,!1):gr(r,o)):dr(r,o,e,!1)}else n||(o.reading=!1,gr(r,o))}return!o.ended&&(o.length<o.highWaterMark||o.length===0)}function dr(r,e,t,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,r.emit("data",t)):(e.length+=e.objectMode?1:t.length,n?e.buffer.unshift(t):e.buffer.push(t),e.needReadable&&yt(r)),gr(r,e)}function Ja(r,e){var t;return!qa(e)&&typeof e!="string"&&e!==void 0&&!r.objectMode&&(t=new $a("chunk",["string","Buffer","Uint8Array"],e)),t}A.prototype.isPaused=function(){return this._readableState.flowing===!1};A.prototype.setEncoding=function(r){Be||(Be=ar().StringDecoder);var e=new Be(r);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var t=this._readableState.buffer.head,n="";t!==null;)n+=e.write(t.data),t=t.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var Jn=1073741824;function Ka(r){return r>=Jn?r=Jn:(r--,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r++),r}function Kn(r,e){return r<=0||e.length===0&&e.ended?0:e.objectMode?1:r!==r?e.flowing&&e.length?e.buffer.head.data.length:e.length:(r>e.highWaterMark&&(e.highWaterMark=Ka(r)),r<=e.length?r:e.ended?e.length:(e.needReadable=!0,0))}A.prototype.read=function(r){x("read",r),r=parseInt(r,10);var e=this._readableState,t=r;if(r!==0&&(e.emittedReadable=!1),r===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return x("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?pr(this):yt(this),null;if(r=Kn(r,e),r===0&&e.ended)return e.length===0&&pr(this),null;var n=e.needReadable;x("need readable",n),(e.length===0||e.length-r<e.highWaterMark)&&(n=!0,x("length less than watermark",n)),e.ended||e.reading?(n=!1,x("reading or ended",n)):n&&(x("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(r=Kn(t,e)));var i;return r>0?i=ri(r,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,r=0):(e.length-=r,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),t!==r&&e.ended&&pr(this)),i!==null&&this.emit("data",i),i};function Xa(r,e){if(x("onEofChunk"),!e.ended){if(e.decoder){var t=e.decoder.end();t&&t.length&&(e.buffer.push(t),e.length+=e.objectMode?1:t.length)}e.ended=!0,e.sync?yt(r):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,ei(r)))}}function yt(r){var e=r._readableState;x("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(x("emitReadable",e.flowing),e.emittedReadable=!0,E.nextTick(ei,r))}function ei(r){var e=r._readableState;x("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(r.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,_r(r)}function gr(r,e){e.readingMore||(e.readingMore=!0,E.nextTick(Za,r,e))}function Za(r,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var t=e.length;if(x("maybeReadMore read 0"),r.read(0),t===e.length)break}e.readingMore=!1}A.prototype._read=function(r){je(this,new Ya("_read()"))};A.prototype.pipe=function(r,e){var t=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=r;break;case 1:n.pipes=[n.pipes,r];break;default:n.pipes.push(r);break}n.pipesCount+=1,x("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&r!==E.stdout&&r!==E.stderr,o=i?f:_;n.endEmitted?E.nextTick(o):t.once("end",o),r.on("unpipe",s);function s(p,b){x("onunpipe"),p===t&&b&&b.hasUnpiped===!1&&(b.hasUnpiped=!0,u())}function f(){x("onend"),r.end()}var l=Qa(t);r.on("drain",l);var d=!1;function u(){x("cleanup"),r.removeListener("close",y),r.removeListener("finish",h),r.removeListener("drain",l),r.removeListener("error",c),r.removeListener("unpipe",s),t.removeListener("end",f),t.removeListener("end",_),t.removeListener("data",a),d=!0,n.awaitDrain&&(!r._writableState||r._writableState.needDrain)&&l()}t.on("data",a);function a(p){x("ondata");var b=r.write(p);x("dest.write",b),b===!1&&((n.pipesCount===1&&n.pipes===r||n.pipesCount>1&&ni(n.pipes,r)!==-1)&&!d&&(x("false write response, pause",n.awaitDrain),n.awaitDrain++),t.pause())}function c(p){x("onerror",p),_(),r.removeListener("error",c),Xn(r,"error")===0&&je(r,p)}za(r,"error",c);function y(){r.removeListener("finish",h),_()}r.once("close",y);function h(){x("onfinish"),r.removeListener("close",y),_()}r.once("finish",h);function _(){x("unpipe"),t.unpipe(r)}return r.emit("pipe",t),n.flowing||(x("pipe resume"),t.resume()),r};function Qa(r){return function(){var t=r._readableState;x("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&Xn(r,"data")&&(t.flowing=!0,_r(r))}}A.prototype.unpipe=function(r){var e=this._readableState,t={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return r&&r!==e.pipes?this:(r||(r=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,r&&r.emit("unpipe",this,t),this);if(!r){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=ni(e.pipes,r);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),r.emit("unpipe",this,t),this)};A.prototype.on=function(r,e){var t=We.prototype.on.call(this,r,e),n=this._readableState;return r==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):r==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,x("on readable",n.length,n.reading),n.length?yt(this):n.reading||E.nextTick(eu,this)),t};A.prototype.addListener=A.prototype.on;A.prototype.removeListener=function(r,e){var t=We.prototype.removeListener.call(this,r,e);return r==="readable"&&E.nextTick(ti,this),t};A.prototype.removeAllListeners=function(r){var e=We.prototype.removeAllListeners.apply(this,arguments);return(r==="readable"||r===void 0)&&E.nextTick(ti,this),e};function ti(r){var e=r._readableState;e.readableListening=r.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:r.listenerCount("data")>0&&r.resume()}function eu(r){x("readable nexttick read 0"),r.read(0)}A.prototype.resume=function(){var r=this._readableState;return r.flowing||(x("resume"),r.flowing=!r.readableListening,tu(this,r)),r.paused=!1,this};function tu(r,e){e.resumeScheduled||(e.resumeScheduled=!0,E.nextTick(ru,r,e))}function ru(r,e){x("resume",e.reading),e.reading||r.read(0),e.resumeScheduled=!1,r.emit("resume"),_r(r),e.flowing&&!e.reading&&r.read(0)}A.prototype.pause=function(){return x("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(x("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function _r(r){var e=r._readableState;for(x("flow",e.flowing);e.flowing&&r.read()!==null;);}A.prototype.wrap=function(r){var e=this,t=this._readableState,n=!1;r.on("end",function(){if(x("wrapped end"),t.decoder&&!t.ended){var s=t.decoder.end();s&&s.length&&e.push(s)}e.push(null)}),r.on("data",function(s){if(x("wrapped data"),t.decoder&&(s=t.decoder.write(s)),!(t.objectMode&&s==null)&&!(!t.objectMode&&(!s||!s.length))){var f=e.push(s);f||(n=!0,r.pause())}});for(var i in r)this[i]===void 0&&typeof r[i]=="function"&&(this[i]=function(f){return function(){return r[f].apply(r,arguments)}}(i));for(var o=0;o<hr.length;o++)r.on(hr[o],this.emit.bind(this,hr[o]));return this._read=function(s){x("wrapped _read",s),n&&(n=!1,r.resume())},this};typeof Symbol=="function"&&(A.prototype[Symbol.asyncIterator]=function(){return cr===void 0&&(cr=Yn()),cr(this)});Object.defineProperty(A.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(A.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(A.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});A._fromList=ri;Object.defineProperty(A.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function ri(r,e){if(e.length===0)return null;var t;return e.objectMode?t=e.buffer.shift():!r||r>=e.length?(e.decoder?t=e.buffer.join(""):e.buffer.length===1?t=e.buffer.first():t=e.buffer.concat(e.length),e.buffer.clear()):t=e.buffer.consume(r,e.decoder),t}function pr(r){var e=r._readableState;x("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,E.nextTick(nu,e,r))}function nu(r,e){if(x("endReadableNT",r.endEmitted,r.length),!r.endEmitted&&r.length===0&&(r.endEmitted=!0,e.readable=!1,e.emit("end"),r.autoDestroy)){var t=e._writableState;(!t||t.autoDestroy&&t.finished)&&e.destroy()}}typeof Symbol=="function"&&(A.from=function(r,e){return lr===void 0&&(lr=zn()),lr(A,r,e)});function ni(r,e){for(var t=0,n=r.length;t<n;t++)if(r[t]===e)return t;return-1}});var wr=v((Qf,si)=>{"use strict";w();si.exports=Z;var _t=de().codes,iu=_t.ERR_METHOD_NOT_IMPLEMENTED,ou=_t.ERR_MULTIPLE_CALLBACK,su=_t.ERR_TRANSFORM_ALREADY_TRANSFORMING,au=_t.ERR_TRANSFORM_WITH_LENGTH_0,wt=pe();Ae()(Z,wt);function uu(r,e){var t=this._transformState;t.transforming=!1;var n=t.writecb;if(n===null)return this.emit("error",new ou);t.writechunk=null,t.writecb=null,e!=null&&this.push(e),n(r);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Z(r){if(!(this instanceof Z))return new Z(r);wt.call(this,r),this._transformState={afterTransform:uu.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&(typeof r.transform=="function"&&(this._transform=r.transform),typeof r.flush=="function"&&(this._flush=r.flush)),this.on("prefinish",fu)}function fu(){var r=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,t){oi(r,e,t)}):oi(this,null,null)}Z.prototype.push=function(r,e){return this._transformState.needTransform=!1,wt.prototype.push.call(this,r,e)};Z.prototype._transform=function(r,e,t){t(new iu("_transform()"))};Z.prototype._write=function(r,e,t){var n=this._transformState;if(n.writecb=t,n.writechunk=r,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Z.prototype._read=function(r){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Z.prototype._destroy=function(r,e){wt.prototype._destroy.call(this,r,function(t){e(t)})};function oi(r,e,t){if(e)return r.emit("error",e);if(t!=null&&r.push(t),r._writableState.length)throw new au;if(r._transformState.transforming)throw new su;return r.push(null)}});var fi=v((tc,ui)=>{"use strict";w();ui.exports=He;var ai=wr();Ae()(He,ai);function He(r){if(!(this instanceof He))return new He(r);ai.call(this,r)}He.prototype._transform=function(r,e,t){t(null,r)}});var pi=v((nc,di)=>{"use strict";w();var mr;function cu(r){var e=!1;return function(){e||(e=!0,r.apply(void 0,arguments))}}var hi=de().codes,lu=hi.ERR_MISSING_ARGS,hu=hi.ERR_STREAM_DESTROYED;function ci(r){if(r)throw r}function du(r){return r.setHeader&&typeof r.abort=="function"}function pu(r,e,t,n){n=cu(n);var i=!1;r.on("close",function(){i=!0}),mr===void 0&&(mr=lt()),mr(r,{readable:e,writable:t},function(s){if(s)return n(s);i=!0,n()});var o=!1;return function(s){if(!i&&!o){if(o=!0,du(r))return r.abort();if(typeof r.destroy=="function")return r.destroy();n(s||new hu("pipe"))}}}function li(r){r()}function gu(r,e){return r.pipe(e)}function yu(r){return!r.length||typeof r[r.length-1]!="function"?ci:r.pop()}function _u(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];var n=yu(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new lu("streams");var i,o=e.map(function(s,f){var l=f<e.length-1,d=f>0;return pu(s,l,d,function(u){i||(i=u),u&&o.forEach(li),!l&&(o.forEach(li),n(i))})});return e.reduce(gu)}di.exports=_u});var br=v((j,gi)=>{w();j=gi.exports=ir();j.Stream=j;j.Readable=j;j.Writable=tr();j.Duplex=pe();j.Transform=wr();j.PassThrough=fi();j.finished=lt();j.pipeline=pi()});var Er=v((sc,_i)=>{w();var yi;_i.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(window):r=>(yi||(yi=Promise.resolve())).then(r).catch(e=>setTimeout(()=>{throw e},0))});var bi=v((uc,mi)=>{"use strict";w();function wi(r,e){for(let t in e)Object.defineProperty(r,t,{value:e[t],enumerable:!0,configurable:!0});return r}function wu(r,e,t){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof e=="object"&&(t=e,e=""),e&&(t.code=e);try{return wi(r,t)}catch{t.message=r.message,t.stack=r.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(r)),wi(new i,t)}}mi.exports=wu});var Si=v((cc,Ri)=>{w();var mu=un()("simple-peer"),vi=cn(),Ei=Me(),bu=br(),Cr=Er(),T=bi(),{Buffer:Eu}=fe(),vr=64*1024,Cu=5*1e3,vu=5*1e3;function Ci(r){return r.replace(/a=ice-options:trickle\s\n/g,"")}function Ru(r){console.warn(r)}var Q=class extends bu.Duplex{constructor(e){if(e=Object.assign({allowHalfOpen:!1},e),super(e),this._id=Ei(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||Ei(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||Q.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},Q.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(t=>t),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=e.trickle!==void 0?e.trickle:!0,this.allowHalfTrickle=e.allowHalfTrickle!==void 0?e.allowHalfTrickle:!1,this.iceCompleteTimeout=e.iceCompleteTimeout||Cu,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&typeof e.wrtc=="object"?e.wrtc:vi(),!this._wrtc)throw T(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(t){this.destroy(T(t,"ERR_PC_CONSTRUCTOR"));return}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=t=>{this._onIceCandidate(t)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(t=>{this.destroy(T(t,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=t=>{this._setupData(t)},this.streams&&this.streams.forEach(t=>{this.addStream(t)}),this._pc.ontrack=t=>{this._onTrack(t)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(!this.destroying){if(this.destroyed)throw T(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof e=="string")try{e=JSON.parse(e)}catch{e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(t=>{this._addIceCandidate(t)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(t=>{this.destroy(T(t,"ERR_SET_REMOTE_DESCRIPTION"))}),!e.sdp&&!e.candidate&&!e.renegotiate&&!e.transceiverRequest&&this.destroy(T(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(e){let t=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(t).catch(n=>{!t.address||t.address.endsWith(".local")?Ru("Ignoring unsupported ICE candidate."):this.destroy(T(n,"ERR_ADD_ICE_CANDIDATE"))})}send(e){if(!this.destroying){if(this.destroyed)throw T(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(e)}}addTransceiver(e,t){if(!this.destroying){if(this.destroyed)throw T(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,t),this._needsNegotiation()}catch(n){this.destroy(T(n,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:e,init:t}})}}addStream(e){if(!this.destroying){if(this.destroyed)throw T(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),e.getTracks().forEach(t=>{this.addTrack(t,e)})}}addTrack(e,t){if(this.destroying)return;if(this.destroyed)throw T(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");let n=this._senderMap.get(e)||new Map,i=n.get(t);if(!i)i=this._pc.addTrack(e,t),n.set(t,i),this._senderMap.set(e,n),this._needsNegotiation();else throw i.removed?T(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):T(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(e,t,n){if(this.destroying)return;if(this.destroyed)throw T(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");let i=this._senderMap.get(e),o=i?i.get(n):null;if(!o)throw T(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,i),o.replaceTrack!=null?o.replaceTrack(t):this.destroy(T(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(e,t){if(this.destroying)return;if(this.destroyed)throw T(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");let n=this._senderMap.get(e),i=n?n.get(t):null;if(!i)throw T(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{i.removed=!0,this._pc.removeTrack(i)}catch(o){o.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(i):this.destroy(T(o,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){if(!this.destroying){if(this.destroyed)throw T(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),e.getTracks().forEach(t=>{this.removeTrack(t,e)})}}_needsNegotiation(){this._debug("_needsNegotiation"),!this._batchedNegotiation&&(this._batchedNegotiation=!0,Cr(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw T(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(e){this._destroy(e,()=>{})}_destroy(e,t){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",e&&(e.message||e)),Cr(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close"),t()}))}_setupData(e){if(!e.channel)return this.destroy(T(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=vr),this.channelName=this._channel.label,this._channel.onmessage=n=>{this._onChannelMessage(n)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=n=>{let i=n.error instanceof Error?n.error:new Error(`Datachannel error: ${n.message} ${n.filename}:${n.lineno}:${n.colno}`);this.destroy(T(i,"ERR_DATA_CHANNEL"))};let t=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(t&&this._onChannelClose(),t=!0):t=!1},vu)}_read(){}_write(e,t,n){if(this.destroyed)return n(T(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(i){return this.destroy(T(i,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>vr?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=e,this._cb=n}_onFinish(){if(this.destroyed)return;let e=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?e():this.once("connect",e)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(e=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(e.sdp=Ci(e.sdp)),e.sdp=this.sdpTransform(e.sdp);let t=()=>{if(this.destroyed)return;let o=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:o.type,sdp:o.sdp})},n=()=>{this._debug("createOffer success"),!this.destroyed&&(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))},i=o=>{this.destroy(T(o,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(e).then(n).catch(i)}).catch(e=>{this.destroy(T(e,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(e=>{!e.mid&&e.sender.track&&!e.requested&&(e.requested=!0,this.addTransceiver(e.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(e=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(e.sdp=Ci(e.sdp)),e.sdp=this.sdpTransform(e.sdp);let t=()=>{if(this.destroyed)return;let o=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:o.type,sdp:o.sdp}),this.initiator||this._requestMissingTransceivers()},n=()=>{this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))},i=o=>{this.destroy(T(o,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(e).then(n).catch(i)}).catch(e=>{this.destroy(T(e,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(T(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;let e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,t),this.emit("iceStateChange",e,t),(e==="connected"||e==="completed")&&(this._pcReady=!0,this._maybeReady()),e==="failed"&&this.destroy(T(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),e==="closed"&&this.destroy(T(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(e){let t=n=>(Object.prototype.toString.call(n.values)==="[object Array]"&&n.values.forEach(i=>{Object.assign(n,i)}),n);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(n=>{let i=[];n.forEach(o=>{i.push(t(o))}),e(null,i)},n=>e(n)):this._pc.getStats.length>0?this._pc.getStats(n=>{if(this.destroyed)return;let i=[];n.result().forEach(o=>{let s={};o.names().forEach(f=>{s[f]=o.stat(f)}),s.id=o.id,s.type=o.type,s.timestamp=o.timestamp,i.push(t(s))}),e(null,i)},n=>e(n)):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;let e=()=>{this.destroyed||this.getStats((t,n)=>{if(this.destroyed)return;t&&(n=[]);let i={},o={},s={},f=!1;n.forEach(d=>{(d.type==="remotecandidate"||d.type==="remote-candidate")&&(i[d.id]=d),(d.type==="localcandidate"||d.type==="local-candidate")&&(o[d.id]=d),(d.type==="candidatepair"||d.type==="candidate-pair")&&(s[d.id]=d)});let l=d=>{f=!0;let u=o[d.localCandidateId];u&&(u.ip||u.address)?(this.localAddress=u.ip||u.address,this.localPort=Number(u.port)):u&&u.ipAddress?(this.localAddress=u.ipAddress,this.localPort=Number(u.portNumber)):typeof d.googLocalAddress=="string"&&(u=d.googLocalAddress.split(":"),this.localAddress=u[0],this.localPort=Number(u[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let a=i[d.remoteCandidateId];a&&(a.ip||a.address)?(this.remoteAddress=a.ip||a.address,this.remotePort=Number(a.port)):a&&a.ipAddress?(this.remoteAddress=a.ipAddress,this.remotePort=Number(a.portNumber)):typeof d.googRemoteAddress=="string"&&(a=d.googRemoteAddress.split(":"),this.remoteAddress=a[0],this.remotePort=Number(a[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(n.forEach(d=>{d.type==="transport"&&d.selectedCandidatePairId&&l(s[d.selectedCandidatePairId]),(d.type==="googCandidatePair"&&d.googActiveConnection==="true"||(d.type==="candidatepair"||d.type==="candidate-pair")&&d.selected)&&l(d)}),!f&&(!Object.keys(s).length||Object.keys(o).length)){setTimeout(e,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(u){return this.destroy(T(u,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');let d=this._cb;this._cb=null,d(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};e()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>vr||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):!e.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(this.destroyed)return;let t=e.data;t instanceof ArrayBuffer&&(t=Eu.from(t)),this.push(t)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);let e=this._cb;this._cb=null,e(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach(t=>{this._debug("on track"),this.emit("track",e.track,t),this._remoteTracks.push({track:e.track,stream:t}),!this._remoteStreams.some(n=>n.id===t.id)&&(this._remoteStreams.push(t),Cr(()=>{this._debug("on stream"),this.emit("stream",t)}))})}_debug(){let e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],mu.apply(null,e)}};Q.WEBRTC_SUPPORT=!!vi();Q.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"};Q.channelConfig={};Ri.exports=Q});var xi=v(()=>{w()});var ki=v((gc,Ai)=>{w();var Su=Dt()("simple-websocket"),xu=Me(),Tu=br(),Au=Er(),Ge=xi(),$e=typeof Ge!="function"?WebSocket:Ge,Ti=64*1024,mt=class extends Tu.Duplex{constructor(e={}){if(typeof e=="string"&&(e={url:e}),e=Object.assign({allowHalfOpen:!1},e),super(e),e.url==null&&e.socket==null)throw new Error("Missing required `url` or `socket` option");if(e.url!=null&&e.socket!=null)throw new Error("Must specify either `url` or `socket` option, not both");if(this._id=xu(4).toString("hex").slice(0,7),this._debug("new websocket: %o",e),this.connected=!1,this.destroyed=!1,this._chunk=null,this._cb=null,this._interval=null,e.socket)this.url=e.socket.url,this._ws=e.socket,this.connected=e.socket.readyState===$e.OPEN;else{this.url=e.url;try{typeof Ge=="function"?this._ws=new $e(e.url,e):this._ws=new $e(e.url)}catch(t){Au(()=>this.destroy(t));return}}this._ws.binaryType="arraybuffer",this._ws.onopen=()=>{this._onOpen()},this._ws.onmessage=t=>{this._onMessage(t)},this._ws.onclose=()=>{this._onClose()},this._ws.onerror=()=>{this.destroy(new Error("connection error to "+this.url))},this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}send(e){this._ws.send(e)}destroy(e){this._destroy(e,()=>{})}_destroy(e,t){if(!this.destroyed){if(this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this.connected=!1,this.destroyed=!0,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._ws){let n=this._ws,i=()=>{n.onclose=null};if(n.readyState===$e.CLOSED)i();else try{n.onclose=i,n.close()}catch{i()}n.onopen=null,n.onmessage=null,n.onerror=()=>{}}if(this._ws=null,e){if(typeof DOMException<"u"&&e instanceof DOMException){let n=e.code;e=new Error(e.message),e.code=n}this.emit("error",e)}this.emit("close"),t()}}_read(){}_write(e,t,n){if(this.destroyed)return n(new Error("cannot write after socket is destroyed"));if(this.connected){try{this.send(e)}catch(i){return this.destroy(i)}typeof Ge!="function"&&this._ws.bufferedAmount>Ti?(this._debug("start backpressure: bufferedAmount %d",this._ws.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=e,this._cb=n}_onFinish(){if(this.destroyed)return;let e=()=>{setTimeout(()=>this.destroy(),1e3)};this.connected?e():this.once("connect",e)}_onMessage(e){if(this.destroyed)return;let t=e.data;t instanceof ArrayBuffer&&(t=R.from(t)),this.push(t)}_onOpen(){if(!(this.connected||this.destroyed)){if(this.connected=!0,this._chunk){try{this.send(this._chunk)}catch(t){return this.destroy(t)}this._chunk=null,this._debug('sent chunk from "write before connect"');let e=this._cb;this._cb=null,e(null)}typeof Ge!="function"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}}_onInterval(){if(!this._cb||!this._ws||this._ws.bufferedAmount>Ti)return;this._debug("ending backpressure: bufferedAmount %d",this._ws.bufferedAmount);let e=this._cb;this._cb=null,e(null)}_onClose(){this.destroyed||(this._debug("on close"),this.destroy())}_debug(){let e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],Su.apply(null,e)}};mt.WEBSOCKET_SUPPORT=!!$e;Ai.exports=mt});var Fi=v(()=>{w()});var Ii=v(Oe=>{w();Oe.DEFAULT_ANNOUNCE_PEERS=50;Oe.MAX_ANNOUNCE_PEERS=82;Oe.binaryToHex=function(r){return typeof r!="string"&&(r=String(r)),R.from(r,"binary").toString("hex")};Oe.hexToBinary=function(r){return typeof r!="string"&&(r=String(r)),R.from(r,"hex").toString("binary")};var ku=Fi();Object.assign(Oe,ku)});var Oi=v((Cc,Bi)=>{w();var Fu=Ne(),Rr=class extends Fu{constructor(e,t){super(),this.client=e,this.announceUrl=t,this.interval=null,this.destroyed=!1}setInterval(e){e==null&&(e=this.DEFAULT_ANNOUNCE_INTERVAL),clearInterval(this.interval),e&&(this.interval=setInterval(()=>{this.announce(this.client._defaultAnnounceOpts())},e),this.interval.unref&&this.interval.unref())}};Bi.exports=Rr});var Ni=v((Rc,Mi)=>{w();var W=Dt()("bittorrent-tracker:websocket-tracker"),Iu=Si(),Bu=Me(),Ou=ki(),se=Ii(),Lu=Oi(),ee={},Mu=10*1e3,Nu=60*60*1e3,Du=5*60*1e3,Uu=50*1e3,Ye=class extends Lu{constructor(e,t,n){super(e,t),W("new websocket tracker %s",t),this.peers={},this.socket=null,this.reconnecting=!1,this.retries=0,this.reconnectTimer=null,this.expectingResponse=!1,this._openSocket()}announce(e){if(this.destroyed||this.reconnecting)return;if(!this.socket.connected){this.socket.once("connect",()=>{this.announce(e)});return}let t=Object.assign({},e,{action:"announce",info_hash:this.client._infoHashBinary,peer_id:this.client._peerIdBinary});if(this._trackerId&&(t.trackerid=this._trackerId),e.event==="stopped"||e.event==="completed")this._send(t);else{let n=Math.min(e.numwant,10);this._generateOffers(n,i=>{t.numwant=n,t.offers=i,this._send(t)})}}scrape(e){if(this.destroyed||this.reconnecting)return;if(!this.socket.connected){this.socket.once("connect",()=>{this.scrape(e)});return}let n={action:"scrape",info_hash:Array.isArray(e.infoHash)&&e.infoHash.length>0?e.infoHash.map(i=>i.toString("binary")):e.infoHash&&e.infoHash.toString("binary")||this.client._infoHashBinary};this._send(n)}destroy(e=Li){if(this.destroyed)return e(null);this.destroyed=!0,clearInterval(this.interval),clearTimeout(this.reconnectTimer);for(let o in this.peers){let s=this.peers[o];clearTimeout(s.trackerTimeout),s.destroy()}if(this.peers=null,this.socket&&(this.socket.removeListener("connect",this._onSocketConnectBound),this.socket.removeListener("data",this._onSocketDataBound),this.socket.removeListener("close",this._onSocketCloseBound),this.socket.removeListener("error",this._onSocketErrorBound),this.socket=null),this._onSocketConnectBound=null,this._onSocketErrorBound=null,this._onSocketDataBound=null,this._onSocketCloseBound=null,ee[this.announceUrl]&&(ee[this.announceUrl].consumers-=1),ee[this.announceUrl].consumers>0)return e();let t=ee[this.announceUrl];if(delete ee[this.announceUrl],t.on("error",Li),t.once("close",e),!this.expectingResponse)return i();var n=setTimeout(i,se.DESTROY_TIMEOUT);t.once("data",i);function i(){n&&(clearTimeout(n),n=null),t.removeListener("data",i),t.destroy(),t=null}}_openSocket(){this.destroyed=!1,this.peers||(this.peers={}),this._onSocketConnectBound=()=>{this._onSocketConnect()},this._onSocketErrorBound=e=>{this._onSocketError(e)},this._onSocketDataBound=e=>{this._onSocketData(e)},this._onSocketCloseBound=()=>{this._onSocketClose()},this.socket=ee[this.announceUrl],this.socket?(ee[this.announceUrl].consumers+=1,this.socket.connected&&this._onSocketConnectBound()):(this.socket=ee[this.announceUrl]=new Ou(this.announceUrl),this.socket.consumers=1,this.socket.once("connect",this._onSocketConnectBound)),this.socket.on("data",this._onSocketDataBound),this.socket.once("close",this._onSocketCloseBound),this.socket.once("error",this._onSocketErrorBound)}_onSocketConnect(){this.destroyed||this.reconnecting&&(this.reconnecting=!1,this.retries=0,this.announce(this.client._defaultAnnounceOpts()))}_onSocketData(e){if(!this.destroyed){this.expectingResponse=!1;try{e=JSON.parse(e)}catch{this.client.emit("warning",new Error("Invalid tracker response"));return}e.action==="announce"?this._onAnnounceResponse(e):e.action==="scrape"?this._onScrapeResponse(e):this._onSocketError(new Error(`invalid action in WS response: ${e.action}`))}}_onAnnounceResponse(e){if(e.info_hash!==this.client._infoHashBinary){W("ignoring websocket data from %s for %s (looking for %s: reused socket)",this.announceUrl,se.binaryToHex(e.info_hash),this.client.infoHash);return}if(e.peer_id&&e.peer_id===this.client._peerIdBinary)return;W("received %s from %s for %s",JSON.stringify(e),this.announceUrl,this.client.infoHash);let t=e["failure reason"];if(t)return this.client.emit("warning",new Error(t));let n=e["warning message"];n&&this.client.emit("warning",new Error(n));let i=e.interval||e["min interval"];i&&this.setInterval(i*1e3);let o=e["tracker id"];if(o&&(this._trackerId=o),e.complete!=null){let f=Object.assign({},e,{announce:this.announceUrl,infoHash:se.binaryToHex(e.info_hash)});this.client.emit("update",f)}let s;if(e.offer&&e.peer_id&&(W("creating peer (from remote offer)"),s=this._createPeer(),s.id=se.binaryToHex(e.peer_id),s.once("signal",f=>{let l={action:"announce",info_hash:this.client._infoHashBinary,peer_id:this.client._peerIdBinary,to_peer_id:e.peer_id,answer:f,offer_id:e.offer_id};this._trackerId&&(l.trackerid=this._trackerId),this._send(l)}),s.signal(e.offer),this.client.emit("peer",s)),e.answer&&e.peer_id){let f=se.binaryToHex(e.offer_id);s=this.peers[f],s?(s.id=se.binaryToHex(e.peer_id),s.signal(e.answer),this.client.emit("peer",s),clearTimeout(s.trackerTimeout),s.trackerTimeout=null,delete this.peers[f]):W(`got unexpected answer: ${JSON.stringify(e.answer)}`)}}_onScrapeResponse(e){e=e.files||{};let t=Object.keys(e);if(t.length===0){this.client.emit("warning",new Error("invalid scrape response"));return}t.forEach(n=>{let i=Object.assign(e[n],{announce:this.announceUrl,infoHash:se.binaryToHex(n)});this.client.emit("scrape",i)})}_onSocketClose(){this.destroyed||(this.destroy(),this._startReconnectTimer())}_onSocketError(e){this.destroyed||(this.destroy(),this.client.emit("warning",e),this._startReconnectTimer())}_startReconnectTimer(){let e=Math.floor(Math.random()*Du)+Math.min(Math.pow(2,this.retries)*Mu,Nu);this.reconnecting=!0,clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout(()=>{this.retries++,this._openSocket()},e),this.reconnectTimer.unref&&this.reconnectTimer.unref(),W("reconnecting socket in %s ms",e)}_send(e){if(this.destroyed)return;this.expectingResponse=!0;let t=JSON.stringify(e);W("send %s",t),this.socket.send(t)}_generateOffers(e,t){let n=this,i=[];W("generating %s offers",e);for(let f=0;f<e;++f)o();s();function o(){let f=Bu(20).toString("hex");W("creating peer (from _generateOffers)");let l=n.peers[f]=n._createPeer({initiator:!0});l.once("signal",d=>{i.push({offer:d,offer_id:se.hexToBinary(f)}),s()}),l.trackerTimeout=setTimeout(()=>{W("tracker timeout: destroying peer"),l.trackerTimeout=null,delete n.peers[f],l.destroy()},Uu),l.trackerTimeout.unref&&l.trackerTimeout.unref()}function s(){i.length===e&&(W("generated %s offers",e),t(i))}}_createPeer(e){let t=this;e=Object.assign({trickle:!1,config:t.client._rtcConfig,wrtc:t.client._wrtc},e);let n=new Iu(e);return n.once("error",i),n.once("connect",o),n;function i(s){t.client.emit("warning",new Error(`Connection error: ${s.message}`)),n.destroy()}function o(){n.removeListener("error",i),n.removeListener("connect",o)}}};Ye.prototype.DEFAULT_ANNOUNCE_INTERVAL=30*1e3;Ye._socketPool=ee;function Li(){}Mi.exports=Ye});var xr=v((Ve,Sr)=>{w();(function(e,t){typeof Ve=="object"&&typeof Sr=="object"?Sr.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Ve=="object"?Ve.Rusha=t():e.Rusha=t()})(typeof self<"u"?self:Ve,function(){return function(r){var e={};function t(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return r[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=r,t.c=e,t.d=function(n,i,o){t.o(n,i)||Object.defineProperty(n,i,{configurable:!1,enumerable:!0,get:o})},t.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(i,"a",i),i},t.o=function(n,i){return Object.prototype.hasOwnProperty.call(n,i)},t.p="",t(t.s=3)}([function(r,e,t){function n(h,_){if(!(h instanceof _))throw new TypeError("Cannot call a class as a function")}var i=t(5),o=t(1),s=o.toHex,f=o.ceilHeapSize,l=t(6),d=function(h){for(h+=9;h%64>0;h+=1);return h},u=function(h,_){var p=new Uint8Array(h.buffer),b=_%4,m=_-b;switch(b){case 0:p[m+3]=0;case 1:p[m+2]=0;case 2:p[m+1]=0;case 3:p[m+0]=0}for(var C=(_>>2)+1;C<h.length;C++)h[C]=0},a=function(h,_,p){h[_>>2]|=128<<24-(_%4<<3),h[((_>>2)+2&-16)+14]=p/(1<<29)|0,h[((_>>2)+2&-16)+15]=p<<3},c=function(h,_){var p=new Int32Array(h,_+320,5),b=new Int32Array(5),m=new DataView(b.buffer);return m.setInt32(0,p[0],!1),m.setInt32(4,p[1],!1),m.setInt32(8,p[2],!1),m.setInt32(12,p[3],!1),m.setInt32(16,p[4],!1),b},y=function(){function h(_){if(n(this,h),_=_||64*1024,_%64>0)throw new Error("Chunk size must be a multiple of 128 bit");this._offset=0,this._maxChunkLen=_,this._padMaxChunkLen=d(_),this._heap=new ArrayBuffer(f(this._padMaxChunkLen+320+20)),this._h32=new Int32Array(this._heap),this._h8=new Int8Array(this._heap),this._core=new i({Int32Array},{},this._heap)}return h.prototype._initState=function(p,b){this._offset=0;var m=new Int32Array(p,b+320,5);m[0]=1732584193,m[1]=-271733879,m[2]=-1732584194,m[3]=271733878,m[4]=-1009589776},h.prototype._padChunk=function(p,b){var m=d(p),C=new Int32Array(this._heap,0,m>>2);return u(C,p),a(C,p,b),m},h.prototype._write=function(p,b,m,C){l(p,this._h8,this._h32,b,m,C||0)},h.prototype._coreCall=function(p,b,m,C,S){var O=m;this._write(p,b,m),S&&(O=this._padChunk(m,C)),this._core.hash(O,this._padMaxChunkLen)},h.prototype.rawDigest=function(p){var b=p.byteLength||p.length||p.size||0;this._initState(this._heap,this._padMaxChunkLen);var m=0,C=this._maxChunkLen;for(m=0;b>m+C;m+=C)this._coreCall(p,m,C,b,!1);return this._coreCall(p,m,b-m,b,!0),c(this._heap,this._padMaxChunkLen)},h.prototype.digest=function(p){return s(this.rawDigest(p).buffer)},h.prototype.digestFromString=function(p){return this.digest(p)},h.prototype.digestFromBuffer=function(p){return this.digest(p)},h.prototype.digestFromArrayBuffer=function(p){return this.digest(p)},h.prototype.resetState=function(){return this._initState(this._heap,this._padMaxChunkLen),this},h.prototype.append=function(p){var b=0,m=p.byteLength||p.length||p.size||0,C=this._offset%this._maxChunkLen,S=void 0;for(this._offset+=m;b<m;)S=Math.min(m-b,this._maxChunkLen-C),this._write(p,b,S,C),C+=S,b+=S,C===this._maxChunkLen&&(this._core.hash(this._maxChunkLen,this._padMaxChunkLen),C=0);return this},h.prototype.getState=function(){var p=this._offset%this._maxChunkLen,b=void 0;if(p)b=this._heap.slice(0);else{var m=new Int32Array(this._heap,this._padMaxChunkLen+320,5);b=m.buffer.slice(m.byteOffset,m.byteOffset+m.byteLength)}return{offset:this._offset,heap:b}},h.prototype.setState=function(p){if(this._offset=p.offset,p.heap.byteLength===20){var b=new Int32Array(this._heap,this._padMaxChunkLen+320,5);b.set(new Int32Array(p.heap))}else this._h32.set(new Int32Array(p.heap));return this},h.prototype.rawEnd=function(){var p=this._offset,b=p%this._maxChunkLen,m=this._padChunk(b,p);this._core.hash(m,this._padMaxChunkLen);var C=c(this._heap,this._padMaxChunkLen);return this._initState(this._heap,this._padMaxChunkLen),C},h.prototype.end=function(){return s(this.rawEnd().buffer)},h}();r.exports=y,r.exports._core=i},function(r,e){for(var t=new Array(256),n=0;n<256;n++)t[n]=(n<16?"0":"")+n.toString(16);r.exports.toHex=function(i){for(var o=new Uint8Array(i),s=new Array(i.byteLength),f=0;f<s.length;f++)s[f]=t[o[f]];return s.join("")},r.exports.ceilHeapSize=function(i){var o=0;if(i<=65536)return 65536;if(i<16777216)for(o=1;o<i;o=o<<1);else for(o=16777216;o<i;o+=16777216);return o},r.exports.isDedicatedWorkerScope=function(i){var o="WorkerGlobalScope"in i&&i instanceof i.WorkerGlobalScope,s="SharedWorkerGlobalScope"in i&&i instanceof i.SharedWorkerGlobalScope,f="ServiceWorkerGlobalScope"in i&&i instanceof i.ServiceWorkerGlobalScope;return o&&!s&&!f}},function(r,e,t){r.exports=function(){var n=t(0),i=function(f,l,d){try{return d(null,f.digest(l))}catch(u){return d(u)}},o=function(f,l,d,u,a){var c=new self.FileReader;c.onloadend=function(){if(c.error)return a(c.error);var h=c.result;l+=c.result.byteLength;try{f.append(h)}catch(_){a(_);return}l<u.size?o(f,l,d,u,a):a(null,f.end())},c.readAsArrayBuffer(u.slice(l,l+d))},s=!0;return self.onmessage=function(f){if(!!s){var l=f.data.data,d=f.data.file,u=f.data.id;if(!(typeof u>"u")&&!(!d&&!l)){var a=f.data.blockSize||4*1024*1024,c=new n(a);c.resetState();var y=function(h,_){h?self.postMessage({id:u,error:h.name}):self.postMessage({id:u,hash:_})};l&&i(c,l,y),d&&o(c,0,a,d,y)}}},function(){s=!1}}},function(r,e,t){var n=t(4),i=t(0),o=t(7),s=t(2),f=t(1),l=f.isDedicatedWorkerScope,d=typeof self<"u"&&l(self);i.disableWorkerBehaviour=d?s():function(){},i.createWorker=function(){var u=n(2),a=u.terminate;return u.terminate=function(){URL.revokeObjectURL(u.objectURL),a.call(u)},u},i.createHash=o,r.exports=i},function(r,e,t){function n(u){var a={};function c(h){if(a[h])return a[h].exports;var _=a[h]={i:h,l:!1,exports:{}};return u[h].call(_.exports,_,_.exports,c),_.l=!0,_.exports}c.m=u,c.c=a,c.i=function(h){return h},c.d=function(h,_,p){c.o(h,_)||Object.defineProperty(h,_,{configurable:!1,enumerable:!0,get:p})},c.r=function(h){Object.defineProperty(h,"__esModule",{value:!0})},c.n=function(h){var _=h&&h.__esModule?function(){return h.default}:function(){return h};return c.d(_,"a",_),_},c.o=function(h,_){return Object.prototype.hasOwnProperty.call(h,_)},c.p="/",c.oe=function(h){throw console.error(h),h};var y=c(c.s=ENTRY_MODULE);return y.default||y}var i="[\\.|\\-|\\+|\\w|/|@]+",o="\\((/\\*.*?\\*/)?s?.*?("+i+").*?\\)";function s(u){return(u+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function f(u,a,c){var y={};y[c]=[];var h=a.toString(),_=h.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!_)return y;for(var p=_[1],b=new RegExp("(\\\\n|\\W)"+s(p)+o,"g"),m;m=b.exec(h);)m[3]!=="dll-reference"&&y[c].push(m[3]);for(b=new RegExp("\\("+s(p)+'\\("(dll-reference\\s('+i+'))"\\)\\)'+o,"g");m=b.exec(h);)u[m[2]]||(y[c].push(m[1]),u[m[2]]=t(m[1]).m),y[m[2]]=y[m[2]]||[],y[m[2]].push(m[4]);return y}function l(u){var a=Object.keys(u);return a.reduce(function(c,y){return c||u[y].length>0},!1)}function d(u,a){for(var c={main:[a]},y={main:[]},h={main:{}};l(c);)for(var _=Object.keys(c),p=0;p<_.length;p++){var b=_[p],m=c[b],C=m.pop();if(h[b]=h[b]||{},!(h[b][C]||!u[b][C])){h[b][C]=!0,y[b]=y[b]||[],y[b].push(C);for(var S=f(u,u[b][C],b),O=Object.keys(S),k=0;k<O.length;k++)c[O[k]]=c[O[k]]||[],c[O[k]]=c[O[k]].concat(S[O[k]])}}return y}r.exports=function(u,a){a=a||{};var c={main:t.m},y=a.all?{main:Object.keys(c)}:d(c,u),h="";Object.keys(y).filter(function(C){return C!=="main"}).forEach(function(C){for(var S=0;y[C][S];)S++;y[C].push(S),c[C][S]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",h=h+"var "+C+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(S))+")({"+y[C].map(function(O){return""+JSON.stringify(O)+": "+c[C][O].toString()}).join(",")+`});
`}),h=h+"("+n.toString().replace("ENTRY_MODULE",JSON.stringify(u))+")({"+y.main.map(function(C){return""+JSON.stringify(C)+": "+c.main[C].toString()}).join(",")+"})(self);";var _=new window.Blob([h],{type:"text/javascript"});if(a.bare)return _;var p=window.URL||window.webkitURL||window.mozURL||window.msURL,b=p.createObjectURL(_),m=new window.Worker(b);return m.objectURL=b,m}},function(r,e){r.exports=function(n,i,o){var s=new n.Int32Array(o);function f(l,d){l=l|0,d=d|0;var u=0,a=0,c=0,y=0,h=0,_=0,p=0,b=0,m=0,C=0,S=0,O=0,k=0,M=0;for(c=s[d+320>>2]|0,h=s[d+324>>2]|0,p=s[d+328>>2]|0,m=s[d+332>>2]|0,S=s[d+336>>2]|0,u=0;(u|0)<(l|0);u=u+64|0){for(y=c,_=h,b=p,C=m,O=S,a=0;(a|0)<64;a=a+4|0)M=s[u+a>>2]|0,k=((c<<5|c>>>27)+(h&p|~h&m)|0)+((M+S|0)+1518500249|0)|0,S=m,m=p,p=h<<30|h>>>2,h=c,c=k,s[l+a>>2]=M;for(a=l+64|0;(a|0)<(l+80|0);a=a+4|0)M=(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])<<1|(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])>>>31,k=((c<<5|c>>>27)+(h&p|~h&m)|0)+((M+S|0)+1518500249|0)|0,S=m,m=p,p=h<<30|h>>>2,h=c,c=k,s[a>>2]=M;for(a=l+80|0;(a|0)<(l+160|0);a=a+4|0)M=(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])<<1|(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])>>>31,k=((c<<5|c>>>27)+(h^p^m)|0)+((M+S|0)+1859775393|0)|0,S=m,m=p,p=h<<30|h>>>2,h=c,c=k,s[a>>2]=M;for(a=l+160|0;(a|0)<(l+240|0);a=a+4|0)M=(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])<<1|(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])>>>31,k=((c<<5|c>>>27)+(h&p|h&m|p&m)|0)+((M+S|0)-1894007588|0)|0,S=m,m=p,p=h<<30|h>>>2,h=c,c=k,s[a>>2]=M;for(a=l+240|0;(a|0)<(l+320|0);a=a+4|0)M=(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])<<1|(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])>>>31,k=((c<<5|c>>>27)+(h^p^m)|0)+((M+S|0)-899497514|0)|0,S=m,m=p,p=h<<30|h>>>2,h=c,c=k,s[a>>2]=M;c=c+y|0,h=h+_|0,p=p+b|0,m=m+C|0,S=S+O|0}s[d+320>>2]=c,s[d+324>>2]=h,s[d+328>>2]=p,s[d+332>>2]=m,s[d+336>>2]=S}return{hash:f}}},function(r,e){var t=this,n=void 0;typeof self<"u"&&typeof self.FileReaderSync<"u"&&(n=new self.FileReaderSync);var i=function(f,l,d,u,a,c){var y=void 0,h=c%4,_=(a+h)%4,p=a-_;switch(h){case 0:l[c]=f.charCodeAt(u+3);case 1:l[c+1-(h<<1)|0]=f.charCodeAt(u+2);case 2:l[c+2-(h<<1)|0]=f.charCodeAt(u+1);case 3:l[c+3-(h<<1)|0]=f.charCodeAt(u)}if(!(a<_+(4-h))){for(y=4-h;y<p;y=y+4|0)d[c+y>>2]=f.charCodeAt(u+y)<<24|f.charCodeAt(u+y+1)<<16|f.charCodeAt(u+y+2)<<8|f.charCodeAt(u+y+3);switch(_){case 3:l[c+p+1|0]=f.charCodeAt(u+p+2);case 2:l[c+p+2|0]=f.charCodeAt(u+p+1);case 1:l[c+p+3|0]=f.charCodeAt(u+p)}}},o=function(f,l,d,u,a,c){var y=void 0,h=c%4,_=(a+h)%4,p=a-_;switch(h){case 0:l[c]=f[u+3];case 1:l[c+1-(h<<1)|0]=f[u+2];case 2:l[c+2-(h<<1)|0]=f[u+1];case 3:l[c+3-(h<<1)|0]=f[u]}if(!(a<_+(4-h))){for(y=4-h;y<p;y=y+4|0)d[c+y>>2|0]=f[u+y]<<24|f[u+y+1]<<16|f[u+y+2]<<8|f[u+y+3];switch(_){case 3:l[c+p+1|0]=f[u+p+2];case 2:l[c+p+2|0]=f[u+p+1];case 1:l[c+p+3|0]=f[u+p]}}},s=function(f,l,d,u,a,c){var y=void 0,h=c%4,_=(a+h)%4,p=a-_,b=new Uint8Array(n.readAsArrayBuffer(f.slice(u,u+a)));switch(h){case 0:l[c]=b[3];case 1:l[c+1-(h<<1)|0]=b[2];case 2:l[c+2-(h<<1)|0]=b[1];case 3:l[c+3-(h<<1)|0]=b[0]}if(!(a<_+(4-h))){for(y=4-h;y<p;y=y+4|0)d[c+y>>2|0]=b[y]<<24|b[y+1]<<16|b[y+2]<<8|b[y+3];switch(_){case 3:l[c+p+1|0]=b[p+2];case 2:l[c+p+2|0]=b[p+1];case 1:l[c+p+3|0]=b[p]}}};r.exports=function(f,l,d,u,a,c){if(typeof f=="string")return i(f,l,d,u,a,c);if(f instanceof Array||t&&t.Buffer&&t.Buffer.isBuffer(f))return o(f,l,d,u,a,c);if(f instanceof ArrayBuffer)return o(new Uint8Array(f),l,d,u,a,c);if(f.buffer instanceof ArrayBuffer)return o(new Uint8Array(f.buffer,f.byteOffset,f.byteLength),l,d,u,a,c);if(f instanceof Blob)return s(f,l,d,u,a,c);throw new Error("Unsupported data type.")}},function(r,e,t){function n(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}var i=t(0),o=t(1),s=o.toHex,f=function(){function l(){n(this,l),this._rusha=new i,this._rusha.resetState()}return l.prototype.update=function(u){return this._rusha.append(u),this},l.prototype.digest=function(u){var a=this._rusha.rawEnd().buffer;if(!u)return a;if(u==="hex")return s(a);throw new Error("unsupported digest encoding")},l}();r.exports=function(){return new f}}])})});var Ui=v((Tc,Di)=>{w();var Pu=xr(),Ct,bt,Et;function qu(){Ct=Pu.createWorker(),bt=1,Et={},Ct.onmessage=function(e){var t=e.data.id,n=Et[t];delete Et[t],e.data.error!=null?n(new Error("Rusha worker error: "+e.data.error)):n(null,e.data.hash)}}function ju(r,e){Ct||qu(),Et[bt]=e,Ct.postMessage({id:bt,data:r}),bt+=1}Di.exports=ju});var ji=v((kc,Tr)=>{w();var Wu=xr(),Hu=Ui(),$u=new Wu,Pi=typeof window<"u"?window:self,qi=Pi.crypto||Pi.msCrypto||{},ze=qi.subtle||qi.webkitSubtle;function vt(r){return $u.digest(r)}try{ze.digest({name:"sha-1"},new Uint8Array).catch(function(){ze=!1})}catch{ze=!1}function Gu(r,e){if(!ze){typeof window<"u"?Hu(r,function(n,i){if(n){e(vt(r));return}e(i)}):queueMicrotask(()=>e(vt(r)));return}typeof r=="string"&&(r=Yu(r)),ze.digest({name:"sha-1"},r).then(function(n){e(Vu(new Uint8Array(n)))},function(){e(vt(r))})}function Yu(r){for(var e=r.length,t=new Uint8Array(e),n=0;n<e;n++)t[n]=r.charCodeAt(n);return t}function Vu(r){for(var e=r.length,t=[],n=0;n<e;n++){var i=r[n];t.push((i>>>4).toString(16)),t.push((i&15).toString(16))}return t.join("")}Tr.exports=Gu;Tr.exports.sync=vt});w();var Ar=Je(Ni()),Gi=Je(Me()),Yi=Je(Ne()),Vi=Je(ji()),Wi="^",Hi=16e3,$i=class extends Yi.default{constructor(t,n){super();this.announce=["wss://tracker.files.fm:7073/announce","wss://tracker.btorrent.xyz","wss://spacetradersapi-chatbox.herokuapp.com:443/announce","ws://tracker.files.fm:7072/announce"];this.trackers={};this.peers={};this.responseWaiting={};this.msgChunks={};this._identifier="";this._peerIdBuffer=(0,Gi.default)(20);this._peerId=this._peerIdBuffer.toString("hex");this._peerIdBinary=this._peerIdBuffer.toString("binary");this.announce=t||this.announce,this.identifier=n||this.identifier}set identifier(t){this._identifier=t,this.infoHash=Vi.default.sync(t).toLowerCase(),this._infoHashBuffer=R.from(this.infoHash,"hex"),this._infoHashBinary=this._infoHashBuffer.toString("binary")}start(){this.on("peer",t=>{let n=!1;this.peers[t.id]||(n=!0,this.peers[t.id]={},this.responseWaiting[t.id]={}),t.on("connect",()=>{this.peers[t.id][t.channelName]=t,n&&this.emit("peerconnect",t)}),t.on("data",i=>{if(this.emit("data",t,i),i=i.toString(),i[0]===Wi)try{i=JSON.parse(i.slice(1)),t.respond=this._peerRespond(t,i.id);let o=this._chunkHandler(i);o!==!1&&(i.o&&(o=JSON.parse(o)),this.responseWaiting[t.id][i.id]?(this.responseWaiting[t.id][i.id]([t,o]),delete this.responseWaiting[t.id][i.id]):this.emit("msg",t,o),this._destroyChunks(i.id))}catch(o){console.error(o)}}),t.on("error",i=>{this._removePeer(t),console.warn("Error in connection to peer:",i)}),t.on("close",()=>{this._removePeer(t),console.log(`Connection to ${t.id} closed.`)})}),this.on("update",t=>{let n=this.trackers[this.announce.indexOf(t.announce)];this.emit("trackerconnect",n,this.getTrackerStats())}),this.on("warning",t=>{this.emit("trackerwarning",t,this.getTrackerStats())}),this._fetchPeers()}addTracker(t){if(this.announce.indexOf(t)!==-1)throw new Error("Tracker already added.");let n=this.announce.push(t);this.trackers[n]=new Ar.default(this,t),this.trackers[n].announce(this._defaultAnnounceOpts())}removeTracker(t){let n=this.announce.indexOf(t);if(n===-1)throw new Error("Tracker does not exist");this.trackers[n].peers=[],this.trackers[n].destroy(),delete this.trackers[n],delete this.announce[n]}_removePeer(t){if(!this.peers[t.id])return!1;delete this.peers[t.id][t.channelName],Object.keys(this.peers[t.id]).length===0&&(this.emit("peerclose",t),delete this.responseWaiting[t.id],delete this.peers[t.id])}send(t,n,i=""){return new Promise((o,s)=>{let f={id:i||String(Math.floor(Math.random()*1e5+1e5)),msg:typeof n=="object"?JSON.stringify(n):n,o:typeof n=="object"?1:null};try{if(!t.connected){for(let u in this.peers[t.id])if(t=this.peers[t.id][u],t.connected)break}this.responseWaiting[t.id]||(this.responseWaiting[t.id]={}),this.responseWaiting[t.id][f.id]=o}catch(u){return s(Error("Connection to peer closed"+u))}let l=0,d="";for(;f.msg.length>0;)f.c=l,d=f.msg.slice(Hi),f.msg=f.msg.slice(0,Hi),d||(f.last=!0),t.send(Wi+JSON.stringify(f)),f.msg=d,l++})}requestMorePeers(){return new Promise(t=>{for(let n in this.trackers)this.trackers[n].announce(this._defaultAnnounceOpts());t(this.peers)})}getTrackerStats(){let t=0;for(let n in this.trackers)this.trackers[n].socket&&this.trackers[n].socket.connect&&t++;return{connected:t,total:this.announce.length}}destroy(){for(let t in this.peers)for(let n in this.peers[t])this.peers[t][n].destroy();Object.keys(this.trackers).forEach(t=>this.trackers[t].destroy())}_peerRespond(t,n){return i=>this.send(t,i,n)}_chunkHandler(t){return this.msgChunks[t.id]||(this.msgChunks[t.id]=[]),this.msgChunks[t.id][t.c]=t.msg,t.last?this.msgChunks[t.id].join(""):!1}_destroyChunks(t){delete this.msgChunks[t]}_defaultAnnounceOpts(t={}){return t.numwant==null&&(t.numwant=50),t.uploaded==null&&(t.uploaded=0),t.downloaded==null&&(t.downloaded=0),t}_fetchPeers(){for(let t in this.announce)this.trackers[t]=new Ar.default(this,this.announce[t]),this.trackers[t].announce(this._defaultAnnounceOpts())}};})();
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
