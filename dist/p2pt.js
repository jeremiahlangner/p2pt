var ao=Object.create;var Dr=Object.defineProperty;var uo=Object.getOwnPropertyDescriptor;var fo=Object.getOwnPropertyNames;var co=Object.getPrototypeOf,lo=Object.prototype.hasOwnProperty;var ho=(r,e)=>()=>(r&&(e=r(r=0)),e);var x=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var po=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of fo(e))!lo.call(r,i)&&i!==t&&Dr(r,i,{get:()=>e[i],enumerable:!(n=uo(e,i))||n.enumerable});return r};var rt=(r,e,t)=>(t=r!=null?ao(co(r)):{},po(e||!r||!r.__esModule?Dr(t,"default",{value:r,enumerable:!0}):t,r));var jr=x(nt=>{"use strict";m();nt.byteLength=yo;nt.toByteArray=wo;nt.fromByteArray=Eo;var $=[],j=[],go=typeof Uint8Array<"u"?Uint8Array:Array,Ft="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(ue=0,Ur=Ft.length;ue<Ur;++ue)$[ue]=Ft[ue],j[Ft.charCodeAt(ue)]=ue;var ue,Ur;j["-".charCodeAt(0)]=62;j["_".charCodeAt(0)]=63;function Pr(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function yo(r){var e=Pr(r),t=e[0],n=e[1];return(t+n)*3/4-n}function _o(r,e,t){return(e+t)*3/4-t}function wo(r){var e,t=Pr(r),n=t[0],i=t[1],o=new go(_o(r,n,i)),s=0,f=i>0?n-4:n,l;for(l=0;l<f;l+=4)e=j[r.charCodeAt(l)]<<18|j[r.charCodeAt(l+1)]<<12|j[r.charCodeAt(l+2)]<<6|j[r.charCodeAt(l+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=j[r.charCodeAt(l)]<<2|j[r.charCodeAt(l+1)]>>4,o[s++]=e&255),i===1&&(e=j[r.charCodeAt(l)]<<10|j[r.charCodeAt(l+1)]<<4|j[r.charCodeAt(l+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function mo(r){return $[r>>18&63]+$[r>>12&63]+$[r>>6&63]+$[r&63]}function bo(r,e,t){for(var n,i=[],o=e;o<t;o+=3)n=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),i.push(mo(n));return i.join("")}function Eo(r){for(var e,t=r.length,n=t%3,i=[],o=16383,s=0,f=t-n;s<f;s+=o)i.push(bo(r,s,s+o>f?f:s+o));return n===1?(e=r[t-1],i.push($[e>>2]+$[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push($[e>>10]+$[e>>4&63]+$[e<<2&63]+"=")),i.join("")}});var qr=x(Nt=>{m();Nt.read=function(r,e,t,n,i){var o,s,f=i*8-n-1,l=(1<<f)-1,d=l>>1,u=-7,a=t?i-1:0,c=t?-1:1,y=r[e+a];for(a+=c,o=y&(1<<-u)-1,y>>=-u,u+=f;u>0;o=o*256+r[e+a],a+=c,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=n;u>0;s=s*256+r[e+a],a+=c,u-=8);if(o===0)o=1-d;else{if(o===l)return s?NaN:(y?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-d}return(y?-1:1)*s*Math.pow(2,o-n)};Nt.write=function(r,e,t,n,i,o){var s,f,l,d=o*8-i-1,u=(1<<d)-1,a=u>>1,c=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=n?0:o-1,h=n?1:-1,_=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(f=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+a>=1?e+=c/l:e+=c*Math.pow(2,1-a),e*l>=2&&(s++,l/=2),s+a>=u?(f=0,s=u):s+a>=1?(f=(e*l-1)*Math.pow(2,i),s=s+a):(f=e*Math.pow(2,a-1)*Math.pow(2,i),s=0));i>=8;r[t+y]=f&255,y+=h,f/=256,i-=8);for(s=s<<i|f,d+=i;d>0;r[t+y]=s&255,y+=h,s/=256,d-=8);r[t+y-h]|=_*128}});var ce=x(Ce=>{"use strict";m();var Mt=jr(),ve=qr(),Wr=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Ce.Buffer=g;Ce.SlowBuffer=To;Ce.INSPECT_MAX_BYTES=50;var it=2147483647;Ce.kMaxLength=it;g.TYPED_ARRAY_SUPPORT=vo();!g.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function vo(){try{let r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(g.prototype,"parent",{enumerable:!0,get:function(){if(!!g.isBuffer(this))return this.buffer}});Object.defineProperty(g.prototype,"offset",{enumerable:!0,get:function(){if(!!g.isBuffer(this))return this.byteOffset}});function K(r){if(r>it)throw new RangeError('The value "'+r+'" is invalid for option "size"');let e=new Uint8Array(r);return Object.setPrototypeOf(e,g.prototype),e}function g(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return jt(r)}return Yr(r,e,t)}g.poolSize=8192;function Yr(r,e,t){if(typeof r=="string")return Co(r,e);if(ArrayBuffer.isView(r))return So(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(G(r,ArrayBuffer)||r&&G(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(G(r,SharedArrayBuffer)||r&&G(r.buffer,SharedArrayBuffer)))return Ut(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return g.from(n,e,t);let i=xo(r);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return g.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}g.from=function(r,e,t){return Yr(r,e,t)};Object.setPrototypeOf(g.prototype,Uint8Array.prototype);Object.setPrototypeOf(g,Uint8Array);function Vr(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function Ro(r,e,t){return Vr(r),r<=0?K(r):e!==void 0?typeof t=="string"?K(r).fill(e,t):K(r).fill(e):K(r)}g.alloc=function(r,e,t){return Ro(r,e,t)};function jt(r){return Vr(r),K(r<0?0:qt(r)|0)}g.allocUnsafe=function(r){return jt(r)};g.allocUnsafeSlow=function(r){return jt(r)};function Co(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!g.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=Jr(r,e)|0,n=K(t),i=n.write(r,e);return i!==t&&(n=n.slice(0,i)),n}function Dt(r){let e=r.length<0?0:qt(r.length)|0,t=K(e);for(let n=0;n<e;n+=1)t[n]=r[n]&255;return t}function So(r){if(G(r,Uint8Array)){let e=new Uint8Array(r);return Ut(e.buffer,e.byteOffset,e.byteLength)}return Dt(r)}function Ut(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,g.prototype),n}function xo(r){if(g.isBuffer(r)){let e=qt(r.length)|0,t=K(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||Ht(r.length)?K(0):Dt(r);if(r.type==="Buffer"&&Array.isArray(r.data))return Dt(r.data)}function qt(r){if(r>=it)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+it.toString(16)+" bytes");return r|0}function To(r){return+r!=r&&(r=0),g.alloc(+r)}g.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==g.prototype};g.compare=function(e,t){if(G(e,Uint8Array)&&(e=g.from(e,e.offset,e.byteLength)),G(t,Uint8Array)&&(t=g.from(t,t.offset,t.byteLength)),!g.isBuffer(e)||!g.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0};g.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};g.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return g.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let i=g.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){let s=e[n];if(G(s,Uint8Array))o+s.length>i.length?(g.isBuffer(s)||(s=g.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(g.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function Jr(r,e){if(g.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||G(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return Pt(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return nn(r).length;default:if(i)return n?-1:Pt(r).length;e=(""+e).toLowerCase(),i=!0}}g.byteLength=Jr;function Ao(r,e,t){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return Uo(this,e,t);case"utf8":case"utf-8":return Kr(this,e,t);case"ascii":return Mo(this,e,t);case"latin1":case"binary":return Do(this,e,t);case"base64":return Fo(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Po(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}g.prototype._isBuffer=!0;function fe(r,e,t){let n=r[e];r[e]=r[t],r[t]=n}g.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)fe(this,t,t+1);return this};g.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)fe(this,t,t+3),fe(this,t+1,t+2);return this};g.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)fe(this,t,t+7),fe(this,t+1,t+6),fe(this,t+2,t+5),fe(this,t+3,t+4);return this};g.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?Kr(this,0,e):Ao.apply(this,arguments)};g.prototype.toLocaleString=g.prototype.toString;g.prototype.equals=function(e){if(!g.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:g.compare(this,e)===0};g.prototype.inspect=function(){let e="",t=Ce.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};Wr&&(g.prototype[Wr]=g.prototype.inspect);g.prototype.compare=function(e,t,n,i,o){if(G(e,Uint8Array)&&(e=g.from(e,e.offset,e.byteLength)),!g.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;let s=o-i,f=n-t,l=Math.min(s,f),d=this.slice(i,o),u=e.slice(t,n);for(let a=0;a<l;++a)if(d[a]!==u[a]){s=d[a],f=u[a];break}return s<f?-1:f<s?1:0};function zr(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,Ht(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=g.from(e,n)),g.isBuffer(e))return e.length===0?-1:Hr(r,e,t,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):Hr(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function Hr(r,e,t,n,i){let o=1,s=r.length,f=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,s/=2,f/=2,t/=2}function l(u,a){return o===1?u[a]:u.readUInt16BE(a*o)}let d;if(i){let u=-1;for(d=t;d<s;d++)if(l(r,d)===l(e,u===-1?0:d-u)){if(u===-1&&(u=d),d-u+1===f)return u*o}else u!==-1&&(d-=d-u),u=-1}else for(t+f>s&&(t=s-f),d=t;d>=0;d--){let u=!0;for(let a=0;a<f;a++)if(l(r,d+a)!==l(e,a)){u=!1;break}if(u)return d}return-1}g.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};g.prototype.indexOf=function(e,t,n){return zr(this,e,t,n,!0)};g.prototype.lastIndexOf=function(e,t,n){return zr(this,e,t,n,!1)};function ko(r,e,t,n){t=Number(t)||0;let i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;let o=e.length;n>o/2&&(n=o/2);let s;for(s=0;s<n;++s){let f=parseInt(e.substr(s*2,2),16);if(Ht(f))return s;r[t+s]=f}return s}function Io(r,e,t,n){return ot(Pt(e,r.length-t),r,t,n)}function Bo(r,e,t,n){return ot(Ho(e),r,t,n)}function Oo(r,e,t,n){return ot(nn(e),r,t,n)}function Lo(r,e,t,n){return ot($o(e,r.length-t),r,t,n)}g.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-t;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return ko(this,e,t,n);case"utf8":case"utf-8":return Io(this,e,t,n);case"ascii":case"latin1":case"binary":return Bo(this,e,t,n);case"base64":return Oo(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Lo(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Fo(r,e,t){return e===0&&t===r.length?Mt.fromByteArray(r):Mt.fromByteArray(r.slice(e,t))}function Kr(r,e,t){t=Math.min(r.length,t);let n=[],i=e;for(;i<t;){let o=r[i],s=null,f=o>239?4:o>223?3:o>191?2:1;if(i+f<=t){let l,d,u,a;switch(f){case 1:o<128&&(s=o);break;case 2:l=r[i+1],(l&192)===128&&(a=(o&31)<<6|l&63,a>127&&(s=a));break;case 3:l=r[i+1],d=r[i+2],(l&192)===128&&(d&192)===128&&(a=(o&15)<<12|(l&63)<<6|d&63,a>2047&&(a<55296||a>57343)&&(s=a));break;case 4:l=r[i+1],d=r[i+2],u=r[i+3],(l&192)===128&&(d&192)===128&&(u&192)===128&&(a=(o&15)<<18|(l&63)<<12|(d&63)<<6|u&63,a>65535&&a<1114112&&(s=a))}}s===null?(s=65533,f=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=f}return No(n)}var $r=4096;function No(r){let e=r.length;if(e<=$r)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=$r));return t}function Mo(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function Do(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function Uo(r,e,t){let n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);let i="";for(let o=e;o<t;++o)i+=Go[r[o]];return i}function Po(r,e,t){let n=r.slice(e,t),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}g.prototype.slice=function(e,t){let n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,g.prototype),i};function M(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}g.prototype.readUintLE=g.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||M(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return i};g.prototype.readUintBE=g.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||M(e,t,this.length);let i=this[e+--t],o=1;for(;t>0&&(o*=256);)i+=this[e+--t]*o;return i};g.prototype.readUint8=g.prototype.readUInt8=function(e,t){return e=e>>>0,t||M(e,1,this.length),this[e]};g.prototype.readUint16LE=g.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||M(e,2,this.length),this[e]|this[e+1]<<8};g.prototype.readUint16BE=g.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||M(e,2,this.length),this[e]<<8|this[e+1]};g.prototype.readUint32LE=g.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};g.prototype.readUint32BE=g.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||M(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};g.prototype.readBigUInt64LE=re(function(e){e=e>>>0,Re(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Pe(e,this.length-8);let i=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});g.prototype.readBigUInt64BE=re(function(e){e=e>>>0,Re(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Pe(e,this.length-8);let i=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});g.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||M(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i};g.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||M(e,t,this.length);let i=t,o=1,s=this[e+--i];for(;i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*t)),s};g.prototype.readInt8=function(e,t){return e=e>>>0,t||M(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};g.prototype.readInt16LE=function(e,t){e=e>>>0,t||M(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};g.prototype.readInt16BE=function(e,t){e=e>>>0,t||M(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};g.prototype.readInt32LE=function(e,t){return e=e>>>0,t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};g.prototype.readInt32BE=function(e,t){return e=e>>>0,t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};g.prototype.readBigInt64LE=re(function(e){e=e>>>0,Re(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Pe(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});g.prototype.readBigInt64BE=re(function(e){e=e>>>0,Re(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Pe(e,this.length-8);let i=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});g.prototype.readFloatLE=function(e,t){return e=e>>>0,t||M(e,4,this.length),ve.read(this,e,!0,23,4)};g.prototype.readFloatBE=function(e,t){return e=e>>>0,t||M(e,4,this.length),ve.read(this,e,!1,23,4)};g.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||M(e,8,this.length),ve.read(this,e,!0,52,8)};g.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||M(e,8,this.length),ve.read(this,e,!1,52,8)};function U(r,e,t,n,i,o){if(!g.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}g.prototype.writeUintLE=g.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let f=Math.pow(2,8*n)-1;U(this,e,t,n,f,0)}let o=1,s=0;for(this[t]=e&255;++s<n&&(o*=256);)this[t+s]=e/o&255;return t+n};g.prototype.writeUintBE=g.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let f=Math.pow(2,8*n)-1;U(this,e,t,n,f,0)}let o=n-1,s=1;for(this[t+o]=e&255;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+n};g.prototype.writeUint8=g.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||U(this,e,t,1,255,0),this[t]=e&255,t+1};g.prototype.writeUint16LE=g.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||U(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};g.prototype.writeUint16BE=g.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||U(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};g.prototype.writeUint32LE=g.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||U(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};g.prototype.writeUint32BE=g.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||U(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function Xr(r,e,t,n,i){rn(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,t}function Qr(r,e,t,n,i){rn(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t+7]=o,o=o>>8,r[t+6]=o,o=o>>8,r[t+5]=o,o=o>>8,r[t+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=s,s=s>>8,r[t+2]=s,s=s>>8,r[t+1]=s,s=s>>8,r[t]=s,t+8}g.prototype.writeBigUInt64LE=re(function(e,t=0){return Xr(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});g.prototype.writeBigUInt64BE=re(function(e,t=0){return Qr(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});g.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let l=Math.pow(2,8*n-1);U(this,e,t,n,l-1,-l)}let o=0,s=1,f=0;for(this[t]=e&255;++o<n&&(s*=256);)e<0&&f===0&&this[t+o-1]!==0&&(f=1),this[t+o]=(e/s>>0)-f&255;return t+n};g.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let l=Math.pow(2,8*n-1);U(this,e,t,n,l-1,-l)}let o=n-1,s=1,f=0;for(this[t+o]=e&255;--o>=0&&(s*=256);)e<0&&f===0&&this[t+o+1]!==0&&(f=1),this[t+o]=(e/s>>0)-f&255;return t+n};g.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||U(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};g.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||U(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};g.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||U(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};g.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||U(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};g.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||U(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};g.prototype.writeBigInt64LE=re(function(e,t=0){return Xr(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});g.prototype.writeBigInt64BE=re(function(e,t=0){return Qr(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Zr(r,e,t,n,i,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function en(r,e,t,n,i){return e=+e,t=t>>>0,i||Zr(r,e,t,4,34028234663852886e22,-34028234663852886e22),ve.write(r,e,t,n,23,4),t+4}g.prototype.writeFloatLE=function(e,t,n){return en(this,e,t,!0,n)};g.prototype.writeFloatBE=function(e,t,n){return en(this,e,t,!1,n)};function tn(r,e,t,n,i){return e=+e,t=t>>>0,i||Zr(r,e,t,8,17976931348623157e292,-17976931348623157e292),ve.write(r,e,t,n,52,8),t+8}g.prototype.writeDoubleLE=function(e,t,n){return tn(this,e,t,!0,n)};g.prototype.writeDoubleBE=function(e,t,n){return tn(this,e,t,!1,n)};g.prototype.copy=function(e,t,n,i){if(!g.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);let o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),o};g.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!g.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=t;o<n;++o)this[o]=e;else{let s=g.isBuffer(e)?e:g.from(e,i),f=s.length;if(f===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%f]}return this};var Ee={};function Wt(r,e,t){Ee[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}Wt("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Wt("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError);Wt("ERR_OUT_OF_RANGE",function(r,e,t){let n=`The value of "${r}" is out of range.`,i=t;return Number.isInteger(t)&&Math.abs(t)>2**32?i=Gr(String(t)):typeof t=="bigint"&&(i=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(i=Gr(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function Gr(r){let e="",t=r.length,n=r[0]==="-"?1:0;for(;t>=n+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function jo(r,e,t){Re(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&Pe(e,r.length-(t+1))}function rn(r,e,t,n,i,o){if(r>t||r<e){let s=typeof e=="bigint"?"n":"",f;throw o>3?e===0||e===BigInt(0)?f=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:f=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:f=`>= ${e}${s} and <= ${t}${s}`,new Ee.ERR_OUT_OF_RANGE("value",f,r)}jo(n,i,o)}function Re(r,e){if(typeof r!="number")throw new Ee.ERR_INVALID_ARG_TYPE(e,"number",r)}function Pe(r,e,t){throw Math.floor(r)!==r?(Re(r,t),new Ee.ERR_OUT_OF_RANGE(t||"offset","an integer",r)):e<0?new Ee.ERR_BUFFER_OUT_OF_BOUNDS:new Ee.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,r)}var qo=/[^+/0-9A-Za-z-_]/g;function Wo(r){if(r=r.split("=")[0],r=r.trim().replace(qo,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function Pt(r,e){e=e||1/0;let t,n=r.length,i=null,o=[];for(let s=0;s<n;++s){if(t=r.charCodeAt(s),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function Ho(r){let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function $o(r,e){let t,n,i,o=[];for(let s=0;s<r.length&&!((e-=2)<0);++s)t=r.charCodeAt(s),n=t>>8,i=t%256,o.push(i),o.push(n);return o}function nn(r){return Mt.toByteArray(Wo(r))}function ot(r,e,t,n){let i;for(i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function G(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function Ht(r){return r!==r}var Go=function(){let r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let n=t*16;for(let i=0;i<16;++i)e[n+i]=r[t]+r[i]}return e}();function re(r){return typeof BigInt>"u"?Yo:r}function Yo(){throw new Error("BigInt not supported")}});var fn=x((tf,un)=>{m();var F=un.exports={},Y,V;function $t(){throw new Error("setTimeout has not been defined")}function Gt(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Y=setTimeout:Y=$t}catch{Y=$t}try{typeof clearTimeout=="function"?V=clearTimeout:V=Gt}catch{V=Gt}})();function on(r){if(Y===setTimeout)return setTimeout(r,0);if((Y===$t||!Y)&&setTimeout)return Y=setTimeout,setTimeout(r,0);try{return Y(r,0)}catch{try{return Y.call(null,r,0)}catch{return Y.call(this,r,0)}}}function Vo(r){if(V===clearTimeout)return clearTimeout(r);if((V===Gt||!V)&&clearTimeout)return V=clearTimeout,clearTimeout(r);try{return V(r)}catch{try{return V.call(null,r)}catch{return V.call(this,r)}}}var X=[],Se=!1,le,st=-1;function Jo(){!Se||!le||(Se=!1,le.length?X=le.concat(X):st=-1,X.length&&sn())}function sn(){if(!Se){var r=on(Jo);Se=!0;for(var e=X.length;e;){for(le=X,X=[];++st<e;)le&&le[st].run();st=-1,e=X.length}le=null,Se=!1,Vo(r)}}F.nextTick=function(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];X.push(new an(r,e)),X.length===1&&!Se&&on(sn)};function an(r,e){this.fun=r,this.array=e}an.prototype.run=function(){this.fun.apply(null,this.array)};F.title="browser";F.browser=!0;F.env={};F.argv=[];F.version="";F.versions={};function Q(){}F.on=Q;F.addListener=Q;F.once=Q;F.off=Q;F.removeListener=Q;F.removeAllListeners=Q;F.emit=Q;F.prependListener=Q;F.prependOnceListener=Q;F.listeners=function(r){return[]};F.binding=function(r){throw new Error("process.binding is not supported")};F.cwd=function(){return"/"};F.chdir=function(r){throw new Error("process.chdir is not supported")};F.umask=function(){return 0}});var S,v,R,m=ho(()=>{S=ce().Buffer,v=fn(),R=window});var cn=x((of,at)=>{m();var zo=function(){"use strict";function r(u,a){return a!=null&&u instanceof a}var e;try{e=Map}catch{e=function(){}}var t;try{t=Set}catch{t=function(){}}var n;try{n=Promise}catch{n=function(){}}function i(u,a,c,y,h){typeof a=="object"&&(c=a.depth,y=a.prototype,h=a.includeNonEnumerable,a=a.circular);var _=[],p=[],E=typeof S<"u";typeof a>"u"&&(a=!0),typeof c>"u"&&(c=1/0);function w(b,C){if(b===null)return null;if(C===0)return b;var T,B;if(typeof b!="object")return b;if(r(b,e))T=new e;else if(r(b,t))T=new t;else if(r(b,n))T=new n(function(Me,De){b.then(function(Ue){Me(w(Ue,C-1))},function(Ue){De(w(Ue,C-1))})});else if(i.__isArray(b))T=[];else if(i.__isRegExp(b))T=new RegExp(b.source,d(b)),b.lastIndex&&(T.lastIndex=b.lastIndex);else if(i.__isDate(b))T=new Date(b.getTime());else{if(E&&S.isBuffer(b))return S.allocUnsafe?T=S.allocUnsafe(b.length):T=new S(b.length),b.copy(T),T;r(b,Error)?T=Object.create(b):typeof y>"u"?(B=Object.getPrototypeOf(b),T=Object.create(B)):(T=Object.create(y),B=y)}if(a){var N=_.indexOf(b);if(N!=-1)return p[N];_.push(b),p.push(T)}r(b,e)&&b.forEach(function(Me,De){var Ue=w(De,C-1),so=w(Me,C-1);T.set(Ue,so)}),r(b,t)&&b.forEach(function(Me){var De=w(Me,C-1);T.add(De)});for(var D in b){var Ne;B&&(Ne=Object.getOwnPropertyDescriptor(B,D)),!(Ne&&Ne.set==null)&&(T[D]=w(b[D],C-1))}if(Object.getOwnPropertySymbols)for(var Nr=Object.getOwnPropertySymbols(b),D=0;D<Nr.length;D++){var et=Nr[D],be=Object.getOwnPropertyDescriptor(b,et);be&&!be.enumerable&&!h||(T[et]=w(b[et],C-1),be.enumerable||Object.defineProperty(T,et,{enumerable:!1}))}if(h)for(var Mr=Object.getOwnPropertyNames(b),D=0;D<Mr.length;D++){var tt=Mr[D],be=Object.getOwnPropertyDescriptor(b,tt);be&&be.enumerable||(T[tt]=w(b[tt],C-1),Object.defineProperty(T,tt,{enumerable:!1}))}return T}return w(u,c)}i.clonePrototype=function(a){if(a===null)return null;var c=function(){};return c.prototype=a,new c};function o(u){return Object.prototype.toString.call(u)}i.__objToStr=o;function s(u){return typeof u=="object"&&o(u)==="[object Date]"}i.__isDate=s;function f(u){return typeof u=="object"&&o(u)==="[object Array]"}i.__isArray=f;function l(u){return typeof u=="object"&&o(u)==="[object RegExp]"}i.__isRegExp=l;function d(u){var a="";return u.global&&(a+="g"),u.ignoreCase&&(a+="i"),u.multiline&&(a+="m"),a}return i.__getRegExpFlags=d,i}();typeof at=="object"&&at.exports&&(at.exports=zo)});var hn=x((af,ln)=>{m();var xe=1e3,Te=xe*60,Ae=Te*60,he=Ae*24,Ko=he*7,Xo=he*365.25;ln.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return Qo(r);if(t==="number"&&isFinite(r))return e.long?es(r):Zo(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function Qo(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(!!e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*Xo;case"weeks":case"week":case"w":return t*Ko;case"days":case"day":case"d":return t*he;case"hours":case"hour":case"hrs":case"hr":case"h":return t*Ae;case"minutes":case"minute":case"mins":case"min":case"m":return t*Te;case"seconds":case"second":case"secs":case"sec":case"s":return t*xe;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Zo(r){var e=Math.abs(r);return e>=he?Math.round(r/he)+"d":e>=Ae?Math.round(r/Ae)+"h":e>=Te?Math.round(r/Te)+"m":e>=xe?Math.round(r/xe)+"s":r+"ms"}function es(r){var e=Math.abs(r);return e>=he?ut(r,e,he,"day"):e>=Ae?ut(r,e,Ae,"hour"):e>=Te?ut(r,e,Te,"minute"):e>=xe?ut(r,e,xe,"second"):r+" ms"}function ut(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var pn=x((ff,dn)=>{m();function ts(r){t.debug=t,t.default=t,t.coerce=l,t.disable=o,t.enable=i,t.enabled=s,t.humanize=hn(),t.destroy=d,Object.keys(r).forEach(u=>{t[u]=r[u]}),t.names=[],t.skips=[],t.formatters={};function e(u){let a=0;for(let c=0;c<u.length;c++)a=(a<<5)-a+u.charCodeAt(c),a|=0;return t.colors[Math.abs(a)%t.colors.length]}t.selectColor=e;function t(u){let a,c=null,y,h;function _(...p){if(!_.enabled)return;let E=_,w=Number(new Date),b=w-(a||w);E.diff=b,E.prev=a,E.curr=w,a=w,p[0]=t.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");let C=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,(B,N)=>{if(B==="%%")return"%";C++;let D=t.formatters[N];if(typeof D=="function"){let Ne=p[C];B=D.call(E,Ne),p.splice(C,1),C--}return B}),t.formatArgs.call(E,p),(E.log||t.log).apply(E,p)}return _.namespace=u,_.useColors=t.useColors(),_.color=t.selectColor(u),_.extend=n,_.destroy=t.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>c!==null?c:(y!==t.namespaces&&(y=t.namespaces,h=t.enabled(u)),h),set:p=>{c=p}}),typeof t.init=="function"&&t.init(_),_}function n(u,a){let c=t(this.namespace+(typeof a>"u"?":":a)+u);return c.log=this.log,c}function i(u){t.save(u),t.namespaces=u,t.names=[],t.skips=[];let a,c=(typeof u=="string"?u:"").split(/[\s,]+/),y=c.length;for(a=0;a<y;a++)!c[a]||(u=c[a].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.slice(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function o(){let u=[...t.names.map(f),...t.skips.map(f).map(a=>"-"+a)].join(",");return t.enable(""),u}function s(u){if(u[u.length-1]==="*")return!0;let a,c;for(a=0,c=t.skips.length;a<c;a++)if(t.skips[a].test(u))return!1;for(a=0,c=t.names.length;a<c;a++)if(t.names[a].test(u))return!0;return!1}function f(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function l(u){return u instanceof Error?u.stack||u.message:u}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}dn.exports=ts});var ct=x((P,ft)=>{m();P.formatArgs=ns;P.save=is;P.load=os;P.useColors=rs;P.storage=ss();P.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();P.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function rs(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function ns(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+ft.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}P.log=console.debug||console.log||(()=>{});function is(r){try{r?P.storage.setItem("debug",r):P.storage.removeItem("debug")}catch{}}function os(){let r;try{r=P.storage.getItem("debug")}catch{}return!r&&typeof v<"u"&&"env"in v&&(r=v.env.DEBUG),r}function ss(){try{return localStorage}catch{}}ft.exports=pn()(P);var{formatters:as}=ft.exports;as.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var yn=x((hf,gn)=>{m();gn.exports=function(){if(typeof globalThis>"u")return null;var e={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}});var Vt=x((Yt,wn)=>{m();var lt=ce(),J=lt.Buffer;function _n(r,e){for(var t in r)e[t]=r[t]}J.from&&J.alloc&&J.allocUnsafe&&J.allocUnsafeSlow?wn.exports=lt:(_n(lt,Yt),Yt.Buffer=de);function de(r,e,t){return J(r,e,t)}de.prototype=Object.create(J.prototype);_n(J,de);de.from=function(r,e,t){if(typeof r=="number")throw new TypeError("Argument must not be a number");return J(r,e,t)};de.alloc=function(r,e,t){if(typeof r!="number")throw new TypeError("Argument must be a number");var n=J(r);return e!==void 0?typeof t=="string"?n.fill(e,t):n.fill(e):n.fill(0),n};de.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return J(r)};de.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return lt.SlowBuffer(r)}});var je=x((gf,zt)=>{"use strict";m();var Jt=65536,us=4294967295;function fs(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var cs=Vt().Buffer,ht=R.crypto||R.msCrypto;ht&&ht.getRandomValues?zt.exports=ls:zt.exports=fs;function ls(r,e){if(r>us)throw new RangeError("requested too many random bytes");var t=cs.allocUnsafe(r);if(r>0)if(r>Jt)for(var n=0;n<r;n+=Jt)ht.getRandomValues(t.slice(n,n+Jt));else ht.getRandomValues(t);return typeof e=="function"?v.nextTick(function(){e(null,t)}):t}});var qe=x((_f,Kt)=>{"use strict";m();var ke=typeof Reflect=="object"?Reflect:null,mn=ke&&typeof ke.apply=="function"?ke.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},dt;ke&&typeof ke.ownKeys=="function"?dt=ke.ownKeys:Object.getOwnPropertySymbols?dt=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:dt=function(e){return Object.getOwnPropertyNames(e)};function hs(r){console&&console.warn&&console.warn(r)}var En=Number.isNaN||function(e){return e!==e};function O(){O.init.call(this)}Kt.exports=O;Kt.exports.once=ys;O.EventEmitter=O;O.prototype._events=void 0;O.prototype._eventsCount=0;O.prototype._maxListeners=void 0;var bn=10;function pt(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(O,"defaultMaxListeners",{enumerable:!0,get:function(){return bn},set:function(r){if(typeof r!="number"||r<0||En(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");bn=r}});O.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};O.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||En(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function vn(r){return r._maxListeners===void 0?O.defaultMaxListeners:r._maxListeners}O.prototype.getMaxListeners=function(){return vn(this)};O.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var f=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw f.context=s,f}var l=o[e];if(l===void 0)return!1;if(typeof l=="function")mn(l,this,t);else for(var d=l.length,u=Tn(l,d),n=0;n<d;++n)mn(u[n],this,t);return!0};function Rn(r,e,t,n){var i,o,s;if(pt(t),o=r._events,o===void 0?(o=r._events=Object.create(null),r._eventsCount=0):(o.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),s=o[e]),s===void 0)s=o[e]=t,++r._eventsCount;else if(typeof s=="function"?s=o[e]=n?[t,s]:[s,t]:n?s.unshift(t):s.push(t),i=vn(r),i>0&&s.length>i&&!s.warned){s.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=r,f.type=e,f.count=s.length,hs(f)}return r}O.prototype.addListener=function(e,t){return Rn(this,e,t,!1)};O.prototype.on=O.prototype.addListener;O.prototype.prependListener=function(e,t){return Rn(this,e,t,!0)};function ds(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Cn(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=ds.bind(n);return i.listener=t,n.wrapFn=i,i}O.prototype.once=function(e,t){return pt(t),this.on(e,Cn(this,e,t)),this};O.prototype.prependOnceListener=function(e,t){return pt(t),this.prependListener(e,Cn(this,e,t)),this};O.prototype.removeListener=function(e,t){var n,i,o,s,f;if(pt(t),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(o=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){f=n[s].listener,o=s;break}if(o<0)return this;o===0?n.shift():ps(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,f||t)}return this};O.prototype.off=O.prototype.removeListener;O.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function Sn(r,e,t){var n=r._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?gs(i):Tn(i,i.length)}O.prototype.listeners=function(e){return Sn(this,e,!0)};O.prototype.rawListeners=function(e){return Sn(this,e,!1)};O.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):xn.call(r,e)};O.prototype.listenerCount=xn;function xn(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}O.prototype.eventNames=function(){return this._eventsCount>0?dt(this._events):[]};function Tn(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function ps(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function gs(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function ys(r,e){return new Promise(function(t,n){function i(s){r.removeListener(e,o),n(s)}function o(){typeof r.removeListener=="function"&&r.removeListener("error",i),t([].slice.call(arguments))}An(r,e,o,{once:!0}),e!=="error"&&_s(r,i,{once:!0})})}function _s(r,e,t){typeof r.on=="function"&&An(r,"error",e,t)}function An(r,e,t,n){if(typeof r.on=="function")n.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function i(o){n.once&&r.removeEventListener(e,i),t(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}});var Xt=x((mf,kn)=>{m();kn.exports=qe().EventEmitter});var Qt=x(()=>{m()});var Ln=x((Cf,On)=>{"use strict";m();function In(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function ws(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?In(Object(t),!0).forEach(function(n){ms(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):In(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function ms(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function bs(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Bn(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function Es(r,e,t){return e&&Bn(r.prototype,e),t&&Bn(r,t),r}var vs=ce(),gt=vs.Buffer,Rs=Qt(),Zt=Rs.inspect,Cs=Zt&&Zt.custom||"inspect";function Ss(r,e,t){gt.prototype.copy.call(r,e,t)}On.exports=function(){function r(){bs(this,r),this.head=null,this.tail=null,this.length=0}return Es(r,[{key:"push",value:function(t){var n={data:t,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(t){var n={data:t,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=t+n.data;return i}},{key:"concat",value:function(t){if(this.length===0)return gt.alloc(0);for(var n=gt.allocUnsafe(t>>>0),i=this.head,o=0;i;)Ss(i.data,n,o),o+=i.data.length,i=i.next;return n}},{key:"consume",value:function(t,n){var i;return t<this.head.data.length?(i=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):t===this.head.data.length?i=this.shift():i=n?this._getString(t):this._getBuffer(t),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var n=this.head,i=1,o=n.data;for(t-=o.length;n=n.next;){var s=n.data,f=t>s.length?s.length:t;if(f===s.length?o+=s:o+=s.slice(0,t),t-=f,t===0){f===s.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=s.slice(f));break}++i}return this.length-=i,o}},{key:"_getBuffer",value:function(t){var n=gt.allocUnsafe(t),i=this.head,o=1;for(i.data.copy(n),t-=i.data.length;i=i.next;){var s=i.data,f=t>s.length?s.length:t;if(s.copy(n,n.length-t,0,f),t-=f,t===0){f===s.length?(++o,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=s.slice(f));break}++o}return this.length-=o,n}},{key:Cs,value:function(t,n){return Zt(this,ws({},n,{depth:0,customInspect:!1}))}}]),r}()});var tr=x((xf,Nn)=>{"use strict";m();function xs(r,e){var t=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,v.nextTick(er,this,r)):v.nextTick(er,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(o){!e&&o?t._writableState?t._writableState.errorEmitted?v.nextTick(yt,t):(t._writableState.errorEmitted=!0,v.nextTick(Fn,t,o)):v.nextTick(Fn,t,o):e?(v.nextTick(yt,t),e(o)):v.nextTick(yt,t)}),this)}function Fn(r,e){er(r,e),yt(r)}function yt(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function Ts(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function er(r,e){r.emit("error",e)}function As(r,e){var t=r._readableState,n=r._writableState;t&&t.autoDestroy||n&&n.autoDestroy?r.destroy(e):r.emit("error",e)}Nn.exports={destroy:xs,undestroy:Ts,errorOrDestroy:As}});var pe=x((Af,Un)=>{"use strict";m();function ks(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}var Dn={};function q(r,e,t){t||(t=Error);function n(o,s,f){return typeof e=="string"?e:e(o,s,f)}var i=function(o){ks(s,o);function s(f,l,d){return o.call(this,n(f,l,d))||this}return s}(t);i.prototype.name=t.name,i.prototype.code=r,Dn[r]=i}function Mn(r,e){if(Array.isArray(r)){var t=r.length;return r=r.map(function(n){return String(n)}),t>2?"one of ".concat(e," ").concat(r.slice(0,t-1).join(", "),", or ")+r[t-1]:t===2?"one of ".concat(e," ").concat(r[0]," or ").concat(r[1]):"of ".concat(e," ").concat(r[0])}else return"of ".concat(e," ").concat(String(r))}function Is(r,e,t){return r.substr(!t||t<0?0:+t,e.length)===e}function Bs(r,e,t){return(t===void 0||t>r.length)&&(t=r.length),r.substring(t-e.length,t)===e}function Os(r,e,t){return typeof t!="number"&&(t=0),t+e.length>r.length?!1:r.indexOf(e,t)!==-1}q("ERR_INVALID_OPT_VALUE",function(r,e){return'The value "'+e+'" is invalid for option "'+r+'"'},TypeError);q("ERR_INVALID_ARG_TYPE",function(r,e,t){var n;typeof e=="string"&&Is(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(Bs(r," argument"))i="The ".concat(r," ").concat(n," ").concat(Mn(e,"type"));else{var o=Os(r,".")?"property":"argument";i='The "'.concat(r,'" ').concat(o," ").concat(n," ").concat(Mn(e,"type"))}return i+=". Received type ".concat(typeof t),i},TypeError);q("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");q("ERR_METHOD_NOT_IMPLEMENTED",function(r){return"The "+r+" method is not implemented"});q("ERR_STREAM_PREMATURE_CLOSE","Premature close");q("ERR_STREAM_DESTROYED",function(r){return"Cannot call "+r+" after a stream was destroyed"});q("ERR_MULTIPLE_CALLBACK","Callback called multiple times");q("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");q("ERR_STREAM_WRITE_AFTER_END","write after end");q("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);q("ERR_UNKNOWN_ENCODING",function(r){return"Unknown encoding: "+r},TypeError);q("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Un.exports.codes=Dn});var rr=x((If,Pn)=>{"use strict";m();var Ls=pe().codes.ERR_INVALID_OPT_VALUE;function Fs(r,e,t){return r.highWaterMark!=null?r.highWaterMark:e?r[t]:null}function Ns(r,e,t,n){var i=Fs(e,n,t);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var o=n?t:"highWaterMark";throw new Ls(o,i)}return Math.floor(i)}return r.objectMode?16:16*1024}Pn.exports={getHighWaterMark:Ns}});var Ie=x((Of,nr)=>{m();typeof Object.create=="function"?nr.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:nr.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}});var qn=x((Ff,jn)=>{m();jn.exports=Ms;function Ms(r,e){if(ir("noDeprecation"))return r;var t=!1;function n(){if(!t){if(ir("throwDeprecation"))throw new Error(e);ir("traceDeprecation")?console.trace(e):console.warn(e),t=!0}return r.apply(this,arguments)}return n}function ir(r){try{if(!R.localStorage)return!1}catch{return!1}var e=R.localStorage[r];return e==null?!1:String(e).toLowerCase()==="true"}});var ar=x((Mf,Vn)=>{"use strict";m();Vn.exports=L;function Hn(r){var e=this;this.next=null,this.entry=null,this.finish=function(){fa(e,r)}}var Be;L.WritableState=He;var Ds={deprecate:qn()},$n=Xt(),wt=ce().Buffer,Us=R.Uint8Array||function(){};function Ps(r){return wt.from(r)}function js(r){return wt.isBuffer(r)||r instanceof Us}var sr=tr(),qs=rr(),Ws=qs.getHighWaterMark,ne=pe().codes,Hs=ne.ERR_INVALID_ARG_TYPE,$s=ne.ERR_METHOD_NOT_IMPLEMENTED,Gs=ne.ERR_MULTIPLE_CALLBACK,Ys=ne.ERR_STREAM_CANNOT_PIPE,Vs=ne.ERR_STREAM_DESTROYED,Js=ne.ERR_STREAM_NULL_VALUES,zs=ne.ERR_STREAM_WRITE_AFTER_END,Ks=ne.ERR_UNKNOWN_ENCODING,Oe=sr.errorOrDestroy;Ie()(L,$n);function Xs(){}function He(r,e,t){Be=Be||ge(),r=r||{},typeof t!="boolean"&&(t=e instanceof Be),this.objectMode=!!r.objectMode,t&&(this.objectMode=this.objectMode||!!r.writableObjectMode),this.highWaterMark=Ws(this,r,"writableHighWaterMark",t),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=r.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){ia(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=r.emitClose!==!1,this.autoDestroy=!!r.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new Hn(this)}He.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};(function(){try{Object.defineProperty(He.prototype,"buffer",{get:Ds.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var _t;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(_t=Function.prototype[Symbol.hasInstance],Object.defineProperty(L,Symbol.hasInstance,{value:function(e){return _t.call(this,e)?!0:this!==L?!1:e&&e._writableState instanceof He}})):_t=function(e){return e instanceof this};function L(r){Be=Be||ge();var e=this instanceof Be;if(!e&&!_t.call(L,this))return new L(r);this._writableState=new He(r,this,e),this.writable=!0,r&&(typeof r.write=="function"&&(this._write=r.write),typeof r.writev=="function"&&(this._writev=r.writev),typeof r.destroy=="function"&&(this._destroy=r.destroy),typeof r.final=="function"&&(this._final=r.final)),$n.call(this)}L.prototype.pipe=function(){Oe(this,new Ys)};function Qs(r,e){var t=new zs;Oe(r,t),v.nextTick(e,t)}function Zs(r,e,t,n){var i;return t===null?i=new Js:typeof t!="string"&&!e.objectMode&&(i=new Hs("chunk",["string","Buffer"],t)),i?(Oe(r,i),v.nextTick(n,i),!1):!0}L.prototype.write=function(r,e,t){var n=this._writableState,i=!1,o=!n.objectMode&&js(r);return o&&!wt.isBuffer(r)&&(r=Ps(r)),typeof e=="function"&&(t=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),typeof t!="function"&&(t=Xs),n.ending?Qs(this,t):(o||Zs(this,n,r,t))&&(n.pendingcb++,i=ta(this,n,o,r,e,t)),i};L.prototype.cork=function(){this._writableState.corked++};L.prototype.uncork=function(){var r=this._writableState;r.corked&&(r.corked--,!r.writing&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&Gn(this,r))};L.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new Ks(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(L.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ea(r,e,t){return!r.objectMode&&r.decodeStrings!==!1&&typeof e=="string"&&(e=wt.from(e,t)),e}Object.defineProperty(L.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ta(r,e,t,n,i,o){if(!t){var s=ea(e,n,i);n!==s&&(t=!0,i="buffer",n=s)}var f=e.objectMode?1:n.length;e.length+=f;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var d=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:t,callback:o,next:null},d?d.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else or(r,e,!1,f,n,i,o);return l}function or(r,e,t,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Vs("write")):t?r._writev(i,e.onwrite):r._write(i,o,e.onwrite),e.sync=!1}function ra(r,e,t,n,i){--e.pendingcb,t?(v.nextTick(i,n),v.nextTick(We,r,e),r._writableState.errorEmitted=!0,Oe(r,n)):(i(n),r._writableState.errorEmitted=!0,Oe(r,n),We(r,e))}function na(r){r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0}function ia(r,e){var t=r._writableState,n=t.sync,i=t.writecb;if(typeof i!="function")throw new Gs;if(na(t),e)ra(r,t,n,e,i);else{var o=Yn(t)||r.destroyed;!o&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&Gn(r,t),n?v.nextTick(Wn,r,t,o,i):Wn(r,t,o,i)}}function Wn(r,e,t,n){t||oa(r,e),e.pendingcb--,n(),We(r,e)}function oa(r,e){e.length===0&&e.needDrain&&(e.needDrain=!1,r.emit("drain"))}function Gn(r,e){e.bufferProcessing=!0;var t=e.bufferedRequest;if(r._writev&&t&&t.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=t;for(var s=0,f=!0;t;)i[s]=t,t.isBuf||(f=!1),t=t.next,s+=1;i.allBuffers=f,or(r,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new Hn(e),e.bufferedRequestCount=0}else{for(;t;){var l=t.chunk,d=t.encoding,u=t.callback,a=e.objectMode?1:l.length;if(or(r,e,!1,a,l,d,u),t=t.next,e.bufferedRequestCount--,e.writing)break}t===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=t,e.bufferProcessing=!1}L.prototype._write=function(r,e,t){t(new $s("_write()"))};L.prototype._writev=null;L.prototype.end=function(r,e,t){var n=this._writableState;return typeof r=="function"?(t=r,r=null,e=null):typeof e=="function"&&(t=e,e=null),r!=null&&this.write(r,e),n.corked&&(n.corked=1,this.uncork()),n.ending||ua(this,n,t),this};Object.defineProperty(L.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Yn(r){return r.ending&&r.length===0&&r.bufferedRequest===null&&!r.finished&&!r.writing}function sa(r,e){r._final(function(t){e.pendingcb--,t&&Oe(r,t),e.prefinished=!0,r.emit("prefinish"),We(r,e)})}function aa(r,e){!e.prefinished&&!e.finalCalled&&(typeof r._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,v.nextTick(sa,r,e)):(e.prefinished=!0,r.emit("prefinish")))}function We(r,e){var t=Yn(e);if(t&&(aa(r,e),e.pendingcb===0&&(e.finished=!0,r.emit("finish"),e.autoDestroy))){var n=r._readableState;(!n||n.autoDestroy&&n.endEmitted)&&r.destroy()}return t}function ua(r,e,t){e.ending=!0,We(r,e),t&&(e.finished?v.nextTick(t):r.once("finish",t)),e.ended=!0,r.writable=!1}function fa(r,e,t){var n=r.entry;for(r.entry=null;n;){var i=n.callback;e.pendingcb--,i(t),n=n.next}e.corkedRequestsFree.next=r}Object.defineProperty(L.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});L.prototype.destroy=sr.destroy;L.prototype._undestroy=sr.undestroy;L.prototype._destroy=function(r,e){e(r)}});var ge=x((Uf,zn)=>{"use strict";m();var ca=Object.keys||function(r){var e=[];for(var t in r)e.push(t);return e};zn.exports=z;var Jn=cr(),fr=ar();Ie()(z,Jn);for(ur=ca(fr.prototype),mt=0;mt<ur.length;mt++)bt=ur[mt],z.prototype[bt]||(z.prototype[bt]=fr.prototype[bt]);var ur,bt,mt;function z(r){if(!(this instanceof z))return new z(r);Jn.call(this,r),fr.call(this,r),this.allowHalfOpen=!0,r&&(r.readable===!1&&(this.readable=!1),r.writable===!1&&(this.writable=!1),r.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",la)))}Object.defineProperty(z.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(z.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(z.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function la(){this._writableState.ended||v.nextTick(ha,this)}function ha(r){r.end()}Object.defineProperty(z.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var dr=x(Xn=>{"use strict";m();var hr=Vt().Buffer,Kn=hr.isEncoding||function(r){switch(r=""+r,r&&r.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function da(r){if(!r)return"utf8";for(var e;;)switch(r){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return r;default:if(e)return;r=(""+r).toLowerCase(),e=!0}}function pa(r){var e=da(r);if(typeof e!="string"&&(hr.isEncoding===Kn||!Kn(r)))throw new Error("Unknown encoding: "+r);return e||r}Xn.StringDecoder=$e;function $e(r){this.encoding=pa(r);var e;switch(this.encoding){case"utf16le":this.text=ba,this.end=Ea,e=4;break;case"utf8":this.fillLast=_a,e=4;break;case"base64":this.text=va,this.end=Ra,e=3;break;default:this.write=Ca,this.end=Sa;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=hr.allocUnsafe(e)}$e.prototype.write=function(r){if(r.length===0)return"";var e,t;if(this.lastNeed){if(e=this.fillLast(r),e===void 0)return"";t=this.lastNeed,this.lastNeed=0}else t=0;return t<r.length?e?e+this.text(r,t):this.text(r,t):e||""};$e.prototype.end=ma;$e.prototype.text=wa;$e.prototype.fillLast=function(r){if(this.lastNeed<=r.length)return r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,r.length),this.lastNeed-=r.length};function lr(r){return r<=127?0:r>>5===6?2:r>>4===14?3:r>>3===30?4:r>>6===2?-1:-2}function ga(r,e,t){var n=e.length-1;if(n<t)return 0;var i=lr(e[n]);return i>=0?(i>0&&(r.lastNeed=i-1),i):--n<t||i===-2?0:(i=lr(e[n]),i>=0?(i>0&&(r.lastNeed=i-2),i):--n<t||i===-2?0:(i=lr(e[n]),i>=0?(i>0&&(i===2?i=0:r.lastNeed=i-3),i):0))}function ya(r,e,t){if((e[0]&192)!==128)return r.lastNeed=0,"\uFFFD";if(r.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return r.lastNeed=1,"\uFFFD";if(r.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return r.lastNeed=2,"\uFFFD"}}function _a(r){var e=this.lastTotal-this.lastNeed,t=ya(this,r,e);if(t!==void 0)return t;if(this.lastNeed<=r.length)return r.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,e,0,r.length),this.lastNeed-=r.length}function wa(r,e){var t=ga(this,r,e);if(!this.lastNeed)return r.toString("utf8",e);this.lastTotal=t;var n=r.length-(t-this.lastNeed);return r.copy(this.lastChar,0,n),r.toString("utf8",e,n)}function ma(r){var e=r&&r.length?this.write(r):"";return this.lastNeed?e+"\uFFFD":e}function ba(r,e){if((r.length-e)%2===0){var t=r.toString("utf16le",e);if(t){var n=t.charCodeAt(t.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1],t.slice(0,-1)}return t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=r[r.length-1],r.toString("utf16le",e,r.length-1)}function Ea(r){var e=r&&r.length?this.write(r):"";if(this.lastNeed){var t=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,t)}return e}function va(r,e){var t=(r.length-e)%3;return t===0?r.toString("base64",e):(this.lastNeed=3-t,this.lastTotal=3,t===1?this.lastChar[0]=r[r.length-1]:(this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1]),r.toString("base64",e,r.length-t))}function Ra(r){var e=r&&r.length?this.write(r):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function Ca(r){return r.toString(this.encoding)}function Sa(r){return r&&r.length?this.write(r):""}});var Et=x((Wf,ei)=>{"use strict";m();var Qn=pe().codes.ERR_STREAM_PREMATURE_CLOSE;function xa(r){var e=!1;return function(){if(!e){e=!0;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];r.apply(this,n)}}}function Ta(){}function Aa(r){return r.setHeader&&typeof r.abort=="function"}function Zn(r,e,t){if(typeof e=="function")return Zn(r,null,e);e||(e={}),t=xa(t||Ta);var n=e.readable||e.readable!==!1&&r.readable,i=e.writable||e.writable!==!1&&r.writable,o=function(){r.writable||f()},s=r._writableState&&r._writableState.finished,f=function(){i=!1,s=!0,n||t.call(r)},l=r._readableState&&r._readableState.endEmitted,d=function(){n=!1,l=!0,i||t.call(r)},u=function(h){t.call(r,h)},a=function(){var h;if(n&&!l)return(!r._readableState||!r._readableState.ended)&&(h=new Qn),t.call(r,h);if(i&&!s)return(!r._writableState||!r._writableState.ended)&&(h=new Qn),t.call(r,h)},c=function(){r.req.on("finish",f)};return Aa(r)?(r.on("complete",f),r.on("abort",a),r.req?c():r.on("request",c)):i&&!r._writableState&&(r.on("end",o),r.on("close",o)),r.on("end",d),r.on("finish",f),e.error!==!1&&r.on("error",u),r.on("close",a),function(){r.removeListener("complete",f),r.removeListener("abort",a),r.removeListener("request",c),r.req&&r.req.removeListener("finish",f),r.removeListener("end",o),r.removeListener("close",o),r.removeListener("finish",f),r.removeListener("end",d),r.removeListener("error",u),r.removeListener("close",a)}}ei.exports=Zn});var ri=x(($f,ti)=>{"use strict";m();var vt;function ie(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var ka=Et(),oe=Symbol("lastResolve"),ye=Symbol("lastReject"),Ge=Symbol("error"),Rt=Symbol("ended"),_e=Symbol("lastPromise"),pr=Symbol("handlePromise"),we=Symbol("stream");function se(r,e){return{value:r,done:e}}function Ia(r){var e=r[oe];if(e!==null){var t=r[we].read();t!==null&&(r[_e]=null,r[oe]=null,r[ye]=null,e(se(t,!1)))}}function Ba(r){v.nextTick(Ia,r)}function Oa(r,e){return function(t,n){r.then(function(){if(e[Rt]){t(se(void 0,!0));return}e[pr](t,n)},n)}}var La=Object.getPrototypeOf(function(){}),Fa=Object.setPrototypeOf((vt={get stream(){return this[we]},next:function(){var e=this,t=this[Ge];if(t!==null)return Promise.reject(t);if(this[Rt])return Promise.resolve(se(void 0,!0));if(this[we].destroyed)return new Promise(function(s,f){v.nextTick(function(){e[Ge]?f(e[Ge]):s(se(void 0,!0))})});var n=this[_e],i;if(n)i=new Promise(Oa(n,this));else{var o=this[we].read();if(o!==null)return Promise.resolve(se(o,!1));i=new Promise(this[pr])}return this[_e]=i,i}},ie(vt,Symbol.asyncIterator,function(){return this}),ie(vt,"return",function(){var e=this;return new Promise(function(t,n){e[we].destroy(null,function(i){if(i){n(i);return}t(se(void 0,!0))})})}),vt),La),Na=function(e){var t,n=Object.create(Fa,(t={},ie(t,we,{value:e,writable:!0}),ie(t,oe,{value:null,writable:!0}),ie(t,ye,{value:null,writable:!0}),ie(t,Ge,{value:null,writable:!0}),ie(t,Rt,{value:e._readableState.endEmitted,writable:!0}),ie(t,pr,{value:function(o,s){var f=n[we].read();f?(n[_e]=null,n[oe]=null,n[ye]=null,o(se(f,!1))):(n[oe]=o,n[ye]=s)},writable:!0}),t));return n[_e]=null,ka(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var o=n[ye];o!==null&&(n[_e]=null,n[oe]=null,n[ye]=null,o(i)),n[Ge]=i;return}var s=n[oe];s!==null&&(n[_e]=null,n[oe]=null,n[ye]=null,s(se(void 0,!0))),n[Rt]=!0}),e.on("readable",Ba.bind(null,n)),n};ti.exports=Na});var ii=x((Yf,ni)=>{m();ni.exports=function(){throw new Error("Readable.from is not available in the browser")}});var cr=x((zf,pi)=>{"use strict";m();pi.exports=I;var Le;I.ReadableState=ui;var Jf=qe().EventEmitter,ai=function(e,t){return e.listeners(t).length},Ve=Xt(),Ct=ce().Buffer,Ma=R.Uint8Array||function(){};function Da(r){return Ct.from(r)}function Ua(r){return Ct.isBuffer(r)||r instanceof Ma}var gr=Qt(),A;gr&&gr.debuglog?A=gr.debuglog("stream"):A=function(){};var Pa=Ln(),vr=tr(),ja=rr(),qa=ja.getHighWaterMark,St=pe().codes,Wa=St.ERR_INVALID_ARG_TYPE,Ha=St.ERR_STREAM_PUSH_AFTER_EOF,$a=St.ERR_METHOD_NOT_IMPLEMENTED,Ga=St.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Fe,yr,_r;Ie()(I,Ve);var Ye=vr.errorOrDestroy,wr=["error","close","destroy","pause","resume"];function Ya(r,e,t){if(typeof r.prependListener=="function")return r.prependListener(e,t);!r._events||!r._events[e]?r.on(e,t):Array.isArray(r._events[e])?r._events[e].unshift(t):r._events[e]=[t,r._events[e]]}function ui(r,e,t){Le=Le||ge(),r=r||{},typeof t!="boolean"&&(t=e instanceof Le),this.objectMode=!!r.objectMode,t&&(this.objectMode=this.objectMode||!!r.readableObjectMode),this.highWaterMark=qa(this,r,"readableHighWaterMark",t),this.buffer=new Pa,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=r.emitClose!==!1,this.autoDestroy=!!r.autoDestroy,this.destroyed=!1,this.defaultEncoding=r.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,r.encoding&&(Fe||(Fe=dr().StringDecoder),this.decoder=new Fe(r.encoding),this.encoding=r.encoding)}function I(r){if(Le=Le||ge(),!(this instanceof I))return new I(r);var e=this instanceof Le;this._readableState=new ui(r,this,e),this.readable=!0,r&&(typeof r.read=="function"&&(this._read=r.read),typeof r.destroy=="function"&&(this._destroy=r.destroy)),Ve.call(this)}Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});I.prototype.destroy=vr.destroy;I.prototype._undestroy=vr.undestroy;I.prototype._destroy=function(r,e){e(r)};I.prototype.push=function(r,e){var t=this._readableState,n;return t.objectMode?n=!0:typeof r=="string"&&(e=e||t.defaultEncoding,e!==t.encoding&&(r=Ct.from(r,e),e=""),n=!0),fi(this,r,e,!1,n)};I.prototype.unshift=function(r){return fi(this,r,null,!0,!1)};function fi(r,e,t,n,i){A("readableAddChunk",e);var o=r._readableState;if(e===null)o.reading=!1,za(r,o);else{var s;if(i||(s=Va(o,e)),s)Ye(r,s);else if(o.objectMode||e&&e.length>0)if(typeof e!="string"&&!o.objectMode&&Object.getPrototypeOf(e)!==Ct.prototype&&(e=Da(e)),n)o.endEmitted?Ye(r,new Ga):mr(r,o,e,!0);else if(o.ended)Ye(r,new Ha);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!t?(e=o.decoder.write(e),o.objectMode||e.length!==0?mr(r,o,e,!1):Er(r,o)):mr(r,o,e,!1)}else n||(o.reading=!1,Er(r,o))}return!o.ended&&(o.length<o.highWaterMark||o.length===0)}function mr(r,e,t,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,r.emit("data",t)):(e.length+=e.objectMode?1:t.length,n?e.buffer.unshift(t):e.buffer.push(t),e.needReadable&&xt(r)),Er(r,e)}function Va(r,e){var t;return!Ua(e)&&typeof e!="string"&&e!==void 0&&!r.objectMode&&(t=new Wa("chunk",["string","Buffer","Uint8Array"],e)),t}I.prototype.isPaused=function(){return this._readableState.flowing===!1};I.prototype.setEncoding=function(r){Fe||(Fe=dr().StringDecoder);var e=new Fe(r);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var t=this._readableState.buffer.head,n="";t!==null;)n+=e.write(t.data),t=t.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var oi=1073741824;function Ja(r){return r>=oi?r=oi:(r--,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r++),r}function si(r,e){return r<=0||e.length===0&&e.ended?0:e.objectMode?1:r!==r?e.flowing&&e.length?e.buffer.head.data.length:e.length:(r>e.highWaterMark&&(e.highWaterMark=Ja(r)),r<=e.length?r:e.ended?e.length:(e.needReadable=!0,0))}I.prototype.read=function(r){A("read",r),r=parseInt(r,10);var e=this._readableState,t=r;if(r!==0&&(e.emittedReadable=!1),r===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return A("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?br(this):xt(this),null;if(r=si(r,e),r===0&&e.ended)return e.length===0&&br(this),null;var n=e.needReadable;A("need readable",n),(e.length===0||e.length-r<e.highWaterMark)&&(n=!0,A("length less than watermark",n)),e.ended||e.reading?(n=!1,A("reading or ended",n)):n&&(A("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(r=si(t,e)));var i;return r>0?i=hi(r,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,r=0):(e.length-=r,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),t!==r&&e.ended&&br(this)),i!==null&&this.emit("data",i),i};function za(r,e){if(A("onEofChunk"),!e.ended){if(e.decoder){var t=e.decoder.end();t&&t.length&&(e.buffer.push(t),e.length+=e.objectMode?1:t.length)}e.ended=!0,e.sync?xt(r):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,ci(r)))}}function xt(r){var e=r._readableState;A("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(A("emitReadable",e.flowing),e.emittedReadable=!0,v.nextTick(ci,r))}function ci(r){var e=r._readableState;A("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(r.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,Rr(r)}function Er(r,e){e.readingMore||(e.readingMore=!0,v.nextTick(Ka,r,e))}function Ka(r,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var t=e.length;if(A("maybeReadMore read 0"),r.read(0),t===e.length)break}e.readingMore=!1}I.prototype._read=function(r){Ye(this,new $a("_read()"))};I.prototype.pipe=function(r,e){var t=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=r;break;case 1:n.pipes=[n.pipes,r];break;default:n.pipes.push(r);break}n.pipesCount+=1,A("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&r!==v.stdout&&r!==v.stderr,o=i?f:_;n.endEmitted?v.nextTick(o):t.once("end",o),r.on("unpipe",s);function s(p,E){A("onunpipe"),p===t&&E&&E.hasUnpiped===!1&&(E.hasUnpiped=!0,u())}function f(){A("onend"),r.end()}var l=Xa(t);r.on("drain",l);var d=!1;function u(){A("cleanup"),r.removeListener("close",y),r.removeListener("finish",h),r.removeListener("drain",l),r.removeListener("error",c),r.removeListener("unpipe",s),t.removeListener("end",f),t.removeListener("end",_),t.removeListener("data",a),d=!0,n.awaitDrain&&(!r._writableState||r._writableState.needDrain)&&l()}t.on("data",a);function a(p){A("ondata");var E=r.write(p);A("dest.write",E),E===!1&&((n.pipesCount===1&&n.pipes===r||n.pipesCount>1&&di(n.pipes,r)!==-1)&&!d&&(A("false write response, pause",n.awaitDrain),n.awaitDrain++),t.pause())}function c(p){A("onerror",p),_(),r.removeListener("error",c),ai(r,"error")===0&&Ye(r,p)}Ya(r,"error",c);function y(){r.removeListener("finish",h),_()}r.once("close",y);function h(){A("onfinish"),r.removeListener("close",y),_()}r.once("finish",h);function _(){A("unpipe"),t.unpipe(r)}return r.emit("pipe",t),n.flowing||(A("pipe resume"),t.resume()),r};function Xa(r){return function(){var t=r._readableState;A("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&ai(r,"data")&&(t.flowing=!0,Rr(r))}}I.prototype.unpipe=function(r){var e=this._readableState,t={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return r&&r!==e.pipes?this:(r||(r=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,r&&r.emit("unpipe",this,t),this);if(!r){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=di(e.pipes,r);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),r.emit("unpipe",this,t),this)};I.prototype.on=function(r,e){var t=Ve.prototype.on.call(this,r,e),n=this._readableState;return r==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):r==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,A("on readable",n.length,n.reading),n.length?xt(this):n.reading||v.nextTick(Qa,this)),t};I.prototype.addListener=I.prototype.on;I.prototype.removeListener=function(r,e){var t=Ve.prototype.removeListener.call(this,r,e);return r==="readable"&&v.nextTick(li,this),t};I.prototype.removeAllListeners=function(r){var e=Ve.prototype.removeAllListeners.apply(this,arguments);return(r==="readable"||r===void 0)&&v.nextTick(li,this),e};function li(r){var e=r._readableState;e.readableListening=r.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:r.listenerCount("data")>0&&r.resume()}function Qa(r){A("readable nexttick read 0"),r.read(0)}I.prototype.resume=function(){var r=this._readableState;return r.flowing||(A("resume"),r.flowing=!r.readableListening,Za(this,r)),r.paused=!1,this};function Za(r,e){e.resumeScheduled||(e.resumeScheduled=!0,v.nextTick(eu,r,e))}function eu(r,e){A("resume",e.reading),e.reading||r.read(0),e.resumeScheduled=!1,r.emit("resume"),Rr(r),e.flowing&&!e.reading&&r.read(0)}I.prototype.pause=function(){return A("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(A("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Rr(r){var e=r._readableState;for(A("flow",e.flowing);e.flowing&&r.read()!==null;);}I.prototype.wrap=function(r){var e=this,t=this._readableState,n=!1;r.on("end",function(){if(A("wrapped end"),t.decoder&&!t.ended){var s=t.decoder.end();s&&s.length&&e.push(s)}e.push(null)}),r.on("data",function(s){if(A("wrapped data"),t.decoder&&(s=t.decoder.write(s)),!(t.objectMode&&s==null)&&!(!t.objectMode&&(!s||!s.length))){var f=e.push(s);f||(n=!0,r.pause())}});for(var i in r)this[i]===void 0&&typeof r[i]=="function"&&(this[i]=function(f){return function(){return r[f].apply(r,arguments)}}(i));for(var o=0;o<wr.length;o++)r.on(wr[o],this.emit.bind(this,wr[o]));return this._read=function(s){A("wrapped _read",s),n&&(n=!1,r.resume())},this};typeof Symbol=="function"&&(I.prototype[Symbol.asyncIterator]=function(){return yr===void 0&&(yr=ri()),yr(this)});Object.defineProperty(I.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(I.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(I.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});I._fromList=hi;Object.defineProperty(I.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function hi(r,e){if(e.length===0)return null;var t;return e.objectMode?t=e.buffer.shift():!r||r>=e.length?(e.decoder?t=e.buffer.join(""):e.buffer.length===1?t=e.buffer.first():t=e.buffer.concat(e.length),e.buffer.clear()):t=e.buffer.consume(r,e.decoder),t}function br(r){var e=r._readableState;A("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,v.nextTick(tu,e,r))}function tu(r,e){if(A("endReadableNT",r.endEmitted,r.length),!r.endEmitted&&r.length===0&&(r.endEmitted=!0,e.readable=!1,e.emit("end"),r.autoDestroy)){var t=e._writableState;(!t||t.autoDestroy&&t.finished)&&e.destroy()}}typeof Symbol=="function"&&(I.from=function(r,e){return _r===void 0&&(_r=ii()),_r(I,r,e)});function di(r,e){for(var t=0,n=r.length;t<n;t++)if(r[t]===e)return t;return-1}});var Cr=x((Xf,yi)=>{"use strict";m();yi.exports=Z;var Tt=pe().codes,ru=Tt.ERR_METHOD_NOT_IMPLEMENTED,nu=Tt.ERR_MULTIPLE_CALLBACK,iu=Tt.ERR_TRANSFORM_ALREADY_TRANSFORMING,ou=Tt.ERR_TRANSFORM_WITH_LENGTH_0,At=ge();Ie()(Z,At);function su(r,e){var t=this._transformState;t.transforming=!1;var n=t.writecb;if(n===null)return this.emit("error",new nu);t.writechunk=null,t.writecb=null,e!=null&&this.push(e),n(r);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Z(r){if(!(this instanceof Z))return new Z(r);At.call(this,r),this._transformState={afterTransform:su.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&(typeof r.transform=="function"&&(this._transform=r.transform),typeof r.flush=="function"&&(this._flush=r.flush)),this.on("prefinish",au)}function au(){var r=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,t){gi(r,e,t)}):gi(this,null,null)}Z.prototype.push=function(r,e){return this._transformState.needTransform=!1,At.prototype.push.call(this,r,e)};Z.prototype._transform=function(r,e,t){t(new ru("_transform()"))};Z.prototype._write=function(r,e,t){var n=this._transformState;if(n.writecb=t,n.writechunk=r,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Z.prototype._read=function(r){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Z.prototype._destroy=function(r,e){At.prototype._destroy.call(this,r,function(t){e(t)})};function gi(r,e,t){if(e)return r.emit("error",e);if(t!=null&&r.push(t),r._writableState.length)throw new ou;if(r._transformState.transforming)throw new iu;return r.push(null)}});var mi=x((Zf,wi)=>{"use strict";m();wi.exports=Je;var _i=Cr();Ie()(Je,_i);function Je(r){if(!(this instanceof Je))return new Je(r);_i.call(this,r)}Je.prototype._transform=function(r,e,t){t(null,r)}});var Ci=x((tc,Ri)=>{"use strict";m();var Sr;function uu(r){var e=!1;return function(){e||(e=!0,r.apply(void 0,arguments))}}var vi=pe().codes,fu=vi.ERR_MISSING_ARGS,cu=vi.ERR_STREAM_DESTROYED;function bi(r){if(r)throw r}function lu(r){return r.setHeader&&typeof r.abort=="function"}function hu(r,e,t,n){n=uu(n);var i=!1;r.on("close",function(){i=!0}),Sr===void 0&&(Sr=Et()),Sr(r,{readable:e,writable:t},function(s){if(s)return n(s);i=!0,n()});var o=!1;return function(s){if(!i&&!o){if(o=!0,lu(r))return r.abort();if(typeof r.destroy=="function")return r.destroy();n(s||new cu("pipe"))}}}function Ei(r){r()}function du(r,e){return r.pipe(e)}function pu(r){return!r.length||typeof r[r.length-1]!="function"?bi:r.pop()}function gu(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];var n=pu(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new fu("streams");var i,o=e.map(function(s,f){var l=f<e.length-1,d=f>0;return hu(s,l,d,function(u){i||(i=u),u&&o.forEach(Ei),!l&&(o.forEach(Ei),n(i))})});return e.reduce(du)}Ri.exports=gu});var xr=x((W,Si)=>{m();W=Si.exports=cr();W.Stream=W;W.Readable=W;W.Writable=ar();W.Duplex=ge();W.Transform=Cr();W.PassThrough=mi();W.finished=Et();W.pipeline=Ci()});var Tr=x((ic,Ti)=>{m();var xi;Ti.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:R):r=>(xi||(xi=Promise.resolve())).then(r).catch(e=>setTimeout(()=>{throw e},0))});var Ii=x((sc,ki)=>{"use strict";m();function Ai(r,e){for(let t in e)Object.defineProperty(r,t,{value:e[t],enumerable:!0,configurable:!0});return r}function yu(r,e,t){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof e=="object"&&(t=e,e=""),e&&(t.code=e);try{return Ai(r,t)}catch{t.message=r.message,t.stack=r.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(r)),Ai(new i,t)}}ki.exports=yu});var Ni=x((uc,Fi)=>{m();var _u=ct()("simple-peer"),Li=yn(),Bi=je(),wu=xr(),Ar=Tr(),k=Ii(),{Buffer:mu}=ce(),kr=64*1024,bu=5*1e3,Eu=5*1e3;function Oi(r){return r.replace(/a=ice-options:trickle\s\n/g,"")}function vu(r){console.warn(r)}var ee=class extends wu.Duplex{constructor(e){if(e=Object.assign({allowHalfOpen:!1},e),super(e),this._id=Bi(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||Bi(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||ee.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},ee.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(t=>t),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=e.trickle!==void 0?e.trickle:!0,this.allowHalfTrickle=e.allowHalfTrickle!==void 0?e.allowHalfTrickle:!1,this.iceCompleteTimeout=e.iceCompleteTimeout||bu,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&typeof e.wrtc=="object"?e.wrtc:Li(),!this._wrtc)throw k(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(t){this.destroy(k(t,"ERR_PC_CONSTRUCTOR"));return}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=t=>{this._onIceCandidate(t)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(t=>{this.destroy(k(t,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=t=>{this._setupData(t)},this.streams&&this.streams.forEach(t=>{this.addStream(t)}),this._pc.ontrack=t=>{this._onTrack(t)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(!this.destroying){if(this.destroyed)throw k(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof e=="string")try{e=JSON.parse(e)}catch{e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(t=>{this._addIceCandidate(t)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(t=>{this.destroy(k(t,"ERR_SET_REMOTE_DESCRIPTION"))}),!e.sdp&&!e.candidate&&!e.renegotiate&&!e.transceiverRequest&&this.destroy(k(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(e){let t=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(t).catch(n=>{!t.address||t.address.endsWith(".local")?vu("Ignoring unsupported ICE candidate."):this.destroy(k(n,"ERR_ADD_ICE_CANDIDATE"))})}send(e){if(!this.destroying){if(this.destroyed)throw k(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(e)}}addTransceiver(e,t){if(!this.destroying){if(this.destroyed)throw k(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,t),this._needsNegotiation()}catch(n){this.destroy(k(n,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:e,init:t}})}}addStream(e){if(!this.destroying){if(this.destroyed)throw k(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),e.getTracks().forEach(t=>{this.addTrack(t,e)})}}addTrack(e,t){if(this.destroying)return;if(this.destroyed)throw k(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");let n=this._senderMap.get(e)||new Map,i=n.get(t);if(!i)i=this._pc.addTrack(e,t),n.set(t,i),this._senderMap.set(e,n),this._needsNegotiation();else throw i.removed?k(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):k(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(e,t,n){if(this.destroying)return;if(this.destroyed)throw k(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");let i=this._senderMap.get(e),o=i?i.get(n):null;if(!o)throw k(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,i),o.replaceTrack!=null?o.replaceTrack(t):this.destroy(k(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(e,t){if(this.destroying)return;if(this.destroyed)throw k(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");let n=this._senderMap.get(e),i=n?n.get(t):null;if(!i)throw k(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{i.removed=!0,this._pc.removeTrack(i)}catch(o){o.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(i):this.destroy(k(o,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){if(!this.destroying){if(this.destroyed)throw k(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),e.getTracks().forEach(t=>{this.removeTrack(t,e)})}}_needsNegotiation(){this._debug("_needsNegotiation"),!this._batchedNegotiation&&(this._batchedNegotiation=!0,Ar(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw k(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(e){this._destroy(e,()=>{})}_destroy(e,t){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",e&&(e.message||e)),Ar(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close"),t()}))}_setupData(e){if(!e.channel)return this.destroy(k(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=kr),this.channelName=this._channel.label,this._channel.onmessage=n=>{this._onChannelMessage(n)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=n=>{let i=n.error instanceof Error?n.error:new Error(`Datachannel error: ${n.message} ${n.filename}:${n.lineno}:${n.colno}`);this.destroy(k(i,"ERR_DATA_CHANNEL"))};let t=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(t&&this._onChannelClose(),t=!0):t=!1},Eu)}_read(){}_write(e,t,n){if(this.destroyed)return n(k(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(i){return this.destroy(k(i,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>kr?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=e,this._cb=n}_onFinish(){if(this.destroyed)return;let e=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?e():this.once("connect",e)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(e=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(e.sdp=Oi(e.sdp)),e.sdp=this.sdpTransform(e.sdp);let t=()=>{if(this.destroyed)return;let o=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:o.type,sdp:o.sdp})},n=()=>{this._debug("createOffer success"),!this.destroyed&&(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))},i=o=>{this.destroy(k(o,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(e).then(n).catch(i)}).catch(e=>{this.destroy(k(e,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(e=>{!e.mid&&e.sender.track&&!e.requested&&(e.requested=!0,this.addTransceiver(e.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(e=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(e.sdp=Oi(e.sdp)),e.sdp=this.sdpTransform(e.sdp);let t=()=>{if(this.destroyed)return;let o=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:o.type,sdp:o.sdp}),this.initiator||this._requestMissingTransceivers()},n=()=>{this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))},i=o=>{this.destroy(k(o,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(e).then(n).catch(i)}).catch(e=>{this.destroy(k(e,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(k(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;let e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,t),this.emit("iceStateChange",e,t),(e==="connected"||e==="completed")&&(this._pcReady=!0,this._maybeReady()),e==="failed"&&this.destroy(k(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),e==="closed"&&this.destroy(k(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(e){let t=n=>(Object.prototype.toString.call(n.values)==="[object Array]"&&n.values.forEach(i=>{Object.assign(n,i)}),n);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(n=>{let i=[];n.forEach(o=>{i.push(t(o))}),e(null,i)},n=>e(n)):this._pc.getStats.length>0?this._pc.getStats(n=>{if(this.destroyed)return;let i=[];n.result().forEach(o=>{let s={};o.names().forEach(f=>{s[f]=o.stat(f)}),s.id=o.id,s.type=o.type,s.timestamp=o.timestamp,i.push(t(s))}),e(null,i)},n=>e(n)):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;let e=()=>{this.destroyed||this.getStats((t,n)=>{if(this.destroyed)return;t&&(n=[]);let i={},o={},s={},f=!1;n.forEach(d=>{(d.type==="remotecandidate"||d.type==="remote-candidate")&&(i[d.id]=d),(d.type==="localcandidate"||d.type==="local-candidate")&&(o[d.id]=d),(d.type==="candidatepair"||d.type==="candidate-pair")&&(s[d.id]=d)});let l=d=>{f=!0;let u=o[d.localCandidateId];u&&(u.ip||u.address)?(this.localAddress=u.ip||u.address,this.localPort=Number(u.port)):u&&u.ipAddress?(this.localAddress=u.ipAddress,this.localPort=Number(u.portNumber)):typeof d.googLocalAddress=="string"&&(u=d.googLocalAddress.split(":"),this.localAddress=u[0],this.localPort=Number(u[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let a=i[d.remoteCandidateId];a&&(a.ip||a.address)?(this.remoteAddress=a.ip||a.address,this.remotePort=Number(a.port)):a&&a.ipAddress?(this.remoteAddress=a.ipAddress,this.remotePort=Number(a.portNumber)):typeof d.googRemoteAddress=="string"&&(a=d.googRemoteAddress.split(":"),this.remoteAddress=a[0],this.remotePort=Number(a[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(n.forEach(d=>{d.type==="transport"&&d.selectedCandidatePairId&&l(s[d.selectedCandidatePairId]),(d.type==="googCandidatePair"&&d.googActiveConnection==="true"||(d.type==="candidatepair"||d.type==="candidate-pair")&&d.selected)&&l(d)}),!f&&(!Object.keys(s).length||Object.keys(o).length)){setTimeout(e,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(u){return this.destroy(k(u,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');let d=this._cb;this._cb=null,d(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};e()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>kr||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):!e.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(this.destroyed)return;let t=e.data;t instanceof ArrayBuffer&&(t=mu.from(t)),this.push(t)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);let e=this._cb;this._cb=null,e(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach(t=>{this._debug("on track"),this.emit("track",e.track,t),this._remoteTracks.push({track:e.track,stream:t}),!this._remoteStreams.some(n=>n.id===t.id)&&(this._remoteStreams.push(t),Ar(()=>{this._debug("on stream"),this.emit("stream",t)}))})}_debug(){let e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],_u.apply(null,e)}};ee.WEBRTC_SUPPORT=!!Li();ee.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"};ee.channelConfig={};Fi.exports=ee});var Mi=x(()=>{m()});var ji=x((dc,Pi)=>{m();var Ru=ct()("simple-websocket"),Cu=je(),Su=xr(),Di=Tr(),Ke=Mi(),ze=typeof Ke!="function"?WebSocket:Ke,Ui=64*1024,kt=class extends Su.Duplex{constructor(e={}){if(typeof e=="string"&&(e={url:e}),e=Object.assign({allowHalfOpen:!1},e),super(e),e.url==null&&e.socket==null)throw new Error("Missing required `url` or `socket` option");if(e.url!=null&&e.socket!=null)throw new Error("Must specify either `url` or `socket` option, not both");if(this._id=Cu(4).toString("hex").slice(0,7),this._debug("new websocket: %o",e),this.connected=!1,this.destroyed=!1,this._chunk=null,this._cb=null,this._interval=null,e.socket)this.url=e.socket.url,this._ws=e.socket,this.connected=e.socket.readyState===ze.OPEN;else{this.url=e.url;try{typeof Ke=="function"?this._ws=new ze(e.url,null,{...e,encoding:void 0}):this._ws=new ze(e.url)}catch(t){Di(()=>this.destroy(t));return}}this._ws.binaryType="arraybuffer",e.socket&&this.connected?Di(()=>this._handleOpen()):this._ws.onopen=()=>this._handleOpen(),this._ws.onmessage=t=>this._handleMessage(t),this._ws.onclose=()=>this._handleClose(),this._ws.onerror=t=>this._handleError(t),this._handleFinishBound=()=>this._handleFinish(),this.once("finish",this._handleFinishBound)}send(e){this._ws.send(e)}destroy(e){this._destroy(e,()=>{})}_destroy(e,t){if(!this.destroyed){if(this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this.connected=!1,this.destroyed=!0,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._handleFinishBound&&this.removeListener("finish",this._handleFinishBound),this._handleFinishBound=null,this._ws){let n=this._ws,i=()=>{n.onclose=null};if(n.readyState===ze.CLOSED)i();else try{n.onclose=i,n.close()}catch{i()}n.onopen=null,n.onmessage=null,n.onerror=()=>{}}this._ws=null,e&&this.emit("error",e),this.emit("close"),t()}}_read(){}_write(e,t,n){if(this.destroyed)return n(new Error("cannot write after socket is destroyed"));if(this.connected){try{this.send(e)}catch(i){return this.destroy(i)}typeof Ke!="function"&&this._ws.bufferedAmount>Ui?(this._debug("start backpressure: bufferedAmount %d",this._ws.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=e,this._cb=n}_handleOpen(){if(!(this.connected||this.destroyed)){if(this.connected=!0,this._chunk){try{this.send(this._chunk)}catch(t){return this.destroy(t)}this._chunk=null,this._debug('sent chunk from "write before connect"');let e=this._cb;this._cb=null,e(null)}typeof Ke!="function"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}}_handleMessage(e){if(this.destroyed)return;let t=e.data;t instanceof ArrayBuffer&&(t=S.from(t)),this.push(t)}_handleClose(){this.destroyed||(this._debug("on close"),this.destroy())}_handleError(e){this.destroy(new Error(`Error connecting to ${this.url}`))}_handleFinish(){if(this.destroyed)return;let e=()=>{setTimeout(()=>this.destroy(),1e3)};this.connected?e():this.once("connect",e)}_onInterval(){if(!this._cb||!this._ws||this._ws.bufferedAmount>Ui)return;this._debug("ending backpressure: bufferedAmount %d",this._ws.bufferedAmount);let e=this._cb;this._cb=null,e(null)}_debug(){let e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],Ru.apply(null,e)}};kt.WEBSOCKET_SUPPORT=!!ze;Pi.exports=kt});var qi=x(()=>{m()});var Wi=x(()=>{m()});var Hi=x(me=>{m();me.DEFAULT_ANNOUNCE_PEERS=50;me.MAX_ANNOUNCE_PEERS=82;me.binaryToHex=r=>(typeof r!="string"&&(r=String(r)),S.from(r,"binary").toString("hex"));me.hexToBinary=r=>(typeof r!="string"&&(r=String(r)),S.from(r,"hex").toString("binary"));me.parseUrl=r=>{let e=new URL(r.replace(/^udp:/,"http:"));return r.match(/^udp:/)&&Object.defineProperties(e,{href:{value:e.href.replace(/^http/,"udp")},protocol:{value:e.protocol.replace(/^http/,"udp")},origin:{value:e.origin.replace(/^http/,"udp")}}),e};var xu=Wi();Object.assign(me,xu)});var Gi=x((Rc,$i)=>{m();var Tu=qe(),Ir=class extends Tu{constructor(e,t){super(),this.client=e,this.announceUrl=t,this.interval=null,this.destroyed=!1}setInterval(e){e==null&&(e=this.DEFAULT_ANNOUNCE_INTERVAL),clearInterval(this.interval),e&&(this.interval=setInterval(()=>{this.announce(this.client._defaultAnnounceOpts())},e),this.interval.unref&&this.interval.unref())}};$i.exports=Ir});var Ji=x((Sc,Vi)=>{m();var Au=cn(),H=ct()("bittorrent-tracker:websocket-tracker"),ku=Ni(),Iu=je(),Bu=ji(),Ou=qi(),ae=Hi(),Lu=Gi(),te={},Fu=10*1e3,Nu=60*60*1e3,Mu=5*60*1e3,Du=50*1e3,Xe=class extends Lu{constructor(e,t){super(e,t),H("new websocket tracker %s",t),this.peers={},this.socket=null,this.reconnecting=!1,this.retries=0,this.reconnectTimer=null,this.expectingResponse=!1,this._openSocket()}announce(e){if(this.destroyed||this.reconnecting)return;if(!this.socket.connected){this.socket.once("connect",()=>{this.announce(e)});return}let t=Object.assign({},e,{action:"announce",info_hash:this.client._infoHashBinary,peer_id:this.client._peerIdBinary});if(this._trackerId&&(t.trackerid=this._trackerId),e.event==="stopped"||e.event==="completed")this._send(t);else{let n=Math.min(e.numwant,5);this._generateOffers(n,i=>{t.numwant=n,t.offers=i,this._send(t)})}}scrape(e){if(this.destroyed||this.reconnecting)return;if(!this.socket.connected){this.socket.once("connect",()=>{this.scrape(e)});return}let n={action:"scrape",info_hash:Array.isArray(e.infoHash)&&e.infoHash.length>0?e.infoHash.map(i=>i.toString("binary")):e.infoHash&&e.infoHash.toString("binary")||this.client._infoHashBinary};this._send(n)}destroy(e=Yi){if(this.destroyed)return e(null);this.destroyed=!0,clearInterval(this.interval),clearTimeout(this.reconnectTimer);for(let o in this.peers){let s=this.peers[o];clearTimeout(s.trackerTimeout),s.destroy()}if(this.peers=null,this.socket&&(this.socket.removeListener("connect",this._onSocketConnectBound),this.socket.removeListener("data",this._onSocketDataBound),this.socket.removeListener("close",this._onSocketCloseBound),this.socket.removeListener("error",this._onSocketErrorBound),this.socket=null),this._onSocketConnectBound=null,this._onSocketErrorBound=null,this._onSocketDataBound=null,this._onSocketCloseBound=null,te[this.announceUrl]&&(te[this.announceUrl].consumers-=1),te[this.announceUrl].consumers>0)return e();let t=te[this.announceUrl];delete te[this.announceUrl],t.on("error",Yi),t.once("close",e);let n;if(!this.expectingResponse)return i();n=setTimeout(i,ae.DESTROY_TIMEOUT),t.once("data",i);function i(){n&&(clearTimeout(n),n=null),t.removeListener("data",i),t.destroy(),t=null}}_openSocket(){if(this.destroyed=!1,this.peers||(this.peers={}),this._onSocketConnectBound=()=>{this._onSocketConnect()},this._onSocketErrorBound=e=>{this._onSocketError(e)},this._onSocketDataBound=e=>{this._onSocketData(e)},this._onSocketCloseBound=()=>{this._onSocketClose()},this.socket=te[this.announceUrl],this.socket)te[this.announceUrl].consumers+=1,this.socket.connected&&this._onSocketConnectBound();else{let e=new URL(this.announceUrl),t;this.client._proxyOpts&&(t=e.protocol==="wss:"?this.client._proxyOpts.httpsAgent:this.client._proxyOpts.httpAgent,!t&&this.client._proxyOpts.socksProxy&&(t=new Ou.Agent(Au(this.client._proxyOpts.socksProxy),e.protocol==="wss:"))),this.socket=te[this.announceUrl]=new Bu({url:this.announceUrl,agent:t}),this.socket.consumers=1,this.socket.once("connect",this._onSocketConnectBound)}this.socket.on("data",this._onSocketDataBound),this.socket.once("close",this._onSocketCloseBound),this.socket.once("error",this._onSocketErrorBound)}_onSocketConnect(){this.destroyed||this.reconnecting&&(this.reconnecting=!1,this.retries=0,this.announce(this.client._defaultAnnounceOpts()))}_onSocketData(e){if(!this.destroyed){this.expectingResponse=!1;try{e=JSON.parse(e)}catch{this.client.emit("warning",new Error("Invalid tracker response"));return}e.action==="announce"?this._onAnnounceResponse(e):e.action==="scrape"?this._onScrapeResponse(e):this._onSocketError(new Error(`invalid action in WS response: ${e.action}`))}}_onAnnounceResponse(e){if(e.info_hash!==this.client._infoHashBinary){H("ignoring websocket data from %s for %s (looking for %s: reused socket)",this.announceUrl,ae.binaryToHex(e.info_hash),this.client.infoHash);return}if(e.peer_id&&e.peer_id===this.client._peerIdBinary)return;H("received %s from %s for %s",JSON.stringify(e),this.announceUrl,this.client.infoHash);let t=e["failure reason"];if(t)return this.client.emit("warning",new Error(t));let n=e["warning message"];n&&this.client.emit("warning",new Error(n));let i=e.interval||e["min interval"];i&&this.setInterval(i*1e3);let o=e["tracker id"];if(o&&(this._trackerId=o),e.complete!=null){let f=Object.assign({},e,{announce:this.announceUrl,infoHash:ae.binaryToHex(e.info_hash)});this.client.emit("update",f)}let s;if(e.offer&&e.peer_id&&(H("creating peer (from remote offer)"),s=this._createPeer(),s.id=ae.binaryToHex(e.peer_id),s.once("signal",f=>{let l={action:"announce",info_hash:this.client._infoHashBinary,peer_id:this.client._peerIdBinary,to_peer_id:e.peer_id,answer:f,offer_id:e.offer_id};this._trackerId&&(l.trackerid=this._trackerId),this._send(l)}),this.client.emit("peer",s),s.signal(e.offer)),e.answer&&e.peer_id){let f=ae.binaryToHex(e.offer_id);s=this.peers[f],s?(s.id=ae.binaryToHex(e.peer_id),this.client.emit("peer",s),s.signal(e.answer),clearTimeout(s.trackerTimeout),s.trackerTimeout=null,delete this.peers[f]):H(`got unexpected answer: ${JSON.stringify(e.answer)}`)}}_onScrapeResponse(e){e=e.files||{};let t=Object.keys(e);if(t.length===0){this.client.emit("warning",new Error("invalid scrape response"));return}t.forEach(n=>{let i=Object.assign(e[n],{announce:this.announceUrl,infoHash:ae.binaryToHex(n)});this.client.emit("scrape",i)})}_onSocketClose(){this.destroyed||(this.destroy(),this._startReconnectTimer())}_onSocketError(e){this.destroyed||(this.destroy(),this.client.emit("warning",e),this._startReconnectTimer())}_startReconnectTimer(){let e=Math.floor(Math.random()*Mu)+Math.min(Math.pow(2,this.retries)*Fu,Nu);this.reconnecting=!0,clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout(()=>{this.retries++,this._openSocket()},e),this.reconnectTimer.unref&&this.reconnectTimer.unref(),H("reconnecting socket in %s ms",e)}_send(e){if(this.destroyed)return;this.expectingResponse=!0;let t=JSON.stringify(e);H("send %s",t),this.socket.send(t)}_generateOffers(e,t){let n=this,i=[];H("generating %s offers",e);for(let f=0;f<e;++f)o();s();function o(){let f=Iu(20).toString("hex");H("creating peer (from _generateOffers)");let l=n.peers[f]=n._createPeer({initiator:!0});l.once("signal",d=>{i.push({offer:d,offer_id:ae.hexToBinary(f)}),s()}),l.trackerTimeout=setTimeout(()=>{H("tracker timeout: destroying peer"),l.trackerTimeout=null,delete n.peers[f],l.destroy()},Du),l.trackerTimeout.unref&&l.trackerTimeout.unref()}function s(){i.length===e&&(H("generated %s offers",e),t(i))}}_createPeer(e){let t=this;e=Object.assign({trickle:!1,config:t.client._rtcConfig,wrtc:t.client._wrtc},e);let n=new ku(e);return n.once("error",i),n.once("connect",o),n;function i(s){t.client.emit("warning",new Error(`Connection error: ${s.message}`)),n.destroy()}function o(){n.removeListener("error",i),n.removeListener("connect",o)}}};Xe.prototype.DEFAULT_ANNOUNCE_INTERVAL=30*1e3;Xe._socketPool=te;function Yi(){}Vi.exports=Xe});var Or=x((Qe,Br)=>{m();(function(e,t){typeof Qe=="object"&&typeof Br=="object"?Br.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Qe=="object"?Qe.Rusha=t():e.Rusha=t()})(typeof self<"u"?self:Qe,function(){return function(r){var e={};function t(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return r[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=r,t.c=e,t.d=function(n,i,o){t.o(n,i)||Object.defineProperty(n,i,{configurable:!1,enumerable:!0,get:o})},t.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(i,"a",i),i},t.o=function(n,i){return Object.prototype.hasOwnProperty.call(n,i)},t.p="",t(t.s=3)}([function(r,e,t){function n(h,_){if(!(h instanceof _))throw new TypeError("Cannot call a class as a function")}var i=t(5),o=t(1),s=o.toHex,f=o.ceilHeapSize,l=t(6),d=function(h){for(h+=9;h%64>0;h+=1);return h},u=function(h,_){var p=new Uint8Array(h.buffer),E=_%4,w=_-E;switch(E){case 0:p[w+3]=0;case 1:p[w+2]=0;case 2:p[w+1]=0;case 3:p[w+0]=0}for(var b=(_>>2)+1;b<h.length;b++)h[b]=0},a=function(h,_,p){h[_>>2]|=128<<24-(_%4<<3),h[((_>>2)+2&-16)+14]=p/(1<<29)|0,h[((_>>2)+2&-16)+15]=p<<3},c=function(h,_){var p=new Int32Array(h,_+320,5),E=new Int32Array(5),w=new DataView(E.buffer);return w.setInt32(0,p[0],!1),w.setInt32(4,p[1],!1),w.setInt32(8,p[2],!1),w.setInt32(12,p[3],!1),w.setInt32(16,p[4],!1),E},y=function(){function h(_){if(n(this,h),_=_||64*1024,_%64>0)throw new Error("Chunk size must be a multiple of 128 bit");this._offset=0,this._maxChunkLen=_,this._padMaxChunkLen=d(_),this._heap=new ArrayBuffer(f(this._padMaxChunkLen+320+20)),this._h32=new Int32Array(this._heap),this._h8=new Int8Array(this._heap),this._core=new i({Int32Array},{},this._heap)}return h.prototype._initState=function(p,E){this._offset=0;var w=new Int32Array(p,E+320,5);w[0]=1732584193,w[1]=-271733879,w[2]=-1732584194,w[3]=271733878,w[4]=-1009589776},h.prototype._padChunk=function(p,E){var w=d(p),b=new Int32Array(this._heap,0,w>>2);return u(b,p),a(b,p,E),w},h.prototype._write=function(p,E,w,b){l(p,this._h8,this._h32,E,w,b||0)},h.prototype._coreCall=function(p,E,w,b,C){var T=w;this._write(p,E,w),C&&(T=this._padChunk(w,b)),this._core.hash(T,this._padMaxChunkLen)},h.prototype.rawDigest=function(p){var E=p.byteLength||p.length||p.size||0;this._initState(this._heap,this._padMaxChunkLen);var w=0,b=this._maxChunkLen;for(w=0;E>w+b;w+=b)this._coreCall(p,w,b,E,!1);return this._coreCall(p,w,E-w,E,!0),c(this._heap,this._padMaxChunkLen)},h.prototype.digest=function(p){return s(this.rawDigest(p).buffer)},h.prototype.digestFromString=function(p){return this.digest(p)},h.prototype.digestFromBuffer=function(p){return this.digest(p)},h.prototype.digestFromArrayBuffer=function(p){return this.digest(p)},h.prototype.resetState=function(){return this._initState(this._heap,this._padMaxChunkLen),this},h.prototype.append=function(p){var E=0,w=p.byteLength||p.length||p.size||0,b=this._offset%this._maxChunkLen,C=void 0;for(this._offset+=w;E<w;)C=Math.min(w-E,this._maxChunkLen-b),this._write(p,E,C,b),b+=C,E+=C,b===this._maxChunkLen&&(this._core.hash(this._maxChunkLen,this._padMaxChunkLen),b=0);return this},h.prototype.getState=function(){var p=this._offset%this._maxChunkLen,E=void 0;if(p)E=this._heap.slice(0);else{var w=new Int32Array(this._heap,this._padMaxChunkLen+320,5);E=w.buffer.slice(w.byteOffset,w.byteOffset+w.byteLength)}return{offset:this._offset,heap:E}},h.prototype.setState=function(p){if(this._offset=p.offset,p.heap.byteLength===20){var E=new Int32Array(this._heap,this._padMaxChunkLen+320,5);E.set(new Int32Array(p.heap))}else this._h32.set(new Int32Array(p.heap));return this},h.prototype.rawEnd=function(){var p=this._offset,E=p%this._maxChunkLen,w=this._padChunk(E,p);this._core.hash(w,this._padMaxChunkLen);var b=c(this._heap,this._padMaxChunkLen);return this._initState(this._heap,this._padMaxChunkLen),b},h.prototype.end=function(){return s(this.rawEnd().buffer)},h}();r.exports=y,r.exports._core=i},function(r,e){for(var t=new Array(256),n=0;n<256;n++)t[n]=(n<16?"0":"")+n.toString(16);r.exports.toHex=function(i){for(var o=new Uint8Array(i),s=new Array(i.byteLength),f=0;f<s.length;f++)s[f]=t[o[f]];return s.join("")},r.exports.ceilHeapSize=function(i){var o=0;if(i<=65536)return 65536;if(i<16777216)for(o=1;o<i;o=o<<1);else for(o=16777216;o<i;o+=16777216);return o},r.exports.isDedicatedWorkerScope=function(i){var o="WorkerGlobalScope"in i&&i instanceof i.WorkerGlobalScope,s="SharedWorkerGlobalScope"in i&&i instanceof i.SharedWorkerGlobalScope,f="ServiceWorkerGlobalScope"in i&&i instanceof i.ServiceWorkerGlobalScope;return o&&!s&&!f}},function(r,e,t){r.exports=function(){var n=t(0),i=function(f,l,d){try{return d(null,f.digest(l))}catch(u){return d(u)}},o=function(f,l,d,u,a){var c=new self.FileReader;c.onloadend=function(){if(c.error)return a(c.error);var h=c.result;l+=c.result.byteLength;try{f.append(h)}catch(_){a(_);return}l<u.size?o(f,l,d,u,a):a(null,f.end())},c.readAsArrayBuffer(u.slice(l,l+d))},s=!0;return self.onmessage=function(f){if(!!s){var l=f.data.data,d=f.data.file,u=f.data.id;if(!(typeof u>"u")&&!(!d&&!l)){var a=f.data.blockSize||4*1024*1024,c=new n(a);c.resetState();var y=function(h,_){h?self.postMessage({id:u,error:h.name}):self.postMessage({id:u,hash:_})};l&&i(c,l,y),d&&o(c,0,a,d,y)}}},function(){s=!1}}},function(r,e,t){var n=t(4),i=t(0),o=t(7),s=t(2),f=t(1),l=f.isDedicatedWorkerScope,d=typeof self<"u"&&l(self);i.disableWorkerBehaviour=d?s():function(){},i.createWorker=function(){var u=n(2),a=u.terminate;return u.terminate=function(){URL.revokeObjectURL(u.objectURL),a.call(u)},u},i.createHash=o,r.exports=i},function(r,e,t){function n(u){var a={};function c(h){if(a[h])return a[h].exports;var _=a[h]={i:h,l:!1,exports:{}};return u[h].call(_.exports,_,_.exports,c),_.l=!0,_.exports}c.m=u,c.c=a,c.i=function(h){return h},c.d=function(h,_,p){c.o(h,_)||Object.defineProperty(h,_,{configurable:!1,enumerable:!0,get:p})},c.r=function(h){Object.defineProperty(h,"__esModule",{value:!0})},c.n=function(h){var _=h&&h.__esModule?function(){return h.default}:function(){return h};return c.d(_,"a",_),_},c.o=function(h,_){return Object.prototype.hasOwnProperty.call(h,_)},c.p="/",c.oe=function(h){throw console.error(h),h};var y=c(c.s=ENTRY_MODULE);return y.default||y}var i="[\\.|\\-|\\+|\\w|/|@]+",o="\\((/\\*.*?\\*/)?s?.*?("+i+").*?\\)";function s(u){return(u+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function f(u,a,c){var y={};y[c]=[];var h=a.toString(),_=h.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!_)return y;for(var p=_[1],E=new RegExp("(\\\\n|\\W)"+s(p)+o,"g"),w;w=E.exec(h);)w[3]!=="dll-reference"&&y[c].push(w[3]);for(E=new RegExp("\\("+s(p)+'\\("(dll-reference\\s('+i+'))"\\)\\)'+o,"g");w=E.exec(h);)u[w[2]]||(y[c].push(w[1]),u[w[2]]=t(w[1]).m),y[w[2]]=y[w[2]]||[],y[w[2]].push(w[4]);return y}function l(u){var a=Object.keys(u);return a.reduce(function(c,y){return c||u[y].length>0},!1)}function d(u,a){for(var c={main:[a]},y={main:[]},h={main:{}};l(c);)for(var _=Object.keys(c),p=0;p<_.length;p++){var E=_[p],w=c[E],b=w.pop();if(h[E]=h[E]||{},!(h[E][b]||!u[E][b])){h[E][b]=!0,y[E]=y[E]||[],y[E].push(b);for(var C=f(u,u[E][b],E),T=Object.keys(C),B=0;B<T.length;B++)c[T[B]]=c[T[B]]||[],c[T[B]]=c[T[B]].concat(C[T[B]])}}return y}r.exports=function(u,a){a=a||{};var c={main:t.m},y=a.all?{main:Object.keys(c)}:d(c,u),h="";Object.keys(y).filter(function(b){return b!=="main"}).forEach(function(b){for(var C=0;y[b][C];)C++;y[b].push(C),c[b][C]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",h=h+"var "+b+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(C))+")({"+y[b].map(function(T){return""+JSON.stringify(T)+": "+c[b][T].toString()}).join(",")+`});
`}),h=h+"("+n.toString().replace("ENTRY_MODULE",JSON.stringify(u))+")({"+y.main.map(function(b){return""+JSON.stringify(b)+": "+c.main[b].toString()}).join(",")+"})(self);";var _=new window.Blob([h],{type:"text/javascript"});if(a.bare)return _;var p=window.URL||window.webkitURL||window.mozURL||window.msURL,E=p.createObjectURL(_),w=new window.Worker(E);return w.objectURL=E,w}},function(r,e){r.exports=function(n,i,o){var s=new n.Int32Array(o);function f(l,d){l=l|0,d=d|0;var u=0,a=0,c=0,y=0,h=0,_=0,p=0,E=0,w=0,b=0,C=0,T=0,B=0,N=0;for(c=s[d+320>>2]|0,h=s[d+324>>2]|0,p=s[d+328>>2]|0,w=s[d+332>>2]|0,C=s[d+336>>2]|0,u=0;(u|0)<(l|0);u=u+64|0){for(y=c,_=h,E=p,b=w,T=C,a=0;(a|0)<64;a=a+4|0)N=s[u+a>>2]|0,B=((c<<5|c>>>27)+(h&p|~h&w)|0)+((N+C|0)+1518500249|0)|0,C=w,w=p,p=h<<30|h>>>2,h=c,c=B,s[l+a>>2]=N;for(a=l+64|0;(a|0)<(l+80|0);a=a+4|0)N=(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])<<1|(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])>>>31,B=((c<<5|c>>>27)+(h&p|~h&w)|0)+((N+C|0)+1518500249|0)|0,C=w,w=p,p=h<<30|h>>>2,h=c,c=B,s[a>>2]=N;for(a=l+80|0;(a|0)<(l+160|0);a=a+4|0)N=(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])<<1|(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])>>>31,B=((c<<5|c>>>27)+(h^p^w)|0)+((N+C|0)+1859775393|0)|0,C=w,w=p,p=h<<30|h>>>2,h=c,c=B,s[a>>2]=N;for(a=l+160|0;(a|0)<(l+240|0);a=a+4|0)N=(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])<<1|(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])>>>31,B=((c<<5|c>>>27)+(h&p|h&w|p&w)|0)+((N+C|0)-1894007588|0)|0,C=w,w=p,p=h<<30|h>>>2,h=c,c=B,s[a>>2]=N;for(a=l+240|0;(a|0)<(l+320|0);a=a+4|0)N=(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])<<1|(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])>>>31,B=((c<<5|c>>>27)+(h^p^w)|0)+((N+C|0)-899497514|0)|0,C=w,w=p,p=h<<30|h>>>2,h=c,c=B,s[a>>2]=N;c=c+y|0,h=h+_|0,p=p+E|0,w=w+b|0,C=C+T|0}s[d+320>>2]=c,s[d+324>>2]=h,s[d+328>>2]=p,s[d+332>>2]=w,s[d+336>>2]=C}return{hash:f}}},function(r,e){var t=this,n=void 0;typeof self<"u"&&typeof self.FileReaderSync<"u"&&(n=new self.FileReaderSync);var i=function(f,l,d,u,a,c){var y=void 0,h=c%4,_=(a+h)%4,p=a-_;switch(h){case 0:l[c]=f.charCodeAt(u+3);case 1:l[c+1-(h<<1)|0]=f.charCodeAt(u+2);case 2:l[c+2-(h<<1)|0]=f.charCodeAt(u+1);case 3:l[c+3-(h<<1)|0]=f.charCodeAt(u)}if(!(a<_+(4-h))){for(y=4-h;y<p;y=y+4|0)d[c+y>>2]=f.charCodeAt(u+y)<<24|f.charCodeAt(u+y+1)<<16|f.charCodeAt(u+y+2)<<8|f.charCodeAt(u+y+3);switch(_){case 3:l[c+p+1|0]=f.charCodeAt(u+p+2);case 2:l[c+p+2|0]=f.charCodeAt(u+p+1);case 1:l[c+p+3|0]=f.charCodeAt(u+p)}}},o=function(f,l,d,u,a,c){var y=void 0,h=c%4,_=(a+h)%4,p=a-_;switch(h){case 0:l[c]=f[u+3];case 1:l[c+1-(h<<1)|0]=f[u+2];case 2:l[c+2-(h<<1)|0]=f[u+1];case 3:l[c+3-(h<<1)|0]=f[u]}if(!(a<_+(4-h))){for(y=4-h;y<p;y=y+4|0)d[c+y>>2|0]=f[u+y]<<24|f[u+y+1]<<16|f[u+y+2]<<8|f[u+y+3];switch(_){case 3:l[c+p+1|0]=f[u+p+2];case 2:l[c+p+2|0]=f[u+p+1];case 1:l[c+p+3|0]=f[u+p]}}},s=function(f,l,d,u,a,c){var y=void 0,h=c%4,_=(a+h)%4,p=a-_,E=new Uint8Array(n.readAsArrayBuffer(f.slice(u,u+a)));switch(h){case 0:l[c]=E[3];case 1:l[c+1-(h<<1)|0]=E[2];case 2:l[c+2-(h<<1)|0]=E[1];case 3:l[c+3-(h<<1)|0]=E[0]}if(!(a<_+(4-h))){for(y=4-h;y<p;y=y+4|0)d[c+y>>2|0]=E[y]<<24|E[y+1]<<16|E[y+2]<<8|E[y+3];switch(_){case 3:l[c+p+1|0]=E[p+2];case 2:l[c+p+2|0]=E[p+1];case 1:l[c+p+3|0]=E[p]}}};r.exports=function(f,l,d,u,a,c){if(typeof f=="string")return i(f,l,d,u,a,c);if(f instanceof Array||t&&t.Buffer&&t.Buffer.isBuffer(f))return o(f,l,d,u,a,c);if(f instanceof ArrayBuffer)return o(new Uint8Array(f),l,d,u,a,c);if(f.buffer instanceof ArrayBuffer)return o(new Uint8Array(f.buffer,f.byteOffset,f.byteLength),l,d,u,a,c);if(f instanceof Blob)return s(f,l,d,u,a,c);throw new Error("Unsupported data type.")}},function(r,e,t){var n=function(){function d(u,a){for(var c=0;c<a.length;c++){var y=a[c];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(u,y.key,y)}}return function(u,a,c){return a&&d(u.prototype,a),c&&d(u,c),u}}();function i(d,u){if(!(d instanceof u))throw new TypeError("Cannot call a class as a function")}var o=t(0),s=t(1),f=s.toHex,l=function(){function d(){i(this,d),this._rusha=new o,this._rusha.resetState()}return d.prototype.update=function(a){return this._rusha.append(a),this},d.prototype.digest=function(a){var c=this._rusha.rawEnd().buffer;if(!a)return c;if(a==="hex")return f(c);throw new Error("unsupported digest encoding")},n(d,[{key:"state",get:function(){return this._rusha.getState()},set:function(u){this._rusha.setState(u)}}]),d}();r.exports=function(){return new l}}])})});var Ki=x((Ac,zi)=>{m();var Uu=Or(),Ot,It,Bt;function Pu(){Ot=Uu.createWorker(),It=1,Bt={},Ot.onmessage=function(e){let t=e.data.id,n=Bt[t];delete Bt[t],e.data.error!=null?n(new Error("Rusha worker error: "+e.data.error)):n(null,e.data.hash)}}function ju(r,e){Ot||Pu(),Bt[It]=e,Ot.postMessage({id:It,data:r}),It+=1}zi.exports=ju});var Zi=x((Ic,Lr)=>{m();var qu=Or(),Wu=Ki(),Hu=new qu,Xi=typeof window<"u"?window:self,Qi=Xi.crypto||Xi.msCrypto||{},Ze=Qi.subtle||Qi.webkitSubtle;function Lt(r){return Hu.digest(r)}try{Ze.digest({name:"sha-1"},new Uint8Array).catch(function(){Ze=!1})}catch{Ze=!1}function $u(r,e){if(!Ze){typeof window<"u"?Wu(r,function(n,i){if(n){e(Lt(r));return}e(i)}):queueMicrotask(()=>e(Lt(r)));return}typeof r=="string"&&(r=Gu(r)),Ze.digest({name:"sha-1"},r).then(function(n){e(Yu(new Uint8Array(n)))},function(){e(Lt(r))})}function Gu(r){let e=r.length,t=new Uint8Array(e);for(let n=0;n<e;n++)t[n]=r.charCodeAt(n);return t}function Yu(r){let e=r.length,t=[];for(let n=0;n<e;n++){let i=r[n];t.push((i>>>4).toString(16)),t.push((i&15).toString(16))}return t.join("")}Lr.exports=$u;Lr.exports.sync=Lt});m();var Fr=rt(Ji()),no=rt(je()),io=rt(qe()),oo=rt(Zi()),eo="^",to=16e3,ro=class extends io.default{constructor(t,n){super();this.announce=[];this.trackers={};this.peers={};this.responseWaiting={};this.msgChunks={};this._identifier="";this._peerIdBuffer=(0,no.default)(20);this._peerId=this._peerIdBuffer.toString("hex");this._peerIdBinary=this._peerIdBuffer.toString("binary");this.announce=t||this.announce,this.identifier=n||this.identifier}set identifier(t){this._identifier=t,this.infoHash=oo.default.sync(t).toLowerCase(),this._infoHashBuffer=S.from(this.infoHash,"hex"),this._infoHashBinary=this._infoHashBuffer.toString("binary")}start(){this.on("peer",t=>{let n=!1;this.peers[t.id]||(n=!0,this.peers[t.id]={},this.responseWaiting[t.id]={}),t.on("connect",()=>{this.peers[t.id][t.channelName]=t,n&&this.emit("peerconnect",t)}),t.on("data",i=>{if(this.emit("data",t,i),i=i.toString(),i[0]===eo)try{i=JSON.parse(i.slice(1)),t.respond=this._peerRespond(t,i.id);let o=this._chunkHandler(i);o!==!1&&(i.o&&(o=JSON.parse(o)),this.responseWaiting[t.id][i.id]?(this.responseWaiting[t.id][i.id]([t,o]),delete this.responseWaiting[t.id][i.id]):this.emit("msg",t,o),this._destroyChunks(i.id))}catch(o){console.error(o)}}),t.on("error",i=>{this._removePeer(t),console.warn("Error in connection to peer:",i)}),t.on("close",()=>{this._removePeer(t),console.log(`Connection to ${t.id} closed.`)})}),this.on("update",t=>{let n=this.trackers[this.announce.indexOf(t.announce)];this.emit("trackerconnect",n,this.getTrackerStats())}),this.on("warning",t=>{this.emit("trackerwarning",t,this.getTrackerStats())}),this._fetchPeers()}addTracker(t){if(this.announce.indexOf(t)!==-1)throw new Error("Tracker already added.");let n=this.announce.push(t);this.trackers[n]=new Fr.default(this,t),this.trackers[n].announce(this._defaultAnnounceOpts())}removeTracker(t){let n=this.announce.indexOf(t);if(n===-1)throw new Error("Tracker does not exist");this.trackers[n].peers=[],this.trackers[n].destroy(),delete this.trackers[n],delete this.announce[n]}_removePeer(t){if(!this.peers[t.id])return!1;delete this.peers[t.id][t.channelName],Object.keys(this.peers[t.id]).length===0&&(this.emit("peerclose",t),delete this.responseWaiting[t.id],delete this.peers[t.id])}send(t,n,i=""){return new Promise((o,s)=>{let f={id:i||String(Math.floor(Math.random()*1e5+1e5)),msg:typeof n=="object"?JSON.stringify(n):n,o:typeof n=="object"?1:null};try{if(!t.connected){for(let u in this.peers[t.id])if(t=this.peers[t.id][u],t.connected)break}this.responseWaiting[t.id]||(this.responseWaiting[t.id]={}),this.responseWaiting[t.id][f.id]=o}catch(u){return s(Error("Connection to peer closed"+u))}let l=0,d="";for(;f.msg.length>0;)f.c=l,d=f.msg.slice(to),f.msg=f.msg.slice(0,to),d||(f.last=!0),t.send(eo+JSON.stringify(f)),f.msg=d,l++})}requestMorePeers(){return new Promise(t=>{for(let n in this.trackers)this.trackers[n].announce(this._defaultAnnounceOpts());t(this.peers)})}getTrackerStats(){let t=0;for(let n in this.trackers)this.trackers[n].socket&&this.trackers[n].socket.connect&&t++;return{connected:t,total:this.announce.length}}destroy(){for(let t in this.peers)for(let n in this.peers[t])this.peers[t][n].destroy();Object.keys(this.trackers).forEach(t=>this.trackers[t].destroy())}_peerRespond(t,n){return i=>this.send(t,i,n)}_chunkHandler(t){return this.msgChunks[t.id]||(this.msgChunks[t.id]=[]),this.msgChunks[t.id][t.c]=t.msg,t.last?this.msgChunks[t.id].join(""):!1}_destroyChunks(t){delete this.msgChunks[t]}_defaultAnnounceOpts(t={}){return t.numwant==null&&(t.numwant=50),t.uploaded==null&&(t.uploaded=0),t.downloaded==null&&(t.downloaded=0),t}_fetchPeers(){for(let t in this.announce)this.trackers[t]=new Fr.default(this,this.announce[t]),this.trackers[t].announce(this._defaultAnnounceOpts())}};export{ro as P2PT};
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! simple-websocket. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
