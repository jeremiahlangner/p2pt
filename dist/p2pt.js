(()=>{var so=Object.create;var Mr=Object.defineProperty;var ao=Object.getOwnPropertyDescriptor;var uo=Object.getOwnPropertyNames;var fo=Object.getPrototypeOf,co=Object.prototype.hasOwnProperty;var lo=(r,e)=>()=>(r&&(e=r(r=0)),e);var S=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var ho=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of uo(e))!co.call(r,i)&&i!==t&&Mr(r,i,{get:()=>e[i],enumerable:!(n=ao(e,i))||n.enumerable});return r};var tt=(r,e,t)=>(t=r!=null?so(fo(r)):{},ho(e||!r||!r.__esModule?Mr(t,"default",{value:r,enumerable:!0}):t,r));var Pr=S(rt=>{"use strict";m();rt.byteLength=go;rt.toByteArray=_o;rt.fromByteArray=bo;var H=[],P=[],po=typeof Uint8Array<"u"?Uint8Array:Array,Lt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(ae=0,Dr=Lt.length;ae<Dr;++ae)H[ae]=Lt[ae],P[Lt.charCodeAt(ae)]=ae;var ae,Dr;P["-".charCodeAt(0)]=62;P["_".charCodeAt(0)]=63;function Ur(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function go(r){var e=Ur(r),t=e[0],n=e[1];return(t+n)*3/4-n}function yo(r,e,t){return(e+t)*3/4-t}function _o(r){var e,t=Ur(r),n=t[0],i=t[1],o=new po(yo(r,n,i)),s=0,f=i>0?n-4:n,l;for(l=0;l<f;l+=4)e=P[r.charCodeAt(l)]<<18|P[r.charCodeAt(l+1)]<<12|P[r.charCodeAt(l+2)]<<6|P[r.charCodeAt(l+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=P[r.charCodeAt(l)]<<2|P[r.charCodeAt(l+1)]>>4,o[s++]=e&255),i===1&&(e=P[r.charCodeAt(l)]<<10|P[r.charCodeAt(l+1)]<<4|P[r.charCodeAt(l+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function wo(r){return H[r>>18&63]+H[r>>12&63]+H[r>>6&63]+H[r&63]}function mo(r,e,t){for(var n,i=[],o=e;o<t;o+=3)n=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),i.push(wo(n));return i.join("")}function bo(r){for(var e,t=r.length,n=t%3,i=[],o=16383,s=0,f=t-n;s<f;s+=o)i.push(mo(r,s,s+o>f?f:s+o));return n===1?(e=r[t-1],i.push(H[e>>2]+H[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(H[e>>10]+H[e>>4&63]+H[e<<2&63]+"=")),i.join("")}});var jr=S(Ft=>{m();Ft.read=function(r,e,t,n,i){var o,s,f=i*8-n-1,l=(1<<f)-1,d=l>>1,u=-7,a=t?i-1:0,c=t?-1:1,y=r[e+a];for(a+=c,o=y&(1<<-u)-1,y>>=-u,u+=f;u>0;o=o*256+r[e+a],a+=c,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=n;u>0;s=s*256+r[e+a],a+=c,u-=8);if(o===0)o=1-d;else{if(o===l)return s?NaN:(y?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-d}return(y?-1:1)*s*Math.pow(2,o-n)};Ft.write=function(r,e,t,n,i,o){var s,f,l,d=o*8-i-1,u=(1<<d)-1,a=u>>1,c=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=n?0:o-1,h=n?1:-1,_=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(f=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+a>=1?e+=c/l:e+=c*Math.pow(2,1-a),e*l>=2&&(s++,l/=2),s+a>=u?(f=0,s=u):s+a>=1?(f=(e*l-1)*Math.pow(2,i),s=s+a):(f=e*Math.pow(2,a-1)*Math.pow(2,i),s=0));i>=8;r[t+y]=f&255,y+=h,f/=256,i-=8);for(s=s<<i|f,d+=i;d>0;r[t+y]=s&255,y+=h,s/=256,d-=8);r[t+y-h]|=_*128}});var fe=S(Re=>{"use strict";m();var Nt=Pr(),Ee=jr(),qr=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Re.Buffer=g;Re.SlowBuffer=xo;Re.INSPECT_MAX_BYTES=50;var nt=2147483647;Re.kMaxLength=nt;g.TYPED_ARRAY_SUPPORT=Eo();!g.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Eo(){try{let r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(g.prototype,"parent",{enumerable:!0,get:function(){if(!!g.isBuffer(this))return this.buffer}});Object.defineProperty(g.prototype,"offset",{enumerable:!0,get:function(){if(!!g.isBuffer(this))return this.byteOffset}});function z(r){if(r>nt)throw new RangeError('The value "'+r+'" is invalid for option "size"');let e=new Uint8Array(r);return Object.setPrototypeOf(e,g.prototype),e}function g(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Pt(r)}return Gr(r,e,t)}g.poolSize=8192;function Gr(r,e,t){if(typeof r=="string")return Ro(r,e);if(ArrayBuffer.isView(r))return Co(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if($(r,ArrayBuffer)||r&&$(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&($(r,SharedArrayBuffer)||r&&$(r.buffer,SharedArrayBuffer)))return Dt(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return g.from(n,e,t);let i=So(r);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return g.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}g.from=function(r,e,t){return Gr(r,e,t)};Object.setPrototypeOf(g.prototype,Uint8Array.prototype);Object.setPrototypeOf(g,Uint8Array);function Yr(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function vo(r,e,t){return Yr(r),r<=0?z(r):e!==void 0?typeof t=="string"?z(r).fill(e,t):z(r).fill(e):z(r)}g.alloc=function(r,e,t){return vo(r,e,t)};function Pt(r){return Yr(r),z(r<0?0:jt(r)|0)}g.allocUnsafe=function(r){return Pt(r)};g.allocUnsafeSlow=function(r){return Pt(r)};function Ro(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!g.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=Vr(r,e)|0,n=z(t),i=n.write(r,e);return i!==t&&(n=n.slice(0,i)),n}function Mt(r){let e=r.length<0?0:jt(r.length)|0,t=z(e);for(let n=0;n<e;n+=1)t[n]=r[n]&255;return t}function Co(r){if($(r,Uint8Array)){let e=new Uint8Array(r);return Dt(e.buffer,e.byteOffset,e.byteLength)}return Mt(r)}function Dt(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,g.prototype),n}function So(r){if(g.isBuffer(r)){let e=jt(r.length)|0,t=z(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||Wt(r.length)?z(0):Mt(r);if(r.type==="Buffer"&&Array.isArray(r.data))return Mt(r.data)}function jt(r){if(r>=nt)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+nt.toString(16)+" bytes");return r|0}function xo(r){return+r!=r&&(r=0),g.alloc(+r)}g.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==g.prototype};g.compare=function(e,t){if($(e,Uint8Array)&&(e=g.from(e,e.offset,e.byteLength)),$(t,Uint8Array)&&(t=g.from(t,t.offset,t.byteLength)),!g.isBuffer(e)||!g.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0};g.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};g.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return g.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let i=g.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){let s=e[n];if($(s,Uint8Array))o+s.length>i.length?(g.isBuffer(s)||(s=g.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(g.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function Vr(r,e){if(g.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||$(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return Ut(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return rn(r).length;default:if(i)return n?-1:Ut(r).length;e=(""+e).toLowerCase(),i=!0}}g.byteLength=Vr;function To(r,e,t){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return Do(this,e,t);case"utf8":case"utf-8":return zr(this,e,t);case"ascii":return No(this,e,t);case"latin1":case"binary":return Mo(this,e,t);case"base64":return Lo(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Uo(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}g.prototype._isBuffer=!0;function ue(r,e,t){let n=r[e];r[e]=r[t],r[t]=n}g.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)ue(this,t,t+1);return this};g.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)ue(this,t,t+3),ue(this,t+1,t+2);return this};g.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)ue(this,t,t+7),ue(this,t+1,t+6),ue(this,t+2,t+5),ue(this,t+3,t+4);return this};g.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?zr(this,0,e):To.apply(this,arguments)};g.prototype.toLocaleString=g.prototype.toString;g.prototype.equals=function(e){if(!g.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:g.compare(this,e)===0};g.prototype.inspect=function(){let e="",t=Re.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};qr&&(g.prototype[qr]=g.prototype.inspect);g.prototype.compare=function(e,t,n,i,o){if($(e,Uint8Array)&&(e=g.from(e,e.offset,e.byteLength)),!g.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;let s=o-i,f=n-t,l=Math.min(s,f),d=this.slice(i,o),u=e.slice(t,n);for(let a=0;a<l;++a)if(d[a]!==u[a]){s=d[a],f=u[a];break}return s<f?-1:f<s?1:0};function Jr(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,Wt(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=g.from(e,n)),g.isBuffer(e))return e.length===0?-1:Wr(r,e,t,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):Wr(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function Wr(r,e,t,n,i){let o=1,s=r.length,f=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,s/=2,f/=2,t/=2}function l(u,a){return o===1?u[a]:u.readUInt16BE(a*o)}let d;if(i){let u=-1;for(d=t;d<s;d++)if(l(r,d)===l(e,u===-1?0:d-u)){if(u===-1&&(u=d),d-u+1===f)return u*o}else u!==-1&&(d-=d-u),u=-1}else for(t+f>s&&(t=s-f),d=t;d>=0;d--){let u=!0;for(let a=0;a<f;a++)if(l(r,d+a)!==l(e,a)){u=!1;break}if(u)return d}return-1}g.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};g.prototype.indexOf=function(e,t,n){return Jr(this,e,t,n,!0)};g.prototype.lastIndexOf=function(e,t,n){return Jr(this,e,t,n,!1)};function Ao(r,e,t,n){t=Number(t)||0;let i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;let o=e.length;n>o/2&&(n=o/2);let s;for(s=0;s<n;++s){let f=parseInt(e.substr(s*2,2),16);if(Wt(f))return s;r[t+s]=f}return s}function ko(r,e,t,n){return it(Ut(e,r.length-t),r,t,n)}function Io(r,e,t,n){return it(Wo(e),r,t,n)}function Bo(r,e,t,n){return it(rn(e),r,t,n)}function Oo(r,e,t,n){return it(Ho(e,r.length-t),r,t,n)}g.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-t;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return Ao(this,e,t,n);case"utf8":case"utf-8":return ko(this,e,t,n);case"ascii":case"latin1":case"binary":return Io(this,e,t,n);case"base64":return Bo(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Oo(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Lo(r,e,t){return e===0&&t===r.length?Nt.fromByteArray(r):Nt.fromByteArray(r.slice(e,t))}function zr(r,e,t){t=Math.min(r.length,t);let n=[],i=e;for(;i<t;){let o=r[i],s=null,f=o>239?4:o>223?3:o>191?2:1;if(i+f<=t){let l,d,u,a;switch(f){case 1:o<128&&(s=o);break;case 2:l=r[i+1],(l&192)===128&&(a=(o&31)<<6|l&63,a>127&&(s=a));break;case 3:l=r[i+1],d=r[i+2],(l&192)===128&&(d&192)===128&&(a=(o&15)<<12|(l&63)<<6|d&63,a>2047&&(a<55296||a>57343)&&(s=a));break;case 4:l=r[i+1],d=r[i+2],u=r[i+3],(l&192)===128&&(d&192)===128&&(u&192)===128&&(a=(o&15)<<18|(l&63)<<12|(d&63)<<6|u&63,a>65535&&a<1114112&&(s=a))}}s===null?(s=65533,f=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=f}return Fo(n)}var Hr=4096;function Fo(r){let e=r.length;if(e<=Hr)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=Hr));return t}function No(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function Mo(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function Do(r,e,t){let n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);let i="";for(let o=e;o<t;++o)i+=$o[r[o]];return i}function Uo(r,e,t){let n=r.slice(e,t),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}g.prototype.slice=function(e,t){let n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,g.prototype),i};function N(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}g.prototype.readUintLE=g.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||N(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return i};g.prototype.readUintBE=g.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||N(e,t,this.length);let i=this[e+--t],o=1;for(;t>0&&(o*=256);)i+=this[e+--t]*o;return i};g.prototype.readUint8=g.prototype.readUInt8=function(e,t){return e=e>>>0,t||N(e,1,this.length),this[e]};g.prototype.readUint16LE=g.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||N(e,2,this.length),this[e]|this[e+1]<<8};g.prototype.readUint16BE=g.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||N(e,2,this.length),this[e]<<8|this[e+1]};g.prototype.readUint32LE=g.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};g.prototype.readUint32BE=g.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||N(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};g.prototype.readBigUInt64LE=te(function(e){e=e>>>0,ve(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Ue(e,this.length-8);let i=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});g.prototype.readBigUInt64BE=te(function(e){e=e>>>0,ve(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Ue(e,this.length-8);let i=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});g.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||N(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i};g.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||N(e,t,this.length);let i=t,o=1,s=this[e+--i];for(;i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*t)),s};g.prototype.readInt8=function(e,t){return e=e>>>0,t||N(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};g.prototype.readInt16LE=function(e,t){e=e>>>0,t||N(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};g.prototype.readInt16BE=function(e,t){e=e>>>0,t||N(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};g.prototype.readInt32LE=function(e,t){return e=e>>>0,t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};g.prototype.readInt32BE=function(e,t){return e=e>>>0,t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};g.prototype.readBigInt64LE=te(function(e){e=e>>>0,ve(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Ue(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});g.prototype.readBigInt64BE=te(function(e){e=e>>>0,ve(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Ue(e,this.length-8);let i=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});g.prototype.readFloatLE=function(e,t){return e=e>>>0,t||N(e,4,this.length),Ee.read(this,e,!0,23,4)};g.prototype.readFloatBE=function(e,t){return e=e>>>0,t||N(e,4,this.length),Ee.read(this,e,!1,23,4)};g.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||N(e,8,this.length),Ee.read(this,e,!0,52,8)};g.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||N(e,8,this.length),Ee.read(this,e,!1,52,8)};function D(r,e,t,n,i,o){if(!g.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}g.prototype.writeUintLE=g.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let f=Math.pow(2,8*n)-1;D(this,e,t,n,f,0)}let o=1,s=0;for(this[t]=e&255;++s<n&&(o*=256);)this[t+s]=e/o&255;return t+n};g.prototype.writeUintBE=g.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let f=Math.pow(2,8*n)-1;D(this,e,t,n,f,0)}let o=n-1,s=1;for(this[t+o]=e&255;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+n};g.prototype.writeUint8=g.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||D(this,e,t,1,255,0),this[t]=e&255,t+1};g.prototype.writeUint16LE=g.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||D(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};g.prototype.writeUint16BE=g.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||D(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};g.prototype.writeUint32LE=g.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||D(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};g.prototype.writeUint32BE=g.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||D(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function Kr(r,e,t,n,i){tn(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,t}function Xr(r,e,t,n,i){tn(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t+7]=o,o=o>>8,r[t+6]=o,o=o>>8,r[t+5]=o,o=o>>8,r[t+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=s,s=s>>8,r[t+2]=s,s=s>>8,r[t+1]=s,s=s>>8,r[t]=s,t+8}g.prototype.writeBigUInt64LE=te(function(e,t=0){return Kr(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});g.prototype.writeBigUInt64BE=te(function(e,t=0){return Xr(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});g.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let l=Math.pow(2,8*n-1);D(this,e,t,n,l-1,-l)}let o=0,s=1,f=0;for(this[t]=e&255;++o<n&&(s*=256);)e<0&&f===0&&this[t+o-1]!==0&&(f=1),this[t+o]=(e/s>>0)-f&255;return t+n};g.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let l=Math.pow(2,8*n-1);D(this,e,t,n,l-1,-l)}let o=n-1,s=1,f=0;for(this[t+o]=e&255;--o>=0&&(s*=256);)e<0&&f===0&&this[t+o+1]!==0&&(f=1),this[t+o]=(e/s>>0)-f&255;return t+n};g.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||D(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};g.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||D(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};g.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||D(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};g.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||D(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};g.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};g.prototype.writeBigInt64LE=te(function(e,t=0){return Kr(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});g.prototype.writeBigInt64BE=te(function(e,t=0){return Xr(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Qr(r,e,t,n,i,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function Zr(r,e,t,n,i){return e=+e,t=t>>>0,i||Qr(r,e,t,4,34028234663852886e22,-34028234663852886e22),Ee.write(r,e,t,n,23,4),t+4}g.prototype.writeFloatLE=function(e,t,n){return Zr(this,e,t,!0,n)};g.prototype.writeFloatBE=function(e,t,n){return Zr(this,e,t,!1,n)};function en(r,e,t,n,i){return e=+e,t=t>>>0,i||Qr(r,e,t,8,17976931348623157e292,-17976931348623157e292),Ee.write(r,e,t,n,52,8),t+8}g.prototype.writeDoubleLE=function(e,t,n){return en(this,e,t,!0,n)};g.prototype.writeDoubleBE=function(e,t,n){return en(this,e,t,!1,n)};g.prototype.copy=function(e,t,n,i){if(!g.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);let o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),o};g.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!g.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=t;o<n;++o)this[o]=e;else{let s=g.isBuffer(e)?e:g.from(e,i),f=s.length;if(f===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%f]}return this};var be={};function qt(r,e,t){be[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}qt("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);qt("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError);qt("ERR_OUT_OF_RANGE",function(r,e,t){let n=`The value of "${r}" is out of range.`,i=t;return Number.isInteger(t)&&Math.abs(t)>2**32?i=$r(String(t)):typeof t=="bigint"&&(i=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(i=$r(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function $r(r){let e="",t=r.length,n=r[0]==="-"?1:0;for(;t>=n+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function Po(r,e,t){ve(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&Ue(e,r.length-(t+1))}function tn(r,e,t,n,i,o){if(r>t||r<e){let s=typeof e=="bigint"?"n":"",f;throw o>3?e===0||e===BigInt(0)?f=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:f=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:f=`>= ${e}${s} and <= ${t}${s}`,new be.ERR_OUT_OF_RANGE("value",f,r)}Po(n,i,o)}function ve(r,e){if(typeof r!="number")throw new be.ERR_INVALID_ARG_TYPE(e,"number",r)}function Ue(r,e,t){throw Math.floor(r)!==r?(ve(r,t),new be.ERR_OUT_OF_RANGE(t||"offset","an integer",r)):e<0?new be.ERR_BUFFER_OUT_OF_BOUNDS:new be.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,r)}var jo=/[^+/0-9A-Za-z-_]/g;function qo(r){if(r=r.split("=")[0],r=r.trim().replace(jo,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function Ut(r,e){e=e||1/0;let t,n=r.length,i=null,o=[];for(let s=0;s<n;++s){if(t=r.charCodeAt(s),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function Wo(r){let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function Ho(r,e){let t,n,i,o=[];for(let s=0;s<r.length&&!((e-=2)<0);++s)t=r.charCodeAt(s),n=t>>8,i=t%256,o.push(i),o.push(n);return o}function rn(r){return Nt.toByteArray(qo(r))}function it(r,e,t,n){let i;for(i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function $(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function Wt(r){return r!==r}var $o=function(){let r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let n=t*16;for(let i=0;i<16;++i)e[n+i]=r[t]+r[i]}return e}();function te(r){return typeof BigInt>"u"?Go:r}function Go(){throw new Error("BigInt not supported")}});var un=S((ef,an)=>{m();var L=an.exports={},G,Y;function Ht(){throw new Error("setTimeout has not been defined")}function $t(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?G=setTimeout:G=Ht}catch{G=Ht}try{typeof clearTimeout=="function"?Y=clearTimeout:Y=$t}catch{Y=$t}})();function nn(r){if(G===setTimeout)return setTimeout(r,0);if((G===Ht||!G)&&setTimeout)return G=setTimeout,setTimeout(r,0);try{return G(r,0)}catch{try{return G.call(null,r,0)}catch{return G.call(this,r,0)}}}function Yo(r){if(Y===clearTimeout)return clearTimeout(r);if((Y===$t||!Y)&&clearTimeout)return Y=clearTimeout,clearTimeout(r);try{return Y(r)}catch{try{return Y.call(null,r)}catch{return Y.call(this,r)}}}var K=[],Ce=!1,ce,ot=-1;function Vo(){!Ce||!ce||(Ce=!1,ce.length?K=ce.concat(K):ot=-1,K.length&&on())}function on(){if(!Ce){var r=nn(Vo);Ce=!0;for(var e=K.length;e;){for(ce=K,K=[];++ot<e;)ce&&ce[ot].run();ot=-1,e=K.length}ce=null,Ce=!1,Yo(r)}}L.nextTick=function(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];K.push(new sn(r,e)),K.length===1&&!Ce&&nn(on)};function sn(r,e){this.fun=r,this.array=e}sn.prototype.run=function(){this.fun.apply(null,this.array)};L.title="browser";L.browser=!0;L.env={};L.argv=[];L.version="";L.versions={};function X(){}L.on=X;L.addListener=X;L.once=X;L.off=X;L.removeListener=X;L.removeAllListeners=X;L.emit=X;L.prependListener=X;L.prependOnceListener=X;L.listeners=function(r){return[]};L.binding=function(r){throw new Error("process.binding is not supported")};L.cwd=function(){return"/"};L.chdir=function(r){throw new Error("process.chdir is not supported")};L.umask=function(){return 0}});var C,v,m=lo(()=>{C=fe().Buffer,v=un()});var fn=S((nf,st)=>{m();var Jo=function(){"use strict";function r(u,a){return a!=null&&u instanceof a}var e;try{e=Map}catch{e=function(){}}var t;try{t=Set}catch{t=function(){}}var n;try{n=Promise}catch{n=function(){}}function i(u,a,c,y,h){typeof a=="object"&&(c=a.depth,y=a.prototype,h=a.includeNonEnumerable,a=a.circular);var _=[],p=[],E=typeof C<"u";typeof a>"u"&&(a=!0),typeof c>"u"&&(c=1/0);function w(b,R){if(b===null)return null;if(R===0)return b;var x,I;if(typeof b!="object")return b;if(r(b,e))x=new e;else if(r(b,t))x=new t;else if(r(b,n))x=new n(function(Ne,Me){b.then(function(De){Ne(w(De,R-1))},function(De){Me(w(De,R-1))})});else if(i.__isArray(b))x=[];else if(i.__isRegExp(b))x=new RegExp(b.source,d(b)),b.lastIndex&&(x.lastIndex=b.lastIndex);else if(i.__isDate(b))x=new Date(b.getTime());else{if(E&&C.isBuffer(b))return C.allocUnsafe?x=C.allocUnsafe(b.length):x=new C(b.length),b.copy(x),x;r(b,Error)?x=Object.create(b):typeof y>"u"?(I=Object.getPrototypeOf(b),x=Object.create(I)):(x=Object.create(y),I=y)}if(a){var F=_.indexOf(b);if(F!=-1)return p[F];_.push(b),p.push(x)}r(b,e)&&b.forEach(function(Ne,Me){var De=w(Me,R-1),oo=w(Ne,R-1);x.set(De,oo)}),r(b,t)&&b.forEach(function(Ne){var Me=w(Ne,R-1);x.add(Me)});for(var M in b){var Fe;I&&(Fe=Object.getOwnPropertyDescriptor(I,M)),!(Fe&&Fe.set==null)&&(x[M]=w(b[M],R-1))}if(Object.getOwnPropertySymbols)for(var Fr=Object.getOwnPropertySymbols(b),M=0;M<Fr.length;M++){var Ze=Fr[M],me=Object.getOwnPropertyDescriptor(b,Ze);me&&!me.enumerable&&!h||(x[Ze]=w(b[Ze],R-1),me.enumerable||Object.defineProperty(x,Ze,{enumerable:!1}))}if(h)for(var Nr=Object.getOwnPropertyNames(b),M=0;M<Nr.length;M++){var et=Nr[M],me=Object.getOwnPropertyDescriptor(b,et);me&&me.enumerable||(x[et]=w(b[et],R-1),Object.defineProperty(x,et,{enumerable:!1}))}return x}return w(u,c)}i.clonePrototype=function(a){if(a===null)return null;var c=function(){};return c.prototype=a,new c};function o(u){return Object.prototype.toString.call(u)}i.__objToStr=o;function s(u){return typeof u=="object"&&o(u)==="[object Date]"}i.__isDate=s;function f(u){return typeof u=="object"&&o(u)==="[object Array]"}i.__isArray=f;function l(u){return typeof u=="object"&&o(u)==="[object RegExp]"}i.__isRegExp=l;function d(u){var a="";return u.global&&(a+="g"),u.ignoreCase&&(a+="i"),u.multiline&&(a+="m"),a}return i.__getRegExpFlags=d,i}();typeof st=="object"&&st.exports&&(st.exports=Jo)});var ln=S((sf,cn)=>{m();var Se=1e3,xe=Se*60,Te=xe*60,le=Te*24,zo=le*7,Ko=le*365.25;cn.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return Xo(r);if(t==="number"&&isFinite(r))return e.long?Zo(r):Qo(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function Xo(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(!!e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*Ko;case"weeks":case"week":case"w":return t*zo;case"days":case"day":case"d":return t*le;case"hours":case"hour":case"hrs":case"hr":case"h":return t*Te;case"minutes":case"minute":case"mins":case"min":case"m":return t*xe;case"seconds":case"second":case"secs":case"sec":case"s":return t*Se;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Qo(r){var e=Math.abs(r);return e>=le?Math.round(r/le)+"d":e>=Te?Math.round(r/Te)+"h":e>=xe?Math.round(r/xe)+"m":e>=Se?Math.round(r/Se)+"s":r+"ms"}function Zo(r){var e=Math.abs(r);return e>=le?at(r,e,le,"day"):e>=Te?at(r,e,Te,"hour"):e>=xe?at(r,e,xe,"minute"):e>=Se?at(r,e,Se,"second"):r+" ms"}function at(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var dn=S((uf,hn)=>{m();function es(r){t.debug=t,t.default=t,t.coerce=l,t.disable=o,t.enable=i,t.enabled=s,t.humanize=ln(),t.destroy=d,Object.keys(r).forEach(u=>{t[u]=r[u]}),t.names=[],t.skips=[],t.formatters={};function e(u){let a=0;for(let c=0;c<u.length;c++)a=(a<<5)-a+u.charCodeAt(c),a|=0;return t.colors[Math.abs(a)%t.colors.length]}t.selectColor=e;function t(u){let a,c=null,y,h;function _(...p){if(!_.enabled)return;let E=_,w=Number(new Date),b=w-(a||w);E.diff=b,E.prev=a,E.curr=w,a=w,p[0]=t.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");let R=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,(I,F)=>{if(I==="%%")return"%";R++;let M=t.formatters[F];if(typeof M=="function"){let Fe=p[R];I=M.call(E,Fe),p.splice(R,1),R--}return I}),t.formatArgs.call(E,p),(E.log||t.log).apply(E,p)}return _.namespace=u,_.useColors=t.useColors(),_.color=t.selectColor(u),_.extend=n,_.destroy=t.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>c!==null?c:(y!==t.namespaces&&(y=t.namespaces,h=t.enabled(u)),h),set:p=>{c=p}}),typeof t.init=="function"&&t.init(_),_}function n(u,a){let c=t(this.namespace+(typeof a>"u"?":":a)+u);return c.log=this.log,c}function i(u){t.save(u),t.namespaces=u,t.names=[],t.skips=[];let a,c=(typeof u=="string"?u:"").split(/[\s,]+/),y=c.length;for(a=0;a<y;a++)!c[a]||(u=c[a].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.slice(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function o(){let u=[...t.names.map(f),...t.skips.map(f).map(a=>"-"+a)].join(",");return t.enable(""),u}function s(u){if(u[u.length-1]==="*")return!0;let a,c;for(a=0,c=t.skips.length;a<c;a++)if(t.skips[a].test(u))return!1;for(a=0,c=t.names.length;a<c;a++)if(t.names[a].test(u))return!0;return!1}function f(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function l(u){return u instanceof Error?u.stack||u.message:u}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}hn.exports=es});var ft=S((U,ut)=>{m();U.formatArgs=rs;U.save=ns;U.load=is;U.useColors=ts;U.storage=os();U.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();U.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function ts(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function rs(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+ut.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}U.log=console.debug||console.log||(()=>{});function ns(r){try{r?U.storage.setItem("debug",r):U.storage.removeItem("debug")}catch{}}function is(){let r;try{r=U.storage.getItem("debug")}catch{}return!r&&typeof v<"u"&&"env"in v&&(r=v.env.DEBUG),r}function os(){try{return localStorage}catch{}}ut.exports=dn()(U);var{formatters:ss}=ut.exports;ss.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var gn=S((lf,pn)=>{m();pn.exports=function(){if(typeof globalThis>"u")return null;var e={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}});var Yt=S((Gt,_n)=>{m();var ct=fe(),V=ct.Buffer;function yn(r,e){for(var t in r)e[t]=r[t]}V.from&&V.alloc&&V.allocUnsafe&&V.allocUnsafeSlow?_n.exports=ct:(yn(ct,Gt),Gt.Buffer=he);function he(r,e,t){return V(r,e,t)}he.prototype=Object.create(V.prototype);yn(V,he);he.from=function(r,e,t){if(typeof r=="number")throw new TypeError("Argument must not be a number");return V(r,e,t)};he.alloc=function(r,e,t){if(typeof r!="number")throw new TypeError("Argument must be a number");var n=V(r);return e!==void 0?typeof t=="string"?n.fill(e,t):n.fill(e):n.fill(0),n};he.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return V(r)};he.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return ct.SlowBuffer(r)}});var Pe=S((pf,Jt)=>{"use strict";m();var Vt=65536,as=4294967295;function us(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var fs=Yt().Buffer,lt=global.crypto||global.msCrypto;lt&&lt.getRandomValues?Jt.exports=cs:Jt.exports=us;function cs(r,e){if(r>as)throw new RangeError("requested too many random bytes");var t=fs.allocUnsafe(r);if(r>0)if(r>Vt)for(var n=0;n<r;n+=Vt)lt.getRandomValues(t.slice(n,n+Vt));else lt.getRandomValues(t);return typeof e=="function"?v.nextTick(function(){e(null,t)}):t}});var je=S((yf,zt)=>{"use strict";m();var Ae=typeof Reflect=="object"?Reflect:null,wn=Ae&&typeof Ae.apply=="function"?Ae.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},ht;Ae&&typeof Ae.ownKeys=="function"?ht=Ae.ownKeys:Object.getOwnPropertySymbols?ht=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ht=function(e){return Object.getOwnPropertyNames(e)};function ls(r){console&&console.warn&&console.warn(r)}var bn=Number.isNaN||function(e){return e!==e};function B(){B.init.call(this)}zt.exports=B;zt.exports.once=gs;B.EventEmitter=B;B.prototype._events=void 0;B.prototype._eventsCount=0;B.prototype._maxListeners=void 0;var mn=10;function dt(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(B,"defaultMaxListeners",{enumerable:!0,get:function(){return mn},set:function(r){if(typeof r!="number"||r<0||bn(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");mn=r}});B.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};B.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||bn(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function En(r){return r._maxListeners===void 0?B.defaultMaxListeners:r._maxListeners}B.prototype.getMaxListeners=function(){return En(this)};B.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var f=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw f.context=s,f}var l=o[e];if(l===void 0)return!1;if(typeof l=="function")wn(l,this,t);else for(var d=l.length,u=xn(l,d),n=0;n<d;++n)wn(u[n],this,t);return!0};function vn(r,e,t,n){var i,o,s;if(dt(t),o=r._events,o===void 0?(o=r._events=Object.create(null),r._eventsCount=0):(o.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),s=o[e]),s===void 0)s=o[e]=t,++r._eventsCount;else if(typeof s=="function"?s=o[e]=n?[t,s]:[s,t]:n?s.unshift(t):s.push(t),i=En(r),i>0&&s.length>i&&!s.warned){s.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=r,f.type=e,f.count=s.length,ls(f)}return r}B.prototype.addListener=function(e,t){return vn(this,e,t,!1)};B.prototype.on=B.prototype.addListener;B.prototype.prependListener=function(e,t){return vn(this,e,t,!0)};function hs(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Rn(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=hs.bind(n);return i.listener=t,n.wrapFn=i,i}B.prototype.once=function(e,t){return dt(t),this.on(e,Rn(this,e,t)),this};B.prototype.prependOnceListener=function(e,t){return dt(t),this.prependListener(e,Rn(this,e,t)),this};B.prototype.removeListener=function(e,t){var n,i,o,s,f;if(dt(t),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(o=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){f=n[s].listener,o=s;break}if(o<0)return this;o===0?n.shift():ds(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,f||t)}return this};B.prototype.off=B.prototype.removeListener;B.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function Cn(r,e,t){var n=r._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?ps(i):xn(i,i.length)}B.prototype.listeners=function(e){return Cn(this,e,!0)};B.prototype.rawListeners=function(e){return Cn(this,e,!1)};B.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):Sn.call(r,e)};B.prototype.listenerCount=Sn;function Sn(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}B.prototype.eventNames=function(){return this._eventsCount>0?ht(this._events):[]};function xn(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function ds(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function ps(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function gs(r,e){return new Promise(function(t,n){function i(s){r.removeListener(e,o),n(s)}function o(){typeof r.removeListener=="function"&&r.removeListener("error",i),t([].slice.call(arguments))}Tn(r,e,o,{once:!0}),e!=="error"&&ys(r,i,{once:!0})})}function ys(r,e,t){typeof r.on=="function"&&Tn(r,"error",e,t)}function Tn(r,e,t,n){if(typeof r.on=="function")n.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function i(o){n.once&&r.removeEventListener(e,i),t(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}});var Kt=S((wf,An)=>{m();An.exports=je().EventEmitter});var Xt=S(()=>{m()});var On=S((Rf,Bn)=>{"use strict";m();function kn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function _s(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kn(Object(t),!0).forEach(function(n){ws(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):kn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function ws(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function ms(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function In(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function bs(r,e,t){return e&&In(r.prototype,e),t&&In(r,t),r}var Es=fe(),pt=Es.Buffer,vs=Xt(),Qt=vs.inspect,Rs=Qt&&Qt.custom||"inspect";function Cs(r,e,t){pt.prototype.copy.call(r,e,t)}Bn.exports=function(){function r(){ms(this,r),this.head=null,this.tail=null,this.length=0}return bs(r,[{key:"push",value:function(t){var n={data:t,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(t){var n={data:t,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=t+n.data;return i}},{key:"concat",value:function(t){if(this.length===0)return pt.alloc(0);for(var n=pt.allocUnsafe(t>>>0),i=this.head,o=0;i;)Cs(i.data,n,o),o+=i.data.length,i=i.next;return n}},{key:"consume",value:function(t,n){var i;return t<this.head.data.length?(i=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):t===this.head.data.length?i=this.shift():i=n?this._getString(t):this._getBuffer(t),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var n=this.head,i=1,o=n.data;for(t-=o.length;n=n.next;){var s=n.data,f=t>s.length?s.length:t;if(f===s.length?o+=s:o+=s.slice(0,t),t-=f,t===0){f===s.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=s.slice(f));break}++i}return this.length-=i,o}},{key:"_getBuffer",value:function(t){var n=pt.allocUnsafe(t),i=this.head,o=1;for(i.data.copy(n),t-=i.data.length;i=i.next;){var s=i.data,f=t>s.length?s.length:t;if(s.copy(n,n.length-t,0,f),t-=f,t===0){f===s.length?(++o,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=s.slice(f));break}++o}return this.length-=o,n}},{key:Rs,value:function(t,n){return Qt(this,_s({},n,{depth:0,customInspect:!1}))}}]),r}()});var er=S((Sf,Fn)=>{"use strict";m();function Ss(r,e){var t=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,v.nextTick(Zt,this,r)):v.nextTick(Zt,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(o){!e&&o?t._writableState?t._writableState.errorEmitted?v.nextTick(gt,t):(t._writableState.errorEmitted=!0,v.nextTick(Ln,t,o)):v.nextTick(Ln,t,o):e?(v.nextTick(gt,t),e(o)):v.nextTick(gt,t)}),this)}function Ln(r,e){Zt(r,e),gt(r)}function gt(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function xs(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Zt(r,e){r.emit("error",e)}function Ts(r,e){var t=r._readableState,n=r._writableState;t&&t.autoDestroy||n&&n.autoDestroy?r.destroy(e):r.emit("error",e)}Fn.exports={destroy:Ss,undestroy:xs,errorOrDestroy:Ts}});var de=S((Tf,Dn)=>{"use strict";m();function As(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}var Mn={};function j(r,e,t){t||(t=Error);function n(o,s,f){return typeof e=="string"?e:e(o,s,f)}var i=function(o){As(s,o);function s(f,l,d){return o.call(this,n(f,l,d))||this}return s}(t);i.prototype.name=t.name,i.prototype.code=r,Mn[r]=i}function Nn(r,e){if(Array.isArray(r)){var t=r.length;return r=r.map(function(n){return String(n)}),t>2?"one of ".concat(e," ").concat(r.slice(0,t-1).join(", "),", or ")+r[t-1]:t===2?"one of ".concat(e," ").concat(r[0]," or ").concat(r[1]):"of ".concat(e," ").concat(r[0])}else return"of ".concat(e," ").concat(String(r))}function ks(r,e,t){return r.substr(!t||t<0?0:+t,e.length)===e}function Is(r,e,t){return(t===void 0||t>r.length)&&(t=r.length),r.substring(t-e.length,t)===e}function Bs(r,e,t){return typeof t!="number"&&(t=0),t+e.length>r.length?!1:r.indexOf(e,t)!==-1}j("ERR_INVALID_OPT_VALUE",function(r,e){return'The value "'+e+'" is invalid for option "'+r+'"'},TypeError);j("ERR_INVALID_ARG_TYPE",function(r,e,t){var n;typeof e=="string"&&ks(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(Is(r," argument"))i="The ".concat(r," ").concat(n," ").concat(Nn(e,"type"));else{var o=Bs(r,".")?"property":"argument";i='The "'.concat(r,'" ').concat(o," ").concat(n," ").concat(Nn(e,"type"))}return i+=". Received type ".concat(typeof t),i},TypeError);j("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");j("ERR_METHOD_NOT_IMPLEMENTED",function(r){return"The "+r+" method is not implemented"});j("ERR_STREAM_PREMATURE_CLOSE","Premature close");j("ERR_STREAM_DESTROYED",function(r){return"Cannot call "+r+" after a stream was destroyed"});j("ERR_MULTIPLE_CALLBACK","Callback called multiple times");j("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");j("ERR_STREAM_WRITE_AFTER_END","write after end");j("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);j("ERR_UNKNOWN_ENCODING",function(r){return"Unknown encoding: "+r},TypeError);j("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Dn.exports.codes=Mn});var tr=S((kf,Un)=>{"use strict";m();var Os=de().codes.ERR_INVALID_OPT_VALUE;function Ls(r,e,t){return r.highWaterMark!=null?r.highWaterMark:e?r[t]:null}function Fs(r,e,t,n){var i=Ls(e,n,t);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var o=n?t:"highWaterMark";throw new Os(o,i)}return Math.floor(i)}return r.objectMode?16:16*1024}Un.exports={getHighWaterMark:Fs}});var ke=S((Bf,rr)=>{m();typeof Object.create=="function"?rr.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:rr.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}});var jn=S((Lf,Pn)=>{m();Pn.exports=Ns;function Ns(r,e){if(nr("noDeprecation"))return r;var t=!1;function n(){if(!t){if(nr("throwDeprecation"))throw new Error(e);nr("traceDeprecation")?console.trace(e):console.warn(e),t=!0}return r.apply(this,arguments)}return n}function nr(r){try{if(!global.localStorage)return!1}catch{return!1}var e=global.localStorage[r];return e==null?!1:String(e).toLowerCase()==="true"}});var sr=S((Nf,Yn)=>{"use strict";m();Yn.exports=O;function Wn(r){var e=this;this.next=null,this.entry=null,this.finish=function(){ua(e,r)}}var Ie;O.WritableState=We;var Ms={deprecate:jn()},Hn=Kt(),_t=fe().Buffer,Ds=global.Uint8Array||function(){};function Us(r){return _t.from(r)}function Ps(r){return _t.isBuffer(r)||r instanceof Ds}var or=er(),js=tr(),qs=js.getHighWaterMark,re=de().codes,Ws=re.ERR_INVALID_ARG_TYPE,Hs=re.ERR_METHOD_NOT_IMPLEMENTED,$s=re.ERR_MULTIPLE_CALLBACK,Gs=re.ERR_STREAM_CANNOT_PIPE,Ys=re.ERR_STREAM_DESTROYED,Vs=re.ERR_STREAM_NULL_VALUES,Js=re.ERR_STREAM_WRITE_AFTER_END,zs=re.ERR_UNKNOWN_ENCODING,Be=or.errorOrDestroy;ke()(O,Hn);function Ks(){}function We(r,e,t){Ie=Ie||pe(),r=r||{},typeof t!="boolean"&&(t=e instanceof Ie),this.objectMode=!!r.objectMode,t&&(this.objectMode=this.objectMode||!!r.writableObjectMode),this.highWaterMark=qs(this,r,"writableHighWaterMark",t),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=r.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){na(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=r.emitClose!==!1,this.autoDestroy=!!r.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new Wn(this)}We.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};(function(){try{Object.defineProperty(We.prototype,"buffer",{get:Ms.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var yt;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(yt=Function.prototype[Symbol.hasInstance],Object.defineProperty(O,Symbol.hasInstance,{value:function(e){return yt.call(this,e)?!0:this!==O?!1:e&&e._writableState instanceof We}})):yt=function(e){return e instanceof this};function O(r){Ie=Ie||pe();var e=this instanceof Ie;if(!e&&!yt.call(O,this))return new O(r);this._writableState=new We(r,this,e),this.writable=!0,r&&(typeof r.write=="function"&&(this._write=r.write),typeof r.writev=="function"&&(this._writev=r.writev),typeof r.destroy=="function"&&(this._destroy=r.destroy),typeof r.final=="function"&&(this._final=r.final)),Hn.call(this)}O.prototype.pipe=function(){Be(this,new Gs)};function Xs(r,e){var t=new Js;Be(r,t),v.nextTick(e,t)}function Qs(r,e,t,n){var i;return t===null?i=new Vs:typeof t!="string"&&!e.objectMode&&(i=new Ws("chunk",["string","Buffer"],t)),i?(Be(r,i),v.nextTick(n,i),!1):!0}O.prototype.write=function(r,e,t){var n=this._writableState,i=!1,o=!n.objectMode&&Ps(r);return o&&!_t.isBuffer(r)&&(r=Us(r)),typeof e=="function"&&(t=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),typeof t!="function"&&(t=Ks),n.ending?Xs(this,t):(o||Qs(this,n,r,t))&&(n.pendingcb++,i=ea(this,n,o,r,e,t)),i};O.prototype.cork=function(){this._writableState.corked++};O.prototype.uncork=function(){var r=this._writableState;r.corked&&(r.corked--,!r.writing&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&$n(this,r))};O.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new zs(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(O.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Zs(r,e,t){return!r.objectMode&&r.decodeStrings!==!1&&typeof e=="string"&&(e=_t.from(e,t)),e}Object.defineProperty(O.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ea(r,e,t,n,i,o){if(!t){var s=Zs(e,n,i);n!==s&&(t=!0,i="buffer",n=s)}var f=e.objectMode?1:n.length;e.length+=f;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var d=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:t,callback:o,next:null},d?d.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else ir(r,e,!1,f,n,i,o);return l}function ir(r,e,t,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Ys("write")):t?r._writev(i,e.onwrite):r._write(i,o,e.onwrite),e.sync=!1}function ta(r,e,t,n,i){--e.pendingcb,t?(v.nextTick(i,n),v.nextTick(qe,r,e),r._writableState.errorEmitted=!0,Be(r,n)):(i(n),r._writableState.errorEmitted=!0,Be(r,n),qe(r,e))}function ra(r){r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0}function na(r,e){var t=r._writableState,n=t.sync,i=t.writecb;if(typeof i!="function")throw new $s;if(ra(t),e)ta(r,t,n,e,i);else{var o=Gn(t)||r.destroyed;!o&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&$n(r,t),n?v.nextTick(qn,r,t,o,i):qn(r,t,o,i)}}function qn(r,e,t,n){t||ia(r,e),e.pendingcb--,n(),qe(r,e)}function ia(r,e){e.length===0&&e.needDrain&&(e.needDrain=!1,r.emit("drain"))}function $n(r,e){e.bufferProcessing=!0;var t=e.bufferedRequest;if(r._writev&&t&&t.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=t;for(var s=0,f=!0;t;)i[s]=t,t.isBuf||(f=!1),t=t.next,s+=1;i.allBuffers=f,ir(r,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new Wn(e),e.bufferedRequestCount=0}else{for(;t;){var l=t.chunk,d=t.encoding,u=t.callback,a=e.objectMode?1:l.length;if(ir(r,e,!1,a,l,d,u),t=t.next,e.bufferedRequestCount--,e.writing)break}t===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=t,e.bufferProcessing=!1}O.prototype._write=function(r,e,t){t(new Hs("_write()"))};O.prototype._writev=null;O.prototype.end=function(r,e,t){var n=this._writableState;return typeof r=="function"?(t=r,r=null,e=null):typeof e=="function"&&(t=e,e=null),r!=null&&this.write(r,e),n.corked&&(n.corked=1,this.uncork()),n.ending||aa(this,n,t),this};Object.defineProperty(O.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Gn(r){return r.ending&&r.length===0&&r.bufferedRequest===null&&!r.finished&&!r.writing}function oa(r,e){r._final(function(t){e.pendingcb--,t&&Be(r,t),e.prefinished=!0,r.emit("prefinish"),qe(r,e)})}function sa(r,e){!e.prefinished&&!e.finalCalled&&(typeof r._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,v.nextTick(oa,r,e)):(e.prefinished=!0,r.emit("prefinish")))}function qe(r,e){var t=Gn(e);if(t&&(sa(r,e),e.pendingcb===0&&(e.finished=!0,r.emit("finish"),e.autoDestroy))){var n=r._readableState;(!n||n.autoDestroy&&n.endEmitted)&&r.destroy()}return t}function aa(r,e,t){e.ending=!0,qe(r,e),t&&(e.finished?v.nextTick(t):r.once("finish",t)),e.ended=!0,r.writable=!1}function ua(r,e,t){var n=r.entry;for(r.entry=null;n;){var i=n.callback;e.pendingcb--,i(t),n=n.next}e.corkedRequestsFree.next=r}Object.defineProperty(O.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});O.prototype.destroy=or.destroy;O.prototype._undestroy=or.undestroy;O.prototype._destroy=function(r,e){e(r)}});var pe=S((Df,Jn)=>{"use strict";m();var fa=Object.keys||function(r){var e=[];for(var t in r)e.push(t);return e};Jn.exports=J;var Vn=fr(),ur=sr();ke()(J,Vn);for(ar=fa(ur.prototype),wt=0;wt<ar.length;wt++)mt=ar[wt],J.prototype[mt]||(J.prototype[mt]=ur.prototype[mt]);var ar,mt,wt;function J(r){if(!(this instanceof J))return new J(r);Vn.call(this,r),ur.call(this,r),this.allowHalfOpen=!0,r&&(r.readable===!1&&(this.readable=!1),r.writable===!1&&(this.writable=!1),r.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",ca)))}Object.defineProperty(J.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(J.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(J.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ca(){this._writableState.ended||v.nextTick(la,this)}function la(r){r.end()}Object.defineProperty(J.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var hr=S(Kn=>{"use strict";m();var lr=Yt().Buffer,zn=lr.isEncoding||function(r){switch(r=""+r,r&&r.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function ha(r){if(!r)return"utf8";for(var e;;)switch(r){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return r;default:if(e)return;r=(""+r).toLowerCase(),e=!0}}function da(r){var e=ha(r);if(typeof e!="string"&&(lr.isEncoding===zn||!zn(r)))throw new Error("Unknown encoding: "+r);return e||r}Kn.StringDecoder=He;function He(r){this.encoding=da(r);var e;switch(this.encoding){case"utf16le":this.text=ma,this.end=ba,e=4;break;case"utf8":this.fillLast=ya,e=4;break;case"base64":this.text=Ea,this.end=va,e=3;break;default:this.write=Ra,this.end=Ca;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=lr.allocUnsafe(e)}He.prototype.write=function(r){if(r.length===0)return"";var e,t;if(this.lastNeed){if(e=this.fillLast(r),e===void 0)return"";t=this.lastNeed,this.lastNeed=0}else t=0;return t<r.length?e?e+this.text(r,t):this.text(r,t):e||""};He.prototype.end=wa;He.prototype.text=_a;He.prototype.fillLast=function(r){if(this.lastNeed<=r.length)return r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,r.length),this.lastNeed-=r.length};function cr(r){return r<=127?0:r>>5===6?2:r>>4===14?3:r>>3===30?4:r>>6===2?-1:-2}function pa(r,e,t){var n=e.length-1;if(n<t)return 0;var i=cr(e[n]);return i>=0?(i>0&&(r.lastNeed=i-1),i):--n<t||i===-2?0:(i=cr(e[n]),i>=0?(i>0&&(r.lastNeed=i-2),i):--n<t||i===-2?0:(i=cr(e[n]),i>=0?(i>0&&(i===2?i=0:r.lastNeed=i-3),i):0))}function ga(r,e,t){if((e[0]&192)!==128)return r.lastNeed=0,"\uFFFD";if(r.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return r.lastNeed=1,"\uFFFD";if(r.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return r.lastNeed=2,"\uFFFD"}}function ya(r){var e=this.lastTotal-this.lastNeed,t=ga(this,r,e);if(t!==void 0)return t;if(this.lastNeed<=r.length)return r.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,e,0,r.length),this.lastNeed-=r.length}function _a(r,e){var t=pa(this,r,e);if(!this.lastNeed)return r.toString("utf8",e);this.lastTotal=t;var n=r.length-(t-this.lastNeed);return r.copy(this.lastChar,0,n),r.toString("utf8",e,n)}function wa(r){var e=r&&r.length?this.write(r):"";return this.lastNeed?e+"\uFFFD":e}function ma(r,e){if((r.length-e)%2===0){var t=r.toString("utf16le",e);if(t){var n=t.charCodeAt(t.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1],t.slice(0,-1)}return t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=r[r.length-1],r.toString("utf16le",e,r.length-1)}function ba(r){var e=r&&r.length?this.write(r):"";if(this.lastNeed){var t=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,t)}return e}function Ea(r,e){var t=(r.length-e)%3;return t===0?r.toString("base64",e):(this.lastNeed=3-t,this.lastTotal=3,t===1?this.lastChar[0]=r[r.length-1]:(this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1]),r.toString("base64",e,r.length-t))}function va(r){var e=r&&r.length?this.write(r):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function Ra(r){return r.toString(this.encoding)}function Ca(r){return r&&r.length?this.write(r):""}});var bt=S((qf,Zn)=>{"use strict";m();var Xn=de().codes.ERR_STREAM_PREMATURE_CLOSE;function Sa(r){var e=!1;return function(){if(!e){e=!0;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];r.apply(this,n)}}}function xa(){}function Ta(r){return r.setHeader&&typeof r.abort=="function"}function Qn(r,e,t){if(typeof e=="function")return Qn(r,null,e);e||(e={}),t=Sa(t||xa);var n=e.readable||e.readable!==!1&&r.readable,i=e.writable||e.writable!==!1&&r.writable,o=function(){r.writable||f()},s=r._writableState&&r._writableState.finished,f=function(){i=!1,s=!0,n||t.call(r)},l=r._readableState&&r._readableState.endEmitted,d=function(){n=!1,l=!0,i||t.call(r)},u=function(h){t.call(r,h)},a=function(){var h;if(n&&!l)return(!r._readableState||!r._readableState.ended)&&(h=new Xn),t.call(r,h);if(i&&!s)return(!r._writableState||!r._writableState.ended)&&(h=new Xn),t.call(r,h)},c=function(){r.req.on("finish",f)};return Ta(r)?(r.on("complete",f),r.on("abort",a),r.req?c():r.on("request",c)):i&&!r._writableState&&(r.on("end",o),r.on("close",o)),r.on("end",d),r.on("finish",f),e.error!==!1&&r.on("error",u),r.on("close",a),function(){r.removeListener("complete",f),r.removeListener("abort",a),r.removeListener("request",c),r.req&&r.req.removeListener("finish",f),r.removeListener("end",o),r.removeListener("close",o),r.removeListener("finish",f),r.removeListener("end",d),r.removeListener("error",u),r.removeListener("close",a)}}Zn.exports=Qn});var ti=S((Hf,ei)=>{"use strict";m();var Et;function ne(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var Aa=bt(),ie=Symbol("lastResolve"),ge=Symbol("lastReject"),$e=Symbol("error"),vt=Symbol("ended"),ye=Symbol("lastPromise"),dr=Symbol("handlePromise"),_e=Symbol("stream");function oe(r,e){return{value:r,done:e}}function ka(r){var e=r[ie];if(e!==null){var t=r[_e].read();t!==null&&(r[ye]=null,r[ie]=null,r[ge]=null,e(oe(t,!1)))}}function Ia(r){v.nextTick(ka,r)}function Ba(r,e){return function(t,n){r.then(function(){if(e[vt]){t(oe(void 0,!0));return}e[dr](t,n)},n)}}var Oa=Object.getPrototypeOf(function(){}),La=Object.setPrototypeOf((Et={get stream(){return this[_e]},next:function(){var e=this,t=this[$e];if(t!==null)return Promise.reject(t);if(this[vt])return Promise.resolve(oe(void 0,!0));if(this[_e].destroyed)return new Promise(function(s,f){v.nextTick(function(){e[$e]?f(e[$e]):s(oe(void 0,!0))})});var n=this[ye],i;if(n)i=new Promise(Ba(n,this));else{var o=this[_e].read();if(o!==null)return Promise.resolve(oe(o,!1));i=new Promise(this[dr])}return this[ye]=i,i}},ne(Et,Symbol.asyncIterator,function(){return this}),ne(Et,"return",function(){var e=this;return new Promise(function(t,n){e[_e].destroy(null,function(i){if(i){n(i);return}t(oe(void 0,!0))})})}),Et),Oa),Fa=function(e){var t,n=Object.create(La,(t={},ne(t,_e,{value:e,writable:!0}),ne(t,ie,{value:null,writable:!0}),ne(t,ge,{value:null,writable:!0}),ne(t,$e,{value:null,writable:!0}),ne(t,vt,{value:e._readableState.endEmitted,writable:!0}),ne(t,dr,{value:function(o,s){var f=n[_e].read();f?(n[ye]=null,n[ie]=null,n[ge]=null,o(oe(f,!1))):(n[ie]=o,n[ge]=s)},writable:!0}),t));return n[ye]=null,Aa(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var o=n[ge];o!==null&&(n[ye]=null,n[ie]=null,n[ge]=null,o(i)),n[$e]=i;return}var s=n[ie];s!==null&&(n[ye]=null,n[ie]=null,n[ge]=null,s(oe(void 0,!0))),n[vt]=!0}),e.on("readable",Ia.bind(null,n)),n};ei.exports=Fa});var ni=S((Gf,ri)=>{m();ri.exports=function(){throw new Error("Readable.from is not available in the browser")}});var fr=S((Jf,di)=>{"use strict";m();di.exports=k;var Oe;k.ReadableState=ai;var Vf=je().EventEmitter,si=function(e,t){return e.listeners(t).length},Ye=Kt(),Rt=fe().Buffer,Na=global.Uint8Array||function(){};function Ma(r){return Rt.from(r)}function Da(r){return Rt.isBuffer(r)||r instanceof Na}var pr=Xt(),T;pr&&pr.debuglog?T=pr.debuglog("stream"):T=function(){};var Ua=On(),Er=er(),Pa=tr(),ja=Pa.getHighWaterMark,Ct=de().codes,qa=Ct.ERR_INVALID_ARG_TYPE,Wa=Ct.ERR_STREAM_PUSH_AFTER_EOF,Ha=Ct.ERR_METHOD_NOT_IMPLEMENTED,$a=Ct.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Le,gr,yr;ke()(k,Ye);var Ge=Er.errorOrDestroy,_r=["error","close","destroy","pause","resume"];function Ga(r,e,t){if(typeof r.prependListener=="function")return r.prependListener(e,t);!r._events||!r._events[e]?r.on(e,t):Array.isArray(r._events[e])?r._events[e].unshift(t):r._events[e]=[t,r._events[e]]}function ai(r,e,t){Oe=Oe||pe(),r=r||{},typeof t!="boolean"&&(t=e instanceof Oe),this.objectMode=!!r.objectMode,t&&(this.objectMode=this.objectMode||!!r.readableObjectMode),this.highWaterMark=ja(this,r,"readableHighWaterMark",t),this.buffer=new Ua,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=r.emitClose!==!1,this.autoDestroy=!!r.autoDestroy,this.destroyed=!1,this.defaultEncoding=r.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,r.encoding&&(Le||(Le=hr().StringDecoder),this.decoder=new Le(r.encoding),this.encoding=r.encoding)}function k(r){if(Oe=Oe||pe(),!(this instanceof k))return new k(r);var e=this instanceof Oe;this._readableState=new ai(r,this,e),this.readable=!0,r&&(typeof r.read=="function"&&(this._read=r.read),typeof r.destroy=="function"&&(this._destroy=r.destroy)),Ye.call(this)}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});k.prototype.destroy=Er.destroy;k.prototype._undestroy=Er.undestroy;k.prototype._destroy=function(r,e){e(r)};k.prototype.push=function(r,e){var t=this._readableState,n;return t.objectMode?n=!0:typeof r=="string"&&(e=e||t.defaultEncoding,e!==t.encoding&&(r=Rt.from(r,e),e=""),n=!0),ui(this,r,e,!1,n)};k.prototype.unshift=function(r){return ui(this,r,null,!0,!1)};function ui(r,e,t,n,i){T("readableAddChunk",e);var o=r._readableState;if(e===null)o.reading=!1,Ja(r,o);else{var s;if(i||(s=Ya(o,e)),s)Ge(r,s);else if(o.objectMode||e&&e.length>0)if(typeof e!="string"&&!o.objectMode&&Object.getPrototypeOf(e)!==Rt.prototype&&(e=Ma(e)),n)o.endEmitted?Ge(r,new $a):wr(r,o,e,!0);else if(o.ended)Ge(r,new Wa);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!t?(e=o.decoder.write(e),o.objectMode||e.length!==0?wr(r,o,e,!1):br(r,o)):wr(r,o,e,!1)}else n||(o.reading=!1,br(r,o))}return!o.ended&&(o.length<o.highWaterMark||o.length===0)}function wr(r,e,t,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,r.emit("data",t)):(e.length+=e.objectMode?1:t.length,n?e.buffer.unshift(t):e.buffer.push(t),e.needReadable&&St(r)),br(r,e)}function Ya(r,e){var t;return!Da(e)&&typeof e!="string"&&e!==void 0&&!r.objectMode&&(t=new qa("chunk",["string","Buffer","Uint8Array"],e)),t}k.prototype.isPaused=function(){return this._readableState.flowing===!1};k.prototype.setEncoding=function(r){Le||(Le=hr().StringDecoder);var e=new Le(r);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var t=this._readableState.buffer.head,n="";t!==null;)n+=e.write(t.data),t=t.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var ii=1073741824;function Va(r){return r>=ii?r=ii:(r--,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r++),r}function oi(r,e){return r<=0||e.length===0&&e.ended?0:e.objectMode?1:r!==r?e.flowing&&e.length?e.buffer.head.data.length:e.length:(r>e.highWaterMark&&(e.highWaterMark=Va(r)),r<=e.length?r:e.ended?e.length:(e.needReadable=!0,0))}k.prototype.read=function(r){T("read",r),r=parseInt(r,10);var e=this._readableState,t=r;if(r!==0&&(e.emittedReadable=!1),r===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return T("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?mr(this):St(this),null;if(r=oi(r,e),r===0&&e.ended)return e.length===0&&mr(this),null;var n=e.needReadable;T("need readable",n),(e.length===0||e.length-r<e.highWaterMark)&&(n=!0,T("length less than watermark",n)),e.ended||e.reading?(n=!1,T("reading or ended",n)):n&&(T("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(r=oi(t,e)));var i;return r>0?i=li(r,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,r=0):(e.length-=r,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),t!==r&&e.ended&&mr(this)),i!==null&&this.emit("data",i),i};function Ja(r,e){if(T("onEofChunk"),!e.ended){if(e.decoder){var t=e.decoder.end();t&&t.length&&(e.buffer.push(t),e.length+=e.objectMode?1:t.length)}e.ended=!0,e.sync?St(r):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,fi(r)))}}function St(r){var e=r._readableState;T("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(T("emitReadable",e.flowing),e.emittedReadable=!0,v.nextTick(fi,r))}function fi(r){var e=r._readableState;T("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(r.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,vr(r)}function br(r,e){e.readingMore||(e.readingMore=!0,v.nextTick(za,r,e))}function za(r,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var t=e.length;if(T("maybeReadMore read 0"),r.read(0),t===e.length)break}e.readingMore=!1}k.prototype._read=function(r){Ge(this,new Ha("_read()"))};k.prototype.pipe=function(r,e){var t=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=r;break;case 1:n.pipes=[n.pipes,r];break;default:n.pipes.push(r);break}n.pipesCount+=1,T("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&r!==v.stdout&&r!==v.stderr,o=i?f:_;n.endEmitted?v.nextTick(o):t.once("end",o),r.on("unpipe",s);function s(p,E){T("onunpipe"),p===t&&E&&E.hasUnpiped===!1&&(E.hasUnpiped=!0,u())}function f(){T("onend"),r.end()}var l=Ka(t);r.on("drain",l);var d=!1;function u(){T("cleanup"),r.removeListener("close",y),r.removeListener("finish",h),r.removeListener("drain",l),r.removeListener("error",c),r.removeListener("unpipe",s),t.removeListener("end",f),t.removeListener("end",_),t.removeListener("data",a),d=!0,n.awaitDrain&&(!r._writableState||r._writableState.needDrain)&&l()}t.on("data",a);function a(p){T("ondata");var E=r.write(p);T("dest.write",E),E===!1&&((n.pipesCount===1&&n.pipes===r||n.pipesCount>1&&hi(n.pipes,r)!==-1)&&!d&&(T("false write response, pause",n.awaitDrain),n.awaitDrain++),t.pause())}function c(p){T("onerror",p),_(),r.removeListener("error",c),si(r,"error")===0&&Ge(r,p)}Ga(r,"error",c);function y(){r.removeListener("finish",h),_()}r.once("close",y);function h(){T("onfinish"),r.removeListener("close",y),_()}r.once("finish",h);function _(){T("unpipe"),t.unpipe(r)}return r.emit("pipe",t),n.flowing||(T("pipe resume"),t.resume()),r};function Ka(r){return function(){var t=r._readableState;T("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&si(r,"data")&&(t.flowing=!0,vr(r))}}k.prototype.unpipe=function(r){var e=this._readableState,t={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return r&&r!==e.pipes?this:(r||(r=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,r&&r.emit("unpipe",this,t),this);if(!r){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=hi(e.pipes,r);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),r.emit("unpipe",this,t),this)};k.prototype.on=function(r,e){var t=Ye.prototype.on.call(this,r,e),n=this._readableState;return r==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):r==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,T("on readable",n.length,n.reading),n.length?St(this):n.reading||v.nextTick(Xa,this)),t};k.prototype.addListener=k.prototype.on;k.prototype.removeListener=function(r,e){var t=Ye.prototype.removeListener.call(this,r,e);return r==="readable"&&v.nextTick(ci,this),t};k.prototype.removeAllListeners=function(r){var e=Ye.prototype.removeAllListeners.apply(this,arguments);return(r==="readable"||r===void 0)&&v.nextTick(ci,this),e};function ci(r){var e=r._readableState;e.readableListening=r.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:r.listenerCount("data")>0&&r.resume()}function Xa(r){T("readable nexttick read 0"),r.read(0)}k.prototype.resume=function(){var r=this._readableState;return r.flowing||(T("resume"),r.flowing=!r.readableListening,Qa(this,r)),r.paused=!1,this};function Qa(r,e){e.resumeScheduled||(e.resumeScheduled=!0,v.nextTick(Za,r,e))}function Za(r,e){T("resume",e.reading),e.reading||r.read(0),e.resumeScheduled=!1,r.emit("resume"),vr(r),e.flowing&&!e.reading&&r.read(0)}k.prototype.pause=function(){return T("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(T("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function vr(r){var e=r._readableState;for(T("flow",e.flowing);e.flowing&&r.read()!==null;);}k.prototype.wrap=function(r){var e=this,t=this._readableState,n=!1;r.on("end",function(){if(T("wrapped end"),t.decoder&&!t.ended){var s=t.decoder.end();s&&s.length&&e.push(s)}e.push(null)}),r.on("data",function(s){if(T("wrapped data"),t.decoder&&(s=t.decoder.write(s)),!(t.objectMode&&s==null)&&!(!t.objectMode&&(!s||!s.length))){var f=e.push(s);f||(n=!0,r.pause())}});for(var i in r)this[i]===void 0&&typeof r[i]=="function"&&(this[i]=function(f){return function(){return r[f].apply(r,arguments)}}(i));for(var o=0;o<_r.length;o++)r.on(_r[o],this.emit.bind(this,_r[o]));return this._read=function(s){T("wrapped _read",s),n&&(n=!1,r.resume())},this};typeof Symbol=="function"&&(k.prototype[Symbol.asyncIterator]=function(){return gr===void 0&&(gr=ti()),gr(this)});Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});k._fromList=li;Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function li(r,e){if(e.length===0)return null;var t;return e.objectMode?t=e.buffer.shift():!r||r>=e.length?(e.decoder?t=e.buffer.join(""):e.buffer.length===1?t=e.buffer.first():t=e.buffer.concat(e.length),e.buffer.clear()):t=e.buffer.consume(r,e.decoder),t}function mr(r){var e=r._readableState;T("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,v.nextTick(eu,e,r))}function eu(r,e){if(T("endReadableNT",r.endEmitted,r.length),!r.endEmitted&&r.length===0&&(r.endEmitted=!0,e.readable=!1,e.emit("end"),r.autoDestroy)){var t=e._writableState;(!t||t.autoDestroy&&t.finished)&&e.destroy()}}typeof Symbol=="function"&&(k.from=function(r,e){return yr===void 0&&(yr=ni()),yr(k,r,e)});function hi(r,e){for(var t=0,n=r.length;t<n;t++)if(r[t]===e)return t;return-1}});var Rr=S((Kf,gi)=>{"use strict";m();gi.exports=Q;var xt=de().codes,tu=xt.ERR_METHOD_NOT_IMPLEMENTED,ru=xt.ERR_MULTIPLE_CALLBACK,nu=xt.ERR_TRANSFORM_ALREADY_TRANSFORMING,iu=xt.ERR_TRANSFORM_WITH_LENGTH_0,Tt=pe();ke()(Q,Tt);function ou(r,e){var t=this._transformState;t.transforming=!1;var n=t.writecb;if(n===null)return this.emit("error",new ru);t.writechunk=null,t.writecb=null,e!=null&&this.push(e),n(r);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Q(r){if(!(this instanceof Q))return new Q(r);Tt.call(this,r),this._transformState={afterTransform:ou.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&(typeof r.transform=="function"&&(this._transform=r.transform),typeof r.flush=="function"&&(this._flush=r.flush)),this.on("prefinish",su)}function su(){var r=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,t){pi(r,e,t)}):pi(this,null,null)}Q.prototype.push=function(r,e){return this._transformState.needTransform=!1,Tt.prototype.push.call(this,r,e)};Q.prototype._transform=function(r,e,t){t(new tu("_transform()"))};Q.prototype._write=function(r,e,t){var n=this._transformState;if(n.writecb=t,n.writechunk=r,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Q.prototype._read=function(r){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Q.prototype._destroy=function(r,e){Tt.prototype._destroy.call(this,r,function(t){e(t)})};function pi(r,e,t){if(e)return r.emit("error",e);if(t!=null&&r.push(t),r._writableState.length)throw new iu;if(r._transformState.transforming)throw new nu;return r.push(null)}});var wi=S((Qf,_i)=>{"use strict";m();_i.exports=Ve;var yi=Rr();ke()(Ve,yi);function Ve(r){if(!(this instanceof Ve))return new Ve(r);yi.call(this,r)}Ve.prototype._transform=function(r,e,t){t(null,r)}});var Ri=S((ec,vi)=>{"use strict";m();var Cr;function au(r){var e=!1;return function(){e||(e=!0,r.apply(void 0,arguments))}}var Ei=de().codes,uu=Ei.ERR_MISSING_ARGS,fu=Ei.ERR_STREAM_DESTROYED;function mi(r){if(r)throw r}function cu(r){return r.setHeader&&typeof r.abort=="function"}function lu(r,e,t,n){n=au(n);var i=!1;r.on("close",function(){i=!0}),Cr===void 0&&(Cr=bt()),Cr(r,{readable:e,writable:t},function(s){if(s)return n(s);i=!0,n()});var o=!1;return function(s){if(!i&&!o){if(o=!0,cu(r))return r.abort();if(typeof r.destroy=="function")return r.destroy();n(s||new fu("pipe"))}}}function bi(r){r()}function hu(r,e){return r.pipe(e)}function du(r){return!r.length||typeof r[r.length-1]!="function"?mi:r.pop()}function pu(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];var n=du(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new uu("streams");var i,o=e.map(function(s,f){var l=f<e.length-1,d=f>0;return lu(s,l,d,function(u){i||(i=u),u&&o.forEach(bi),!l&&(o.forEach(bi),n(i))})});return e.reduce(hu)}vi.exports=pu});var Sr=S((q,Ci)=>{m();q=Ci.exports=fr();q.Stream=q;q.Readable=q;q.Writable=sr();q.Duplex=pe();q.Transform=Rr();q.PassThrough=wi();q.finished=bt();q.pipeline=Ri()});var xr=S((nc,xi)=>{m();var Si;xi.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:global):r=>(Si||(Si=Promise.resolve())).then(r).catch(e=>setTimeout(()=>{throw e},0))});var ki=S((oc,Ai)=>{"use strict";m();function Ti(r,e){for(let t in e)Object.defineProperty(r,t,{value:e[t],enumerable:!0,configurable:!0});return r}function gu(r,e,t){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof e=="object"&&(t=e,e=""),e&&(t.code=e);try{return Ti(r,t)}catch{t.message=r.message,t.stack=r.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(r)),Ti(new i,t)}}Ai.exports=gu});var Fi=S((ac,Li)=>{m();var yu=ft()("simple-peer"),Oi=gn(),Ii=Pe(),_u=Sr(),Tr=xr(),A=ki(),{Buffer:wu}=fe(),Ar=64*1024,mu=5*1e3,bu=5*1e3;function Bi(r){return r.replace(/a=ice-options:trickle\s\n/g,"")}function Eu(r){console.warn(r)}var Z=class extends _u.Duplex{constructor(e){if(e=Object.assign({allowHalfOpen:!1},e),super(e),this._id=Ii(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||Ii(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||Z.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},Z.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(t=>t),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=e.trickle!==void 0?e.trickle:!0,this.allowHalfTrickle=e.allowHalfTrickle!==void 0?e.allowHalfTrickle:!1,this.iceCompleteTimeout=e.iceCompleteTimeout||mu,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&typeof e.wrtc=="object"?e.wrtc:Oi(),!this._wrtc)throw A(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(t){this.destroy(A(t,"ERR_PC_CONSTRUCTOR"));return}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=t=>{this._onIceCandidate(t)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(t=>{this.destroy(A(t,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=t=>{this._setupData(t)},this.streams&&this.streams.forEach(t=>{this.addStream(t)}),this._pc.ontrack=t=>{this._onTrack(t)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(!this.destroying){if(this.destroyed)throw A(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof e=="string")try{e=JSON.parse(e)}catch{e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(t=>{this._addIceCandidate(t)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(t=>{this.destroy(A(t,"ERR_SET_REMOTE_DESCRIPTION"))}),!e.sdp&&!e.candidate&&!e.renegotiate&&!e.transceiverRequest&&this.destroy(A(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(e){let t=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(t).catch(n=>{!t.address||t.address.endsWith(".local")?Eu("Ignoring unsupported ICE candidate."):this.destroy(A(n,"ERR_ADD_ICE_CANDIDATE"))})}send(e){if(!this.destroying){if(this.destroyed)throw A(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(e)}}addTransceiver(e,t){if(!this.destroying){if(this.destroyed)throw A(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,t),this._needsNegotiation()}catch(n){this.destroy(A(n,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:e,init:t}})}}addStream(e){if(!this.destroying){if(this.destroyed)throw A(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),e.getTracks().forEach(t=>{this.addTrack(t,e)})}}addTrack(e,t){if(this.destroying)return;if(this.destroyed)throw A(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");let n=this._senderMap.get(e)||new Map,i=n.get(t);if(!i)i=this._pc.addTrack(e,t),n.set(t,i),this._senderMap.set(e,n),this._needsNegotiation();else throw i.removed?A(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):A(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(e,t,n){if(this.destroying)return;if(this.destroyed)throw A(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");let i=this._senderMap.get(e),o=i?i.get(n):null;if(!o)throw A(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,i),o.replaceTrack!=null?o.replaceTrack(t):this.destroy(A(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(e,t){if(this.destroying)return;if(this.destroyed)throw A(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");let n=this._senderMap.get(e),i=n?n.get(t):null;if(!i)throw A(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{i.removed=!0,this._pc.removeTrack(i)}catch(o){o.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(i):this.destroy(A(o,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){if(!this.destroying){if(this.destroyed)throw A(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),e.getTracks().forEach(t=>{this.removeTrack(t,e)})}}_needsNegotiation(){this._debug("_needsNegotiation"),!this._batchedNegotiation&&(this._batchedNegotiation=!0,Tr(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw A(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(e){this._destroy(e,()=>{})}_destroy(e,t){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",e&&(e.message||e)),Tr(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close"),t()}))}_setupData(e){if(!e.channel)return this.destroy(A(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=Ar),this.channelName=this._channel.label,this._channel.onmessage=n=>{this._onChannelMessage(n)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=n=>{let i=n.error instanceof Error?n.error:new Error(`Datachannel error: ${n.message} ${n.filename}:${n.lineno}:${n.colno}`);this.destroy(A(i,"ERR_DATA_CHANNEL"))};let t=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(t&&this._onChannelClose(),t=!0):t=!1},bu)}_read(){}_write(e,t,n){if(this.destroyed)return n(A(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(i){return this.destroy(A(i,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>Ar?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=e,this._cb=n}_onFinish(){if(this.destroyed)return;let e=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?e():this.once("connect",e)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(e=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(e.sdp=Bi(e.sdp)),e.sdp=this.sdpTransform(e.sdp);let t=()=>{if(this.destroyed)return;let o=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:o.type,sdp:o.sdp})},n=()=>{this._debug("createOffer success"),!this.destroyed&&(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))},i=o=>{this.destroy(A(o,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(e).then(n).catch(i)}).catch(e=>{this.destroy(A(e,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(e=>{!e.mid&&e.sender.track&&!e.requested&&(e.requested=!0,this.addTransceiver(e.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(e=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(e.sdp=Bi(e.sdp)),e.sdp=this.sdpTransform(e.sdp);let t=()=>{if(this.destroyed)return;let o=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:o.type,sdp:o.sdp}),this.initiator||this._requestMissingTransceivers()},n=()=>{this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))},i=o=>{this.destroy(A(o,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(e).then(n).catch(i)}).catch(e=>{this.destroy(A(e,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(A(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;let e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,t),this.emit("iceStateChange",e,t),(e==="connected"||e==="completed")&&(this._pcReady=!0,this._maybeReady()),e==="failed"&&this.destroy(A(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),e==="closed"&&this.destroy(A(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(e){let t=n=>(Object.prototype.toString.call(n.values)==="[object Array]"&&n.values.forEach(i=>{Object.assign(n,i)}),n);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(n=>{let i=[];n.forEach(o=>{i.push(t(o))}),e(null,i)},n=>e(n)):this._pc.getStats.length>0?this._pc.getStats(n=>{if(this.destroyed)return;let i=[];n.result().forEach(o=>{let s={};o.names().forEach(f=>{s[f]=o.stat(f)}),s.id=o.id,s.type=o.type,s.timestamp=o.timestamp,i.push(t(s))}),e(null,i)},n=>e(n)):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;let e=()=>{this.destroyed||this.getStats((t,n)=>{if(this.destroyed)return;t&&(n=[]);let i={},o={},s={},f=!1;n.forEach(d=>{(d.type==="remotecandidate"||d.type==="remote-candidate")&&(i[d.id]=d),(d.type==="localcandidate"||d.type==="local-candidate")&&(o[d.id]=d),(d.type==="candidatepair"||d.type==="candidate-pair")&&(s[d.id]=d)});let l=d=>{f=!0;let u=o[d.localCandidateId];u&&(u.ip||u.address)?(this.localAddress=u.ip||u.address,this.localPort=Number(u.port)):u&&u.ipAddress?(this.localAddress=u.ipAddress,this.localPort=Number(u.portNumber)):typeof d.googLocalAddress=="string"&&(u=d.googLocalAddress.split(":"),this.localAddress=u[0],this.localPort=Number(u[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let a=i[d.remoteCandidateId];a&&(a.ip||a.address)?(this.remoteAddress=a.ip||a.address,this.remotePort=Number(a.port)):a&&a.ipAddress?(this.remoteAddress=a.ipAddress,this.remotePort=Number(a.portNumber)):typeof d.googRemoteAddress=="string"&&(a=d.googRemoteAddress.split(":"),this.remoteAddress=a[0],this.remotePort=Number(a[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(n.forEach(d=>{d.type==="transport"&&d.selectedCandidatePairId&&l(s[d.selectedCandidatePairId]),(d.type==="googCandidatePair"&&d.googActiveConnection==="true"||(d.type==="candidatepair"||d.type==="candidate-pair")&&d.selected)&&l(d)}),!f&&(!Object.keys(s).length||Object.keys(o).length)){setTimeout(e,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(u){return this.destroy(A(u,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');let d=this._cb;this._cb=null,d(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};e()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>Ar||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):!e.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(this.destroyed)return;let t=e.data;t instanceof ArrayBuffer&&(t=wu.from(t)),this.push(t)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);let e=this._cb;this._cb=null,e(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach(t=>{this._debug("on track"),this.emit("track",e.track,t),this._remoteTracks.push({track:e.track,stream:t}),!this._remoteStreams.some(n=>n.id===t.id)&&(this._remoteStreams.push(t),Tr(()=>{this._debug("on stream"),this.emit("stream",t)}))})}_debug(){let e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],yu.apply(null,e)}};Z.WEBRTC_SUPPORT=!!Oi();Z.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"};Z.channelConfig={};Li.exports=Z});var Ni=S(()=>{m()});var Pi=S((hc,Ui)=>{m();var vu=ft()("simple-websocket"),Ru=Pe(),Cu=Sr(),Mi=xr(),ze=Ni(),Je=typeof ze!="function"?WebSocket:ze,Di=64*1024,At=class extends Cu.Duplex{constructor(e={}){if(typeof e=="string"&&(e={url:e}),e=Object.assign({allowHalfOpen:!1},e),super(e),e.url==null&&e.socket==null)throw new Error("Missing required `url` or `socket` option");if(e.url!=null&&e.socket!=null)throw new Error("Must specify either `url` or `socket` option, not both");if(this._id=Ru(4).toString("hex").slice(0,7),this._debug("new websocket: %o",e),this.connected=!1,this.destroyed=!1,this._chunk=null,this._cb=null,this._interval=null,e.socket)this.url=e.socket.url,this._ws=e.socket,this.connected=e.socket.readyState===Je.OPEN;else{this.url=e.url;try{typeof ze=="function"?this._ws=new Je(e.url,null,{...e,encoding:void 0}):this._ws=new Je(e.url)}catch(t){Mi(()=>this.destroy(t));return}}this._ws.binaryType="arraybuffer",e.socket&&this.connected?Mi(()=>this._handleOpen()):this._ws.onopen=()=>this._handleOpen(),this._ws.onmessage=t=>this._handleMessage(t),this._ws.onclose=()=>this._handleClose(),this._ws.onerror=t=>this._handleError(t),this._handleFinishBound=()=>this._handleFinish(),this.once("finish",this._handleFinishBound)}send(e){this._ws.send(e)}destroy(e){this._destroy(e,()=>{})}_destroy(e,t){if(!this.destroyed){if(this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this.connected=!1,this.destroyed=!0,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._handleFinishBound&&this.removeListener("finish",this._handleFinishBound),this._handleFinishBound=null,this._ws){let n=this._ws,i=()=>{n.onclose=null};if(n.readyState===Je.CLOSED)i();else try{n.onclose=i,n.close()}catch{i()}n.onopen=null,n.onmessage=null,n.onerror=()=>{}}this._ws=null,e&&this.emit("error",e),this.emit("close"),t()}}_read(){}_write(e,t,n){if(this.destroyed)return n(new Error("cannot write after socket is destroyed"));if(this.connected){try{this.send(e)}catch(i){return this.destroy(i)}typeof ze!="function"&&this._ws.bufferedAmount>Di?(this._debug("start backpressure: bufferedAmount %d",this._ws.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=e,this._cb=n}_handleOpen(){if(!(this.connected||this.destroyed)){if(this.connected=!0,this._chunk){try{this.send(this._chunk)}catch(t){return this.destroy(t)}this._chunk=null,this._debug('sent chunk from "write before connect"');let e=this._cb;this._cb=null,e(null)}typeof ze!="function"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}}_handleMessage(e){if(this.destroyed)return;let t=e.data;t instanceof ArrayBuffer&&(t=C.from(t)),this.push(t)}_handleClose(){this.destroyed||(this._debug("on close"),this.destroy())}_handleError(e){this.destroy(new Error(`Error connecting to ${this.url}`))}_handleFinish(){if(this.destroyed)return;let e=()=>{setTimeout(()=>this.destroy(),1e3)};this.connected?e():this.once("connect",e)}_onInterval(){if(!this._cb||!this._ws||this._ws.bufferedAmount>Di)return;this._debug("ending backpressure: bufferedAmount %d",this._ws.bufferedAmount);let e=this._cb;this._cb=null,e(null)}_debug(){let e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],vu.apply(null,e)}};At.WEBSOCKET_SUPPORT=!!Je;Ui.exports=At});var ji=S(()=>{m()});var qi=S(()=>{m()});var Wi=S(we=>{m();we.DEFAULT_ANNOUNCE_PEERS=50;we.MAX_ANNOUNCE_PEERS=82;we.binaryToHex=r=>(typeof r!="string"&&(r=String(r)),C.from(r,"binary").toString("hex"));we.hexToBinary=r=>(typeof r!="string"&&(r=String(r)),C.from(r,"hex").toString("binary"));we.parseUrl=r=>{let e=new URL(r.replace(/^udp:/,"http:"));return r.match(/^udp:/)&&Object.defineProperties(e,{href:{value:e.href.replace(/^http/,"udp")},protocol:{value:e.protocol.replace(/^http/,"udp")},origin:{value:e.origin.replace(/^http/,"udp")}}),e};var Su=qi();Object.assign(we,Su)});var $i=S((vc,Hi)=>{m();var xu=je(),kr=class extends xu{constructor(e,t){super(),this.client=e,this.announceUrl=t,this.interval=null,this.destroyed=!1}setInterval(e){e==null&&(e=this.DEFAULT_ANNOUNCE_INTERVAL),clearInterval(this.interval),e&&(this.interval=setInterval(()=>{this.announce(this.client._defaultAnnounceOpts())},e),this.interval.unref&&this.interval.unref())}};Hi.exports=kr});var Vi=S((Cc,Yi)=>{m();var Tu=fn(),W=ft()("bittorrent-tracker:websocket-tracker"),Au=Fi(),ku=Pe(),Iu=Pi(),Bu=ji(),se=Wi(),Ou=$i(),ee={},Lu=10*1e3,Fu=60*60*1e3,Nu=5*60*1e3,Mu=50*1e3,Ke=class extends Ou{constructor(e,t){super(e,t),W("new websocket tracker %s",t),this.peers={},this.socket=null,this.reconnecting=!1,this.retries=0,this.reconnectTimer=null,this.expectingResponse=!1,this._openSocket()}announce(e){if(this.destroyed||this.reconnecting)return;if(!this.socket.connected){this.socket.once("connect",()=>{this.announce(e)});return}let t=Object.assign({},e,{action:"announce",info_hash:this.client._infoHashBinary,peer_id:this.client._peerIdBinary});if(this._trackerId&&(t.trackerid=this._trackerId),e.event==="stopped"||e.event==="completed")this._send(t);else{let n=Math.min(e.numwant,5);this._generateOffers(n,i=>{t.numwant=n,t.offers=i,this._send(t)})}}scrape(e){if(this.destroyed||this.reconnecting)return;if(!this.socket.connected){this.socket.once("connect",()=>{this.scrape(e)});return}let n={action:"scrape",info_hash:Array.isArray(e.infoHash)&&e.infoHash.length>0?e.infoHash.map(i=>i.toString("binary")):e.infoHash&&e.infoHash.toString("binary")||this.client._infoHashBinary};this._send(n)}destroy(e=Gi){if(this.destroyed)return e(null);this.destroyed=!0,clearInterval(this.interval),clearTimeout(this.reconnectTimer);for(let o in this.peers){let s=this.peers[o];clearTimeout(s.trackerTimeout),s.destroy()}if(this.peers=null,this.socket&&(this.socket.removeListener("connect",this._onSocketConnectBound),this.socket.removeListener("data",this._onSocketDataBound),this.socket.removeListener("close",this._onSocketCloseBound),this.socket.removeListener("error",this._onSocketErrorBound),this.socket=null),this._onSocketConnectBound=null,this._onSocketErrorBound=null,this._onSocketDataBound=null,this._onSocketCloseBound=null,ee[this.announceUrl]&&(ee[this.announceUrl].consumers-=1),ee[this.announceUrl].consumers>0)return e();let t=ee[this.announceUrl];delete ee[this.announceUrl],t.on("error",Gi),t.once("close",e);let n;if(!this.expectingResponse)return i();n=setTimeout(i,se.DESTROY_TIMEOUT),t.once("data",i);function i(){n&&(clearTimeout(n),n=null),t.removeListener("data",i),t.destroy(),t=null}}_openSocket(){if(this.destroyed=!1,this.peers||(this.peers={}),this._onSocketConnectBound=()=>{this._onSocketConnect()},this._onSocketErrorBound=e=>{this._onSocketError(e)},this._onSocketDataBound=e=>{this._onSocketData(e)},this._onSocketCloseBound=()=>{this._onSocketClose()},this.socket=ee[this.announceUrl],this.socket)ee[this.announceUrl].consumers+=1,this.socket.connected&&this._onSocketConnectBound();else{let e=new URL(this.announceUrl),t;this.client._proxyOpts&&(t=e.protocol==="wss:"?this.client._proxyOpts.httpsAgent:this.client._proxyOpts.httpAgent,!t&&this.client._proxyOpts.socksProxy&&(t=new Bu.Agent(Tu(this.client._proxyOpts.socksProxy),e.protocol==="wss:"))),this.socket=ee[this.announceUrl]=new Iu({url:this.announceUrl,agent:t}),this.socket.consumers=1,this.socket.once("connect",this._onSocketConnectBound)}this.socket.on("data",this._onSocketDataBound),this.socket.once("close",this._onSocketCloseBound),this.socket.once("error",this._onSocketErrorBound)}_onSocketConnect(){this.destroyed||this.reconnecting&&(this.reconnecting=!1,this.retries=0,this.announce(this.client._defaultAnnounceOpts()))}_onSocketData(e){if(!this.destroyed){this.expectingResponse=!1;try{e=JSON.parse(e)}catch{this.client.emit("warning",new Error("Invalid tracker response"));return}e.action==="announce"?this._onAnnounceResponse(e):e.action==="scrape"?this._onScrapeResponse(e):this._onSocketError(new Error(`invalid action in WS response: ${e.action}`))}}_onAnnounceResponse(e){if(e.info_hash!==this.client._infoHashBinary){W("ignoring websocket data from %s for %s (looking for %s: reused socket)",this.announceUrl,se.binaryToHex(e.info_hash),this.client.infoHash);return}if(e.peer_id&&e.peer_id===this.client._peerIdBinary)return;W("received %s from %s for %s",JSON.stringify(e),this.announceUrl,this.client.infoHash);let t=e["failure reason"];if(t)return this.client.emit("warning",new Error(t));let n=e["warning message"];n&&this.client.emit("warning",new Error(n));let i=e.interval||e["min interval"];i&&this.setInterval(i*1e3);let o=e["tracker id"];if(o&&(this._trackerId=o),e.complete!=null){let f=Object.assign({},e,{announce:this.announceUrl,infoHash:se.binaryToHex(e.info_hash)});this.client.emit("update",f)}let s;if(e.offer&&e.peer_id&&(W("creating peer (from remote offer)"),s=this._createPeer(),s.id=se.binaryToHex(e.peer_id),s.once("signal",f=>{let l={action:"announce",info_hash:this.client._infoHashBinary,peer_id:this.client._peerIdBinary,to_peer_id:e.peer_id,answer:f,offer_id:e.offer_id};this._trackerId&&(l.trackerid=this._trackerId),this._send(l)}),this.client.emit("peer",s),s.signal(e.offer)),e.answer&&e.peer_id){let f=se.binaryToHex(e.offer_id);s=this.peers[f],s?(s.id=se.binaryToHex(e.peer_id),this.client.emit("peer",s),s.signal(e.answer),clearTimeout(s.trackerTimeout),s.trackerTimeout=null,delete this.peers[f]):W(`got unexpected answer: ${JSON.stringify(e.answer)}`)}}_onScrapeResponse(e){e=e.files||{};let t=Object.keys(e);if(t.length===0){this.client.emit("warning",new Error("invalid scrape response"));return}t.forEach(n=>{let i=Object.assign(e[n],{announce:this.announceUrl,infoHash:se.binaryToHex(n)});this.client.emit("scrape",i)})}_onSocketClose(){this.destroyed||(this.destroy(),this._startReconnectTimer())}_onSocketError(e){this.destroyed||(this.destroy(),this.client.emit("warning",e),this._startReconnectTimer())}_startReconnectTimer(){let e=Math.floor(Math.random()*Nu)+Math.min(Math.pow(2,this.retries)*Lu,Fu);this.reconnecting=!0,clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout(()=>{this.retries++,this._openSocket()},e),this.reconnectTimer.unref&&this.reconnectTimer.unref(),W("reconnecting socket in %s ms",e)}_send(e){if(this.destroyed)return;this.expectingResponse=!0;let t=JSON.stringify(e);W("send %s",t),this.socket.send(t)}_generateOffers(e,t){let n=this,i=[];W("generating %s offers",e);for(let f=0;f<e;++f)o();s();function o(){let f=ku(20).toString("hex");W("creating peer (from _generateOffers)");let l=n.peers[f]=n._createPeer({initiator:!0});l.once("signal",d=>{i.push({offer:d,offer_id:se.hexToBinary(f)}),s()}),l.trackerTimeout=setTimeout(()=>{W("tracker timeout: destroying peer"),l.trackerTimeout=null,delete n.peers[f],l.destroy()},Mu),l.trackerTimeout.unref&&l.trackerTimeout.unref()}function s(){i.length===e&&(W("generated %s offers",e),t(i))}}_createPeer(e){let t=this;e=Object.assign({trickle:!1,config:t.client._rtcConfig,wrtc:t.client._wrtc},e);let n=new Au(e);return n.once("error",i),n.once("connect",o),n;function i(s){t.client.emit("warning",new Error(`Connection error: ${s.message}`)),n.destroy()}function o(){n.removeListener("error",i),n.removeListener("connect",o)}}};Ke.prototype.DEFAULT_ANNOUNCE_INTERVAL=30*1e3;Ke._socketPool=ee;function Gi(){}Yi.exports=Ke});var Br=S((Xe,Ir)=>{m();(function(e,t){typeof Xe=="object"&&typeof Ir=="object"?Ir.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Xe=="object"?Xe.Rusha=t():e.Rusha=t()})(typeof self<"u"?self:Xe,function(){return function(r){var e={};function t(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return r[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=r,t.c=e,t.d=function(n,i,o){t.o(n,i)||Object.defineProperty(n,i,{configurable:!1,enumerable:!0,get:o})},t.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(i,"a",i),i},t.o=function(n,i){return Object.prototype.hasOwnProperty.call(n,i)},t.p="",t(t.s=3)}([function(r,e,t){function n(h,_){if(!(h instanceof _))throw new TypeError("Cannot call a class as a function")}var i=t(5),o=t(1),s=o.toHex,f=o.ceilHeapSize,l=t(6),d=function(h){for(h+=9;h%64>0;h+=1);return h},u=function(h,_){var p=new Uint8Array(h.buffer),E=_%4,w=_-E;switch(E){case 0:p[w+3]=0;case 1:p[w+2]=0;case 2:p[w+1]=0;case 3:p[w+0]=0}for(var b=(_>>2)+1;b<h.length;b++)h[b]=0},a=function(h,_,p){h[_>>2]|=128<<24-(_%4<<3),h[((_>>2)+2&-16)+14]=p/(1<<29)|0,h[((_>>2)+2&-16)+15]=p<<3},c=function(h,_){var p=new Int32Array(h,_+320,5),E=new Int32Array(5),w=new DataView(E.buffer);return w.setInt32(0,p[0],!1),w.setInt32(4,p[1],!1),w.setInt32(8,p[2],!1),w.setInt32(12,p[3],!1),w.setInt32(16,p[4],!1),E},y=function(){function h(_){if(n(this,h),_=_||64*1024,_%64>0)throw new Error("Chunk size must be a multiple of 128 bit");this._offset=0,this._maxChunkLen=_,this._padMaxChunkLen=d(_),this._heap=new ArrayBuffer(f(this._padMaxChunkLen+320+20)),this._h32=new Int32Array(this._heap),this._h8=new Int8Array(this._heap),this._core=new i({Int32Array},{},this._heap)}return h.prototype._initState=function(p,E){this._offset=0;var w=new Int32Array(p,E+320,5);w[0]=1732584193,w[1]=-271733879,w[2]=-1732584194,w[3]=271733878,w[4]=-1009589776},h.prototype._padChunk=function(p,E){var w=d(p),b=new Int32Array(this._heap,0,w>>2);return u(b,p),a(b,p,E),w},h.prototype._write=function(p,E,w,b){l(p,this._h8,this._h32,E,w,b||0)},h.prototype._coreCall=function(p,E,w,b,R){var x=w;this._write(p,E,w),R&&(x=this._padChunk(w,b)),this._core.hash(x,this._padMaxChunkLen)},h.prototype.rawDigest=function(p){var E=p.byteLength||p.length||p.size||0;this._initState(this._heap,this._padMaxChunkLen);var w=0,b=this._maxChunkLen;for(w=0;E>w+b;w+=b)this._coreCall(p,w,b,E,!1);return this._coreCall(p,w,E-w,E,!0),c(this._heap,this._padMaxChunkLen)},h.prototype.digest=function(p){return s(this.rawDigest(p).buffer)},h.prototype.digestFromString=function(p){return this.digest(p)},h.prototype.digestFromBuffer=function(p){return this.digest(p)},h.prototype.digestFromArrayBuffer=function(p){return this.digest(p)},h.prototype.resetState=function(){return this._initState(this._heap,this._padMaxChunkLen),this},h.prototype.append=function(p){var E=0,w=p.byteLength||p.length||p.size||0,b=this._offset%this._maxChunkLen,R=void 0;for(this._offset+=w;E<w;)R=Math.min(w-E,this._maxChunkLen-b),this._write(p,E,R,b),b+=R,E+=R,b===this._maxChunkLen&&(this._core.hash(this._maxChunkLen,this._padMaxChunkLen),b=0);return this},h.prototype.getState=function(){var p=this._offset%this._maxChunkLen,E=void 0;if(p)E=this._heap.slice(0);else{var w=new Int32Array(this._heap,this._padMaxChunkLen+320,5);E=w.buffer.slice(w.byteOffset,w.byteOffset+w.byteLength)}return{offset:this._offset,heap:E}},h.prototype.setState=function(p){if(this._offset=p.offset,p.heap.byteLength===20){var E=new Int32Array(this._heap,this._padMaxChunkLen+320,5);E.set(new Int32Array(p.heap))}else this._h32.set(new Int32Array(p.heap));return this},h.prototype.rawEnd=function(){var p=this._offset,E=p%this._maxChunkLen,w=this._padChunk(E,p);this._core.hash(w,this._padMaxChunkLen);var b=c(this._heap,this._padMaxChunkLen);return this._initState(this._heap,this._padMaxChunkLen),b},h.prototype.end=function(){return s(this.rawEnd().buffer)},h}();r.exports=y,r.exports._core=i},function(r,e){for(var t=new Array(256),n=0;n<256;n++)t[n]=(n<16?"0":"")+n.toString(16);r.exports.toHex=function(i){for(var o=new Uint8Array(i),s=new Array(i.byteLength),f=0;f<s.length;f++)s[f]=t[o[f]];return s.join("")},r.exports.ceilHeapSize=function(i){var o=0;if(i<=65536)return 65536;if(i<16777216)for(o=1;o<i;o=o<<1);else for(o=16777216;o<i;o+=16777216);return o},r.exports.isDedicatedWorkerScope=function(i){var o="WorkerGlobalScope"in i&&i instanceof i.WorkerGlobalScope,s="SharedWorkerGlobalScope"in i&&i instanceof i.SharedWorkerGlobalScope,f="ServiceWorkerGlobalScope"in i&&i instanceof i.ServiceWorkerGlobalScope;return o&&!s&&!f}},function(r,e,t){r.exports=function(){var n=t(0),i=function(f,l,d){try{return d(null,f.digest(l))}catch(u){return d(u)}},o=function(f,l,d,u,a){var c=new self.FileReader;c.onloadend=function(){if(c.error)return a(c.error);var h=c.result;l+=c.result.byteLength;try{f.append(h)}catch(_){a(_);return}l<u.size?o(f,l,d,u,a):a(null,f.end())},c.readAsArrayBuffer(u.slice(l,l+d))},s=!0;return self.onmessage=function(f){if(!!s){var l=f.data.data,d=f.data.file,u=f.data.id;if(!(typeof u>"u")&&!(!d&&!l)){var a=f.data.blockSize||4*1024*1024,c=new n(a);c.resetState();var y=function(h,_){h?self.postMessage({id:u,error:h.name}):self.postMessage({id:u,hash:_})};l&&i(c,l,y),d&&o(c,0,a,d,y)}}},function(){s=!1}}},function(r,e,t){var n=t(4),i=t(0),o=t(7),s=t(2),f=t(1),l=f.isDedicatedWorkerScope,d=typeof self<"u"&&l(self);i.disableWorkerBehaviour=d?s():function(){},i.createWorker=function(){var u=n(2),a=u.terminate;return u.terminate=function(){URL.revokeObjectURL(u.objectURL),a.call(u)},u},i.createHash=o,r.exports=i},function(r,e,t){function n(u){var a={};function c(h){if(a[h])return a[h].exports;var _=a[h]={i:h,l:!1,exports:{}};return u[h].call(_.exports,_,_.exports,c),_.l=!0,_.exports}c.m=u,c.c=a,c.i=function(h){return h},c.d=function(h,_,p){c.o(h,_)||Object.defineProperty(h,_,{configurable:!1,enumerable:!0,get:p})},c.r=function(h){Object.defineProperty(h,"__esModule",{value:!0})},c.n=function(h){var _=h&&h.__esModule?function(){return h.default}:function(){return h};return c.d(_,"a",_),_},c.o=function(h,_){return Object.prototype.hasOwnProperty.call(h,_)},c.p="/",c.oe=function(h){throw console.error(h),h};var y=c(c.s=ENTRY_MODULE);return y.default||y}var i="[\\.|\\-|\\+|\\w|/|@]+",o="\\((/\\*.*?\\*/)?s?.*?("+i+").*?\\)";function s(u){return(u+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function f(u,a,c){var y={};y[c]=[];var h=a.toString(),_=h.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!_)return y;for(var p=_[1],E=new RegExp("(\\\\n|\\W)"+s(p)+o,"g"),w;w=E.exec(h);)w[3]!=="dll-reference"&&y[c].push(w[3]);for(E=new RegExp("\\("+s(p)+'\\("(dll-reference\\s('+i+'))"\\)\\)'+o,"g");w=E.exec(h);)u[w[2]]||(y[c].push(w[1]),u[w[2]]=t(w[1]).m),y[w[2]]=y[w[2]]||[],y[w[2]].push(w[4]);return y}function l(u){var a=Object.keys(u);return a.reduce(function(c,y){return c||u[y].length>0},!1)}function d(u,a){for(var c={main:[a]},y={main:[]},h={main:{}};l(c);)for(var _=Object.keys(c),p=0;p<_.length;p++){var E=_[p],w=c[E],b=w.pop();if(h[E]=h[E]||{},!(h[E][b]||!u[E][b])){h[E][b]=!0,y[E]=y[E]||[],y[E].push(b);for(var R=f(u,u[E][b],E),x=Object.keys(R),I=0;I<x.length;I++)c[x[I]]=c[x[I]]||[],c[x[I]]=c[x[I]].concat(R[x[I]])}}return y}r.exports=function(u,a){a=a||{};var c={main:t.m},y=a.all?{main:Object.keys(c)}:d(c,u),h="";Object.keys(y).filter(function(b){return b!=="main"}).forEach(function(b){for(var R=0;y[b][R];)R++;y[b].push(R),c[b][R]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",h=h+"var "+b+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(R))+")({"+y[b].map(function(x){return""+JSON.stringify(x)+": "+c[b][x].toString()}).join(",")+`});
`}),h=h+"("+n.toString().replace("ENTRY_MODULE",JSON.stringify(u))+")({"+y.main.map(function(b){return""+JSON.stringify(b)+": "+c.main[b].toString()}).join(",")+"})(self);";var _=new window.Blob([h],{type:"text/javascript"});if(a.bare)return _;var p=window.URL||window.webkitURL||window.mozURL||window.msURL,E=p.createObjectURL(_),w=new window.Worker(E);return w.objectURL=E,w}},function(r,e){r.exports=function(n,i,o){var s=new n.Int32Array(o);function f(l,d){l=l|0,d=d|0;var u=0,a=0,c=0,y=0,h=0,_=0,p=0,E=0,w=0,b=0,R=0,x=0,I=0,F=0;for(c=s[d+320>>2]|0,h=s[d+324>>2]|0,p=s[d+328>>2]|0,w=s[d+332>>2]|0,R=s[d+336>>2]|0,u=0;(u|0)<(l|0);u=u+64|0){for(y=c,_=h,E=p,b=w,x=R,a=0;(a|0)<64;a=a+4|0)F=s[u+a>>2]|0,I=((c<<5|c>>>27)+(h&p|~h&w)|0)+((F+R|0)+1518500249|0)|0,R=w,w=p,p=h<<30|h>>>2,h=c,c=I,s[l+a>>2]=F;for(a=l+64|0;(a|0)<(l+80|0);a=a+4|0)F=(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])<<1|(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])>>>31,I=((c<<5|c>>>27)+(h&p|~h&w)|0)+((F+R|0)+1518500249|0)|0,R=w,w=p,p=h<<30|h>>>2,h=c,c=I,s[a>>2]=F;for(a=l+80|0;(a|0)<(l+160|0);a=a+4|0)F=(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])<<1|(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])>>>31,I=((c<<5|c>>>27)+(h^p^w)|0)+((F+R|0)+1859775393|0)|0,R=w,w=p,p=h<<30|h>>>2,h=c,c=I,s[a>>2]=F;for(a=l+160|0;(a|0)<(l+240|0);a=a+4|0)F=(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])<<1|(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])>>>31,I=((c<<5|c>>>27)+(h&p|h&w|p&w)|0)+((F+R|0)-1894007588|0)|0,R=w,w=p,p=h<<30|h>>>2,h=c,c=I,s[a>>2]=F;for(a=l+240|0;(a|0)<(l+320|0);a=a+4|0)F=(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])<<1|(s[a-12>>2]^s[a-32>>2]^s[a-56>>2]^s[a-64>>2])>>>31,I=((c<<5|c>>>27)+(h^p^w)|0)+((F+R|0)-899497514|0)|0,R=w,w=p,p=h<<30|h>>>2,h=c,c=I,s[a>>2]=F;c=c+y|0,h=h+_|0,p=p+E|0,w=w+b|0,R=R+x|0}s[d+320>>2]=c,s[d+324>>2]=h,s[d+328>>2]=p,s[d+332>>2]=w,s[d+336>>2]=R}return{hash:f}}},function(r,e){var t=this,n=void 0;typeof self<"u"&&typeof self.FileReaderSync<"u"&&(n=new self.FileReaderSync);var i=function(f,l,d,u,a,c){var y=void 0,h=c%4,_=(a+h)%4,p=a-_;switch(h){case 0:l[c]=f.charCodeAt(u+3);case 1:l[c+1-(h<<1)|0]=f.charCodeAt(u+2);case 2:l[c+2-(h<<1)|0]=f.charCodeAt(u+1);case 3:l[c+3-(h<<1)|0]=f.charCodeAt(u)}if(!(a<_+(4-h))){for(y=4-h;y<p;y=y+4|0)d[c+y>>2]=f.charCodeAt(u+y)<<24|f.charCodeAt(u+y+1)<<16|f.charCodeAt(u+y+2)<<8|f.charCodeAt(u+y+3);switch(_){case 3:l[c+p+1|0]=f.charCodeAt(u+p+2);case 2:l[c+p+2|0]=f.charCodeAt(u+p+1);case 1:l[c+p+3|0]=f.charCodeAt(u+p)}}},o=function(f,l,d,u,a,c){var y=void 0,h=c%4,_=(a+h)%4,p=a-_;switch(h){case 0:l[c]=f[u+3];case 1:l[c+1-(h<<1)|0]=f[u+2];case 2:l[c+2-(h<<1)|0]=f[u+1];case 3:l[c+3-(h<<1)|0]=f[u]}if(!(a<_+(4-h))){for(y=4-h;y<p;y=y+4|0)d[c+y>>2|0]=f[u+y]<<24|f[u+y+1]<<16|f[u+y+2]<<8|f[u+y+3];switch(_){case 3:l[c+p+1|0]=f[u+p+2];case 2:l[c+p+2|0]=f[u+p+1];case 1:l[c+p+3|0]=f[u+p]}}},s=function(f,l,d,u,a,c){var y=void 0,h=c%4,_=(a+h)%4,p=a-_,E=new Uint8Array(n.readAsArrayBuffer(f.slice(u,u+a)));switch(h){case 0:l[c]=E[3];case 1:l[c+1-(h<<1)|0]=E[2];case 2:l[c+2-(h<<1)|0]=E[1];case 3:l[c+3-(h<<1)|0]=E[0]}if(!(a<_+(4-h))){for(y=4-h;y<p;y=y+4|0)d[c+y>>2|0]=E[y]<<24|E[y+1]<<16|E[y+2]<<8|E[y+3];switch(_){case 3:l[c+p+1|0]=E[p+2];case 2:l[c+p+2|0]=E[p+1];case 1:l[c+p+3|0]=E[p]}}};r.exports=function(f,l,d,u,a,c){if(typeof f=="string")return i(f,l,d,u,a,c);if(f instanceof Array||t&&t.Buffer&&t.Buffer.isBuffer(f))return o(f,l,d,u,a,c);if(f instanceof ArrayBuffer)return o(new Uint8Array(f),l,d,u,a,c);if(f.buffer instanceof ArrayBuffer)return o(new Uint8Array(f.buffer,f.byteOffset,f.byteLength),l,d,u,a,c);if(f instanceof Blob)return s(f,l,d,u,a,c);throw new Error("Unsupported data type.")}},function(r,e,t){var n=function(){function d(u,a){for(var c=0;c<a.length;c++){var y=a[c];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(u,y.key,y)}}return function(u,a,c){return a&&d(u.prototype,a),c&&d(u,c),u}}();function i(d,u){if(!(d instanceof u))throw new TypeError("Cannot call a class as a function")}var o=t(0),s=t(1),f=s.toHex,l=function(){function d(){i(this,d),this._rusha=new o,this._rusha.resetState()}return d.prototype.update=function(a){return this._rusha.append(a),this},d.prototype.digest=function(a){var c=this._rusha.rawEnd().buffer;if(!a)return c;if(a==="hex")return f(c);throw new Error("unsupported digest encoding")},n(d,[{key:"state",get:function(){return this._rusha.getState()},set:function(u){this._rusha.setState(u)}}]),d}();r.exports=function(){return new l}}])})});var zi=S((Tc,Ji)=>{m();var Du=Br(),Bt,kt,It;function Uu(){Bt=Du.createWorker(),kt=1,It={},Bt.onmessage=function(e){let t=e.data.id,n=It[t];delete It[t],e.data.error!=null?n(new Error("Rusha worker error: "+e.data.error)):n(null,e.data.hash)}}function Pu(r,e){Bt||Uu(),It[kt]=e,Bt.postMessage({id:kt,data:r}),kt+=1}Ji.exports=Pu});var Qi=S((kc,Or)=>{m();var ju=Br(),qu=zi(),Wu=new ju,Ki=typeof window<"u"?window:self,Xi=Ki.crypto||Ki.msCrypto||{},Qe=Xi.subtle||Xi.webkitSubtle;function Ot(r){return Wu.digest(r)}try{Qe.digest({name:"sha-1"},new Uint8Array).catch(function(){Qe=!1})}catch{Qe=!1}function Hu(r,e){if(!Qe){typeof window<"u"?qu(r,function(n,i){if(n){e(Ot(r));return}e(i)}):queueMicrotask(()=>e(Ot(r)));return}typeof r=="string"&&(r=$u(r)),Qe.digest({name:"sha-1"},r).then(function(n){e(Gu(new Uint8Array(n)))},function(){e(Ot(r))})}function $u(r){let e=r.length,t=new Uint8Array(e);for(let n=0;n<e;n++)t[n]=r.charCodeAt(n);return t}function Gu(r){let e=r.length,t=[];for(let n=0;n<e;n++){let i=r[n];t.push((i>>>4).toString(16)),t.push((i&15).toString(16))}return t.join("")}Or.exports=Hu;Or.exports.sync=Ot});m();var Lr=tt(Vi()),ro=tt(Pe()),no=tt(je()),io=tt(Qi()),Zi="^",eo=16e3,to=class extends no.default{constructor(t,n){super();this.announce=[];this.trackers={};this.peers={};this.responseWaiting={};this.msgChunks={};this._identifier="";this._peerIdBuffer=(0,ro.default)(20);this._peerId=this._peerIdBuffer.toString("hex");this._peerIdBinary=this._peerIdBuffer.toString("binary");this.announce=t||this.announce,this.identifier=n||this.identifier}set identifier(t){this._identifier=t,this.infoHash=io.default.sync(t).toLowerCase(),this._infoHashBuffer=C.from(this.infoHash,"hex"),this._infoHashBinary=this._infoHashBuffer.toString("binary")}start(){this.on("peer",t=>{let n=!1;this.peers[t.id]||(n=!0,this.peers[t.id]={},this.responseWaiting[t.id]={}),t.on("connect",()=>{this.peers[t.id][t.channelName]=t,n&&this.emit("peerconnect",t)}),t.on("data",i=>{if(this.emit("data",t,i),i=i.toString(),i[0]===Zi)try{i=JSON.parse(i.slice(1)),t.respond=this._peerRespond(t,i.id);let o=this._chunkHandler(i);o!==!1&&(i.o&&(o=JSON.parse(o)),this.responseWaiting[t.id][i.id]?(this.responseWaiting[t.id][i.id]([t,o]),delete this.responseWaiting[t.id][i.id]):this.emit("msg",t,o),this._destroyChunks(i.id))}catch(o){console.error(o)}}),t.on("error",i=>{this._removePeer(t),console.warn("Error in connection to peer:",i)}),t.on("close",()=>{this._removePeer(t),console.log(`Connection to ${t.id} closed.`)})}),this.on("update",t=>{let n=this.trackers[this.announce.indexOf(t.announce)];this.emit("trackerconnect",n,this.getTrackerStats())}),this.on("warning",t=>{this.emit("trackerwarning",t,this.getTrackerStats())}),this._fetchPeers()}addTracker(t){if(this.announce.indexOf(t)!==-1)throw new Error("Tracker already added.");let n=this.announce.push(t);this.trackers[n]=new Lr.default(this,t),this.trackers[n].announce(this._defaultAnnounceOpts())}removeTracker(t){let n=this.announce.indexOf(t);if(n===-1)throw new Error("Tracker does not exist");this.trackers[n].peers=[],this.trackers[n].destroy(),delete this.trackers[n],delete this.announce[n]}_removePeer(t){if(!this.peers[t.id])return!1;delete this.peers[t.id][t.channelName],Object.keys(this.peers[t.id]).length===0&&(this.emit("peerclose",t),delete this.responseWaiting[t.id],delete this.peers[t.id])}send(t,n,i=""){return new Promise((o,s)=>{let f={id:i||String(Math.floor(Math.random()*1e5+1e5)),msg:typeof n=="object"?JSON.stringify(n):n,o:typeof n=="object"?1:null};try{if(!t.connected){for(let u in this.peers[t.id])if(t=this.peers[t.id][u],t.connected)break}this.responseWaiting[t.id]||(this.responseWaiting[t.id]={}),this.responseWaiting[t.id][f.id]=o}catch(u){return s(Error("Connection to peer closed"+u))}let l=0,d="";for(;f.msg.length>0;)f.c=l,d=f.msg.slice(eo),f.msg=f.msg.slice(0,eo),d||(f.last=!0),t.send(Zi+JSON.stringify(f)),f.msg=d,l++})}requestMorePeers(){return new Promise(t=>{for(let n in this.trackers)this.trackers[n].announce(this._defaultAnnounceOpts());t(this.peers)})}getTrackerStats(){let t=0;for(let n in this.trackers)this.trackers[n].socket&&this.trackers[n].socket.connect&&t++;return{connected:t,total:this.announce.length}}destroy(){for(let t in this.peers)for(let n in this.peers[t])this.peers[t][n].destroy();Object.keys(this.trackers).forEach(t=>this.trackers[t].destroy())}_peerRespond(t,n){return i=>this.send(t,i,n)}_chunkHandler(t){return this.msgChunks[t.id]||(this.msgChunks[t.id]=[]),this.msgChunks[t.id][t.c]=t.msg,t.last?this.msgChunks[t.id].join(""):!1}_destroyChunks(t){delete this.msgChunks[t]}_defaultAnnounceOpts(t={}){return t.numwant==null&&(t.numwant=50),t.uploaded==null&&(t.uploaded=0),t.downloaded==null&&(t.downloaded=0),t}_fetchPeers(){for(let t in this.announce)this.trackers[t]=new Lr.default(this,this.announce[t]),this.trackers[t].announce(this._defaultAnnounceOpts())}};})();
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! simple-websocket. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
